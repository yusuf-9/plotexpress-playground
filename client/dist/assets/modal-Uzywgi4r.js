import{c as he,r as a,j as t,u as lt,a as Ie,b as Xe,d as Ee,P as B,e as it,R as Rs,I as As,f as F,g as Ps,h as A,C as j,i as _s,B as Z,k as ct,l as dt,m as Ms,n as ut,o as ks,p as Ds,q as X,A as Ls,s as Q,t as Os,v as ft,V as Vs,w as Fs,x as $s,y as Bs,z as Hs,S as zs,F as Gs,D as Us,E as Ks,G as nt,H as Ws,J as oe,K as Ys,T as qs,L as Xs,M as Te,N as mt,O as re,Q as Js,U as Zs,W as be,X as Qs,Y as Se,Z as en,_ as tn,$ as sn,a0 as we,a1 as Ce,a2 as ye,a3 as nn,a4 as rn,a5 as on,a6 as an,a7 as ln}from"./index-DqOfpeXh.js";import{D as cn,a as dn,b as un,C as pt,c as fn,d as mn,e as pn}from"./index-C_oK9nPP.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]],xn=he("ChartArea",hn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],vn=he("ChartLine",gn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=[["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["circle",{cx:"18.5",cy:"5.5",r:".5",fill:"currentColor",key:"lysivs"}],["circle",{cx:"11.5",cy:"11.5",r:".5",fill:"currentColor",key:"byv1b8"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["circle",{cx:"17.5",cy:"14.5",r:".5",fill:"currentColor",key:"1gjh6j"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]],Sn=he("ChartScatter",bn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ht=he("Check",wn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],yn=he("ChevronUp",Cn),Tn=()=>t.jsxs(cn,{className:"px-6 py-4",children:[t.jsx(dn,{children:"Create a New Chart"}),t.jsx(un,{children:"Follow the steps to create your custom chart."})]}),Nn=a.memo(Tn);var Je="Tabs",[In,Vo]=Xe(Je,[it]),xt=it(),[jn,Ze]=In(Je),gt=a.forwardRef((e,s)=>{const{__scopeTabs:n,value:o,onValueChange:r,defaultValue:i,orientation:l="horizontal",dir:c,activationMode:d="automatic",...u}=e,h=lt(c),[p,f]=Ie({prop:o,onChange:r,defaultProp:i});return t.jsx(jn,{scope:n,baseId:Ee(),value:p,onValueChange:f,orientation:l,dir:h,activationMode:d,children:t.jsx(B.div,{dir:h,"data-orientation":l,...u,ref:s})})});gt.displayName=Je;var vt="TabsList",bt=a.forwardRef((e,s)=>{const{__scopeTabs:n,loop:o=!0,...r}=e,i=Ze(vt,n),l=xt(n);return t.jsx(Rs,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:o,children:t.jsx(B.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:s})})});bt.displayName=vt;var St="TabsTrigger",wt=a.forwardRef((e,s)=>{const{__scopeTabs:n,value:o,disabled:r=!1,...i}=e,l=Ze(St,n),c=xt(n),d=Tt(l.baseId,o),u=Nt(l.baseId,o),h=o===l.value;return t.jsx(As,{asChild:!0,...c,focusable:!r,active:h,children:t.jsx(B.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:d,...i,ref:s,onMouseDown:F(e.onMouseDown,p=>{!r&&p.button===0&&p.ctrlKey===!1?l.onValueChange(o):p.preventDefault()}),onKeyDown:F(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&l.onValueChange(o)}),onFocus:F(e.onFocus,()=>{const p=l.activationMode!=="manual";!h&&!r&&p&&l.onValueChange(o)})})})});wt.displayName=St;var Ct="TabsContent",yt=a.forwardRef((e,s)=>{const{__scopeTabs:n,value:o,forceMount:r,children:i,...l}=e,c=Ze(Ct,n),d=Tt(c.baseId,o),u=Nt(c.baseId,o),h=o===c.value,p=a.useRef(h);return a.useEffect(()=>{const f=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(f)},[]),t.jsx(Ps,{present:r||h,children:({present:f})=>t.jsx(B.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!f,id:u,tabIndex:0,...l,ref:s,style:{...e.style,animationDuration:p.current?"0s":void 0},children:f&&i})})});yt.displayName=Ct;function Tt(e,s){return`${e}-trigger-${s}`}function Nt(e,s){return`${e}-content-${s}`}var En=gt,Rn=bt,An=wt,Pn=yt;function It({className:e,...s}){return t.jsx(En,{"data-slot":"tabs",className:A("flex flex-col gap-2",e),...s})}function jt({className:e,...s}){return t.jsx(Rn,{"data-slot":"tabs-list",className:A("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",e),...s})}function Et({className:e,...s}){return t.jsx(An,{"data-slot":"tabs-trigger",className:A("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s})}function Rt({className:e,...s}){return t.jsx(Pn,{"data-slot":"tabs-content",className:A("flex-1 outline-none",e),...s})}const _n=[{icon:_s,label:"Bar",key:j.BAR},{icon:vn,label:"Line",key:j.LINE},{icon:Sn,label:"Scatter",key:j.SCATTER},{icon:xn,label:"Area",key:j.AREA}],Y={CHART_TYPE_SELECT:{label:"Choose Chart Type",value:1},DATA_SELECT:{label:"Select Data Source",value:2},CUSTOMIZATION:{label:"Customize",value:3}},Mn=e=>{const{currentStep:s,onStepChange:n,checkIfStepIsDisabled:o}=e;return t.jsx(jt,{className:"w-full justify-start h-12 px-6 border-b border-b-secondary bg-primary-foreground",children:Object.values(Y).map(r=>{const i=o(r.value),l=r.value===s;return t.jsxs(Et,{value:r.value.toString(),disabled:i,onClick:()=>n(r.value),className:A("flex-1 h-full data-[state=active]:font-semibold data-[state=active]:shadow-none !bg-primary-foreground transition-all cursor-pointer",i&&"!cursor-not-allowed"),children:[t.jsx("span",{className:A(`mr-2 w-6 h-6 rounded-full ${r.value<=s?"bg-transparent text-primary border border-primary":"bg-foreground/10 text-accent-foreground"} flex items-center justify-center text-sm`,l&&"!bg-primary !text-background !border-primary rounded-full"),children:r.value}),t.jsx("span",{className:r.value<=s?"text-primary":"text-muted-foreground",children:r.label})]},r.value)})})},kn=a.memo(Mn),Dn=e=>{const{disableNextStep:s,onNext:n,onPrevious:o,isLastStep:r,disablePreviousStep:i}=e;return t.jsxs("div",{className:"flex-shrink-0 px-6 py-4 flex justify-between items-center border-t border-t-secondary bg-primary-foreground",children:[t.jsx(Z,{onClick:o,variant:"outline",disabled:i,children:"Previous"}),t.jsx(Z,{variant:"default",disabled:s,onClick:n,children:r?"Finish":"Next"})]})},Ln=a.memo(Dn),On=e=>{const{tabValue:s,sectionJsx:n,chartPreviewJsx:o}=e,[r,i]=a.useState(!0),[l,c]=a.useState(!0),d=()=>{const u=!r;i(u),setTimeout(()=>{c(u)},300)};return t.jsx(Rt,{value:s,className:"flex-grow flex flex-col overflow-hidden",children:t.jsxs("div",{className:"flex flex-grow p-6 space-x-6",children:[t.jsx("div",{className:A("flex-grow flex flex-col bg-background-light rounded-lg shadow-sm border border- transition-all duration-300",r?"w-2/3":"flex-grow"),children:n}),t.jsxs("div",{className:A("bg-background-light py-2 px-1 space-y-6 rounded-lg shadow-sm border border- transition-all duration-300 flex flex-col",r?"w-1/3":"w-16"),children:[t.jsxs("div",{className:"flex items-center p-1",children:[t.jsx(Z,{variant:"ghost",className:"p-2",onClick:d,children:r?t.jsx(dt,{className:"h-6 w-6"}):t.jsx(ct,{className:"h-6 w-6"})}),r&&t.jsx("h4",{className:"font-semibold mb-0 text-xl flex-grow",children:"Chart Preview"})]}),l&&r&&t.jsx("div",{className:A("flex-grow flex w-full items-center relative"),children:o||t.jsxs("div",{className:" absolute w-full top-1/2 -translate-y-1/2 flex flex-col items-center justify-center gap-5",children:[t.jsx(Ms,{className:"text-primary/50 h-20 w-20"}),t.jsx("p",{className:"text-accent-foreground text-center",children:"Select traces on the left to preview chart"})]})})]})]})})},Vn=a.memo(On),Fn=e=>{const{tabValue:s,onChartSelect:n,selectedChartType:o}=e;return t.jsxs(Rt,{value:s,className:"flex-grow flex flex-col p-6 overflow-y-auto",children:[t.jsx("h2",{className:"text-3xl font-medium text-foreground my-8 text-center tracking-normal",children:"Select Chart Type"}),t.jsx("div",{className:"flex-grow w-full grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 pt-20",children:_n.map(r=>t.jsxs(Z,{variant:"outline",className:A("h-52 flex flex-col items-center justify-center gap-4 bg-gradient-to-br transition-all duration-300 shadow-sm hover:shadow-md","from-white to-primary/10 hover:from-white hover:to-primary/30","dark:from-secondary dark:to-primary/30 dark:hover:to-primary/80",o===r.key&&"from-primary-light to-primary/50 dark:from-primary/40 dark:to-primary/80 shadow-md"),onClick:()=>n(r.key),children:[t.jsx(r.icon,{className:"!h-16 !w-16 mb-2 text-primary"}),t.jsx("span",{className:"font-medium text-2xl text-foreground",children:r.label})]},r.label))})]})},$n=a.memo(Fn);function At(e){const s=a.useRef({value:e,previous:e});return a.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}var Bn=[" ","Enter","ArrowUp","ArrowDown"],Hn=[" ","Enter"],xe="Select",[Re,Ae,zn]=Ds(xe),[de,Fo]=Xe(xe,[zn,ut]),Pe=ut(),[Gn,ee]=de(xe),[Un,Kn]=de(xe),Pt=e=>{const{__scopeSelect:s,children:n,open:o,defaultOpen:r,onOpenChange:i,value:l,defaultValue:c,onValueChange:d,dir:u,name:h,autoComplete:p,disabled:f,required:b,form:C}=e,m=Pe(s),[x,v]=a.useState(null),[g,S]=a.useState(null),[N,R]=a.useState(!1),M=lt(u),[P=!1,G]=Ie({prop:o,defaultProp:r,onChange:i}),[_,w]=Ie({prop:l,defaultProp:c,onChange:d}),y=a.useRef(null),T=x?C||!!x.closest("form"):!0,[E,L]=a.useState(new Set),U=Array.from(E).map($=>$.props.value).join(";");return t.jsx(ks,{...m,children:t.jsxs(Gn,{required:b,scope:s,trigger:x,onTriggerChange:v,valueNode:g,onValueNodeChange:S,valueNodeHasChildren:N,onValueNodeHasChildrenChange:R,contentId:Ee(),value:_,onValueChange:w,open:P,onOpenChange:G,dir:M,triggerPointerDownPosRef:y,disabled:f,children:[t.jsx(Re.Provider,{scope:s,children:t.jsx(Un,{scope:e.__scopeSelect,onNativeOptionAdd:a.useCallback($=>{L(H=>new Set(H).add($))},[]),onNativeOptionRemove:a.useCallback($=>{L(H=>{const z=new Set(H);return z.delete($),z})},[]),children:n})}),T?t.jsxs(es,{"aria-hidden":!0,required:b,tabIndex:-1,name:h,autoComplete:p,value:_,onChange:$=>w($.target.value),disabled:f,form:C,children:[_===void 0?t.jsx("option",{value:""}):null,Array.from(E)]},U):null]})})};Pt.displayName=xe;var _t="SelectTrigger",Mt=a.forwardRef((e,s)=>{const{__scopeSelect:n,disabled:o=!1,...r}=e,i=Pe(n),l=ee(_t,n),c=l.disabled||o,d=X(s,l.onTriggerChange),u=Ae(n),h=a.useRef("touch"),[p,f,b]=ts(m=>{const x=u().filter(S=>!S.disabled),v=x.find(S=>S.value===l.value),g=ss(x,m,v);g!==void 0&&l.onValueChange(g.value)}),C=m=>{c||(l.onOpenChange(!0),b()),m&&(l.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return t.jsx(Ls,{asChild:!0,...i,children:t.jsx(B.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Qt(l.value)?"":void 0,...r,ref:d,onClick:F(r.onClick,m=>{m.currentTarget.focus(),h.current!=="mouse"&&C(m)}),onPointerDown:F(r.onPointerDown,m=>{h.current=m.pointerType;const x=m.target;x.hasPointerCapture(m.pointerId)&&x.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(C(m),m.preventDefault())}),onKeyDown:F(r.onKeyDown,m=>{const x=p.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(x&&m.key===" ")&&Bn.includes(m.key)&&(C(),m.preventDefault())})})})});Mt.displayName=_t;var kt="SelectValue",Dt=a.forwardRef((e,s)=>{const{__scopeSelect:n,className:o,style:r,children:i,placeholder:l="",...c}=e,d=ee(kt,n),{onValueNodeHasChildrenChange:u}=d,h=i!==void 0,p=X(s,d.onValueNodeChange);return Q(()=>{u(h)},[u,h]),t.jsx(B.span,{...c,ref:p,style:{pointerEvents:"none"},children:Qt(d.value)?t.jsx(t.Fragment,{children:l}):i})});Dt.displayName=kt;var Wn="SelectIcon",Lt=a.forwardRef((e,s)=>{const{__scopeSelect:n,children:o,...r}=e;return t.jsx(B.span,{"aria-hidden":!0,...r,ref:s,children:o||"â–¼"})});Lt.displayName=Wn;var Yn="SelectPortal",Ot=e=>t.jsx(Os,{asChild:!0,...e});Ot.displayName=Yn;var ae="SelectContent",Vt=a.forwardRef((e,s)=>{const n=ee(ae,e.__scopeSelect),[o,r]=a.useState();if(Q(()=>{r(new DocumentFragment)},[]),!n.open){const i=o;return i?ft.createPortal(t.jsx(Ft,{scope:e.__scopeSelect,children:t.jsx(Re.Slot,{scope:e.__scopeSelect,children:t.jsx("div",{children:e.children})})}),i):null}return t.jsx($t,{...e,ref:s})});Vt.displayName=ae;var q=10,[Ft,te]=de(ae),qn="SelectContentImpl",$t=a.forwardRef((e,s)=>{const{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:l,side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:p,collisionBoundary:f,collisionPadding:b,sticky:C,hideWhenDetached:m,avoidCollisions:x,...v}=e,g=ee(ae,n),[S,N]=a.useState(null),[R,M]=a.useState(null),P=X(s,I=>N(I)),[G,_]=a.useState(null),[w,y]=a.useState(null),T=Ae(n),[E,L]=a.useState(!1),U=a.useRef(!1);a.useEffect(()=>{if(S)return $s(S)},[S]),Bs();const $=a.useCallback(I=>{const[V,...K]=T().map(D=>D.ref.current),[O]=K.slice(-1),k=document.activeElement;for(const D of I)if(D===k||(D==null||D.scrollIntoView({block:"nearest"}),D===V&&R&&(R.scrollTop=0),D===O&&R&&(R.scrollTop=R.scrollHeight),D==null||D.focus(),document.activeElement!==k))return},[T,R]),H=a.useCallback(()=>$([G,S]),[$,G,S]);a.useEffect(()=>{E&&H()},[E,H]);const{onOpenChange:z,triggerPointerDownPosRef:W}=g;a.useEffect(()=>{if(S){let I={x:0,y:0};const V=O=>{var k,D;I={x:Math.abs(Math.round(O.pageX)-(((k=W.current)==null?void 0:k.x)??0)),y:Math.abs(Math.round(O.pageY)-(((D=W.current)==null?void 0:D.y)??0))}},K=O=>{I.x<=10&&I.y<=10?O.preventDefault():S.contains(O.target)||z(!1),document.removeEventListener("pointermove",V),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",V),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",K,{capture:!0})}}},[S,z,W]),a.useEffect(()=>{const I=()=>z(!1);return window.addEventListener("blur",I),window.addEventListener("resize",I),()=>{window.removeEventListener("blur",I),window.removeEventListener("resize",I)}},[z]);const[ke,ge]=ts(I=>{const V=T().filter(k=>!k.disabled),K=V.find(k=>k.ref.current===document.activeElement),O=ss(V,I,K);O&&setTimeout(()=>O.ref.current.focus())}),De=a.useCallback((I,V,K)=>{const O=!U.current&&!K;(g.value!==void 0&&g.value===V||O)&&(_(I),O&&(U.current=!0))},[g.value]),Le=a.useCallback(()=>S==null?void 0:S.focus(),[S]),ie=a.useCallback((I,V,K)=>{const O=!U.current&&!K;(g.value!==void 0&&g.value===V||O)&&y(I)},[g.value]),ve=o==="popper"?$e:Bt,fe=ve===$e?{side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:p,collisionBoundary:f,collisionPadding:b,sticky:C,hideWhenDetached:m,avoidCollisions:x}:{};return t.jsx(Ft,{scope:n,content:S,viewport:R,onViewportChange:M,itemRefCallback:De,selectedItem:G,onItemLeave:Le,itemTextRefCallback:ie,focusSelectedItem:H,selectedItemText:w,position:o,isPositioned:E,searchRef:ke,children:t.jsx(Hs,{as:zs,allowPinchZoom:!0,children:t.jsx(Gs,{asChild:!0,trapped:g.open,onMountAutoFocus:I=>{I.preventDefault()},onUnmountAutoFocus:F(r,I=>{var V;(V=g.trigger)==null||V.focus({preventScroll:!0}),I.preventDefault()}),children:t.jsx(Us,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:I=>I.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:t.jsx(ve,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:I=>I.preventDefault(),...v,...fe,onPlaced:()=>L(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:F(v.onKeyDown,I=>{const V=I.ctrlKey||I.altKey||I.metaKey;if(I.key==="Tab"&&I.preventDefault(),!V&&I.key.length===1&&ge(I.key),["ArrowUp","ArrowDown","Home","End"].includes(I.key)){let O=T().filter(k=>!k.disabled).map(k=>k.ref.current);if(["ArrowUp","End"].includes(I.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(I.key)){const k=I.target,D=O.indexOf(k);O=O.slice(D+1)}setTimeout(()=>$(O)),I.preventDefault()}})})})})})})});$t.displayName=qn;var Xn="SelectItemAlignedPosition",Bt=a.forwardRef((e,s)=>{const{__scopeSelect:n,onPlaced:o,...r}=e,i=ee(ae,n),l=te(ae,n),[c,d]=a.useState(null),[u,h]=a.useState(null),p=X(s,P=>h(P)),f=Ae(n),b=a.useRef(!1),C=a.useRef(!0),{viewport:m,selectedItem:x,selectedItemText:v,focusSelectedItem:g}=l,S=a.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&u&&m&&x&&v){const P=i.trigger.getBoundingClientRect(),G=u.getBoundingClientRect(),_=i.valueNode.getBoundingClientRect(),w=v.getBoundingClientRect();if(i.dir!=="rtl"){const k=w.left-G.left,D=_.left-k,se=P.left-D,ne=P.width+se,Oe=Math.max(ne,G.width),Ve=window.innerWidth-q,Fe=nt(D,[q,Math.max(q,Ve-Oe)]);c.style.minWidth=ne+"px",c.style.left=Fe+"px"}else{const k=G.right-w.right,D=window.innerWidth-_.right-k,se=window.innerWidth-P.right-D,ne=P.width+se,Oe=Math.max(ne,G.width),Ve=window.innerWidth-q,Fe=nt(D,[q,Math.max(q,Ve-Oe)]);c.style.minWidth=ne+"px",c.style.right=Fe+"px"}const y=f(),T=window.innerHeight-q*2,E=m.scrollHeight,L=window.getComputedStyle(u),U=parseInt(L.borderTopWidth,10),$=parseInt(L.paddingTop,10),H=parseInt(L.borderBottomWidth,10),z=parseInt(L.paddingBottom,10),W=U+$+E+z+H,ke=Math.min(x.offsetHeight*5,W),ge=window.getComputedStyle(m),De=parseInt(ge.paddingTop,10),Le=parseInt(ge.paddingBottom,10),ie=P.top+P.height/2-q,ve=T-ie,fe=x.offsetHeight/2,I=x.offsetTop+fe,V=U+$+I,K=W-V;if(V<=ie){const k=y.length>0&&x===y[y.length-1].ref.current;c.style.bottom="0px";const D=u.clientHeight-m.offsetTop-m.offsetHeight,se=Math.max(ve,fe+(k?Le:0)+D+H),ne=V+se;c.style.height=ne+"px"}else{const k=y.length>0&&x===y[0].ref.current;c.style.top="0px";const se=Math.max(ie,U+m.offsetTop+(k?De:0)+fe)+K;c.style.height=se+"px",m.scrollTop=V-ie+m.offsetTop}c.style.margin=`${q}px 0`,c.style.minHeight=ke+"px",c.style.maxHeight=T+"px",o==null||o(),requestAnimationFrame(()=>b.current=!0)}},[f,i.trigger,i.valueNode,c,u,m,x,v,i.dir,o]);Q(()=>S(),[S]);const[N,R]=a.useState();Q(()=>{u&&R(window.getComputedStyle(u).zIndex)},[u]);const M=a.useCallback(P=>{P&&C.current===!0&&(S(),g==null||g(),C.current=!1)},[S,g]);return t.jsx(Zn,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:b,onScrollButtonChange:M,children:t.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:t.jsx(B.div,{...r,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});Bt.displayName=Xn;var Jn="SelectPopperPosition",$e=a.forwardRef((e,s)=>{const{__scopeSelect:n,align:o="start",collisionPadding:r=q,...i}=e,l=Pe(n);return t.jsx(Ks,{...l,...i,ref:s,align:o,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$e.displayName=Jn;var[Zn,Qe]=de(ae,{}),Be="SelectViewport",Ht=a.forwardRef((e,s)=>{const{__scopeSelect:n,nonce:o,...r}=e,i=te(Be,n),l=Qe(Be,n),c=X(s,i.onViewportChange),d=a.useRef(0);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),t.jsx(Re.Slot,{scope:n,children:t.jsx(B.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:F(r.onScroll,u=>{const h=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:f}=l;if(f!=null&&f.current&&p){const b=Math.abs(d.current-h.scrollTop);if(b>0){const C=window.innerHeight-q*2,m=parseFloat(p.style.minHeight),x=parseFloat(p.style.height),v=Math.max(m,x);if(v<C){const g=v+b,S=Math.min(C,g),N=g-S;p.style.height=S+"px",p.style.bottom==="0px"&&(h.scrollTop=N>0?N:0,p.style.justifyContent="flex-end")}}}d.current=h.scrollTop})})})]})});Ht.displayName=Be;var zt="SelectGroup",[Qn,er]=de(zt),tr=a.forwardRef((e,s)=>{const{__scopeSelect:n,...o}=e,r=Ee();return t.jsx(Qn,{scope:n,id:r,children:t.jsx(B.div,{role:"group","aria-labelledby":r,...o,ref:s})})});tr.displayName=zt;var Gt="SelectLabel",sr=a.forwardRef((e,s)=>{const{__scopeSelect:n,...o}=e,r=er(Gt,n);return t.jsx(B.div,{id:r.id,...o,ref:s})});sr.displayName=Gt;var je="SelectItem",[nr,Ut]=de(je),Kt=a.forwardRef((e,s)=>{const{__scopeSelect:n,value:o,disabled:r=!1,textValue:i,...l}=e,c=ee(je,n),d=te(je,n),u=c.value===o,[h,p]=a.useState(i??""),[f,b]=a.useState(!1),C=X(s,g=>{var S;return(S=d.itemRefCallback)==null?void 0:S.call(d,g,o,r)}),m=Ee(),x=a.useRef("touch"),v=()=>{r||(c.onValueChange(o),c.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return t.jsx(nr,{scope:n,value:o,disabled:r,textId:m,isSelected:u,onItemTextChange:a.useCallback(g=>{p(S=>S||((g==null?void 0:g.textContent)??"").trim())},[]),children:t.jsx(Re.ItemSlot,{scope:n,value:o,disabled:r,textValue:h,children:t.jsx(B.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...l,ref:C,onFocus:F(l.onFocus,()=>b(!0)),onBlur:F(l.onBlur,()=>b(!1)),onClick:F(l.onClick,()=>{x.current!=="mouse"&&v()}),onPointerUp:F(l.onPointerUp,()=>{x.current==="mouse"&&v()}),onPointerDown:F(l.onPointerDown,g=>{x.current=g.pointerType}),onPointerMove:F(l.onPointerMove,g=>{var S;x.current=g.pointerType,r?(S=d.onItemLeave)==null||S.call(d):x.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:F(l.onPointerLeave,g=>{var S;g.currentTarget===document.activeElement&&((S=d.onItemLeave)==null||S.call(d))}),onKeyDown:F(l.onKeyDown,g=>{var N;((N=d.searchRef)==null?void 0:N.current)!==""&&g.key===" "||(Hn.includes(g.key)&&v(),g.key===" "&&g.preventDefault())})})})})});Kt.displayName=je;var pe="SelectItemText",Wt=a.forwardRef((e,s)=>{const{__scopeSelect:n,className:o,style:r,...i}=e,l=ee(pe,n),c=te(pe,n),d=Ut(pe,n),u=Kn(pe,n),[h,p]=a.useState(null),f=X(s,v=>p(v),d.onItemTextChange,v=>{var g;return(g=c.itemTextRefCallback)==null?void 0:g.call(c,v,d.value,d.disabled)}),b=h==null?void 0:h.textContent,C=a.useMemo(()=>t.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:m,onNativeOptionRemove:x}=u;return Q(()=>(m(C),()=>x(C)),[m,x,C]),t.jsxs(t.Fragment,{children:[t.jsx(B.span,{id:d.textId,...i,ref:f}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?ft.createPortal(i.children,l.valueNode):null]})});Wt.displayName=pe;var Yt="SelectItemIndicator",qt=a.forwardRef((e,s)=>{const{__scopeSelect:n,...o}=e;return Ut(Yt,n).isSelected?t.jsx(B.span,{"aria-hidden":!0,...o,ref:s}):null});qt.displayName=Yt;var He="SelectScrollUpButton",Xt=a.forwardRef((e,s)=>{const n=te(He,e.__scopeSelect),o=Qe(He,e.__scopeSelect),[r,i]=a.useState(!1),l=X(s,o.onScrollButtonChange);return Q(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollTop>0;i(u)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),r?t.jsx(Zt,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});Xt.displayName=He;var ze="SelectScrollDownButton",Jt=a.forwardRef((e,s)=>{const n=te(ze,e.__scopeSelect),o=Qe(ze,e.__scopeSelect),[r,i]=a.useState(!1),l=X(s,o.onScrollButtonChange);return Q(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollHeight-d.clientHeight,h=Math.ceil(d.scrollTop)<u;i(h)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),r?t.jsx(Zt,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});Jt.displayName=ze;var Zt=a.forwardRef((e,s)=>{const{__scopeSelect:n,onAutoScroll:o,...r}=e,i=te("SelectScrollButton",n),l=a.useRef(null),c=Ae(n),d=a.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return a.useEffect(()=>()=>d(),[d]),Q(()=>{var h;const u=c().find(p=>p.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[c]),t.jsx(B.div,{"aria-hidden":!0,...r,ref:s,style:{flexShrink:0,...r.style},onPointerDown:F(r.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(o,50))}),onPointerMove:F(r.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),l.current===null&&(l.current=window.setInterval(o,50))}),onPointerLeave:F(r.onPointerLeave,()=>{d()})})}),rr="SelectSeparator",or=a.forwardRef((e,s)=>{const{__scopeSelect:n,...o}=e;return t.jsx(B.div,{"aria-hidden":!0,...o,ref:s})});or.displayName=rr;var Ge="SelectArrow",ar=a.forwardRef((e,s)=>{const{__scopeSelect:n,...o}=e,r=Pe(n),i=ee(Ge,n),l=te(Ge,n);return i.open&&l.position==="popper"?t.jsx(Ws,{...r,...o,ref:s}):null});ar.displayName=Ge;function Qt(e){return e===""||e===void 0}var es=a.forwardRef((e,s)=>{const{value:n,...o}=e,r=a.useRef(null),i=X(s,r),l=At(n);return a.useEffect(()=>{const c=r.current,d=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==n&&h){const p=new Event("change",{bubbles:!0});h.call(c,n),c.dispatchEvent(p)}},[l,n]),t.jsx(Vs,{asChild:!0,children:t.jsx("select",{...o,ref:i,defaultValue:n})})});es.displayName="BubbleSelect";function ts(e){const s=Fs(e),n=a.useRef(""),o=a.useRef(0),r=a.useCallback(l=>{const c=n.current+l;s(c),function d(u){n.current=u,window.clearTimeout(o.current),u!==""&&(o.current=window.setTimeout(()=>d(""),1e3))}(c)},[s]),i=a.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,r,i]}function ss(e,s,n){const r=s.length>1&&Array.from(s).every(u=>u===s[0])?s[0]:s,i=n?e.indexOf(n):-1;let l=lr(e,Math.max(i,0));r.length===1&&(l=l.filter(u=>u!==n));const d=l.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==n?d:void 0}function lr(e,s){return e.map((n,o)=>e[(s+o)%e.length])}var ir=Pt,cr=Mt,dr=Dt,ur=Lt,fr=Ot,mr=Vt,pr=Ht,hr=Kt,xr=Wt,gr=qt,vr=Xt,br=Jt;function ns({...e}){return t.jsx(ir,{"data-slot":"select",...e})}function rs({...e}){return t.jsx(dr,{"data-slot":"select-value",...e})}function os({className:e,children:s,...n}){return t.jsxs(cr,{"data-slot":"select-trigger",className:A("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-full items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 cursor-pointer",e),...n,children:[s,t.jsx(ur,{asChild:!0,children:t.jsx(pt,{className:"size-4 opacity-50"})})]})}function as({className:e,children:s,position:n="popper",...o}){return t.jsx(fr,{children:t.jsxs(mr,{"data-slot":"select-content",className:A("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...o,children:[t.jsx(Sr,{}),t.jsx(pr,{className:A("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),t.jsx(wr,{})]})})}function Ne({className:e,children:s,...n}){return t.jsxs(hr,{"data-slot":"select-item",className:A("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2 cursor-pointer",e),...n,children:[t.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:t.jsx(gr,{children:t.jsx(ht,{className:"size-4"})})}),t.jsx(xr,{children:s})]})}function Sr({className:e,...s}){return t.jsx(vr,{"data-slot":"select-scroll-up-button",className:A("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(yn,{className:"size-4"})})}function wr({className:e,...s}){return t.jsx(br,{"data-slot":"select-scroll-down-button",className:A("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(pt,{className:"size-4"})})}function Ue(e,s){const n=a.useRef(void 0);return a.useCallback((...o)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{e(...o)},s)},[e,s])}const Cr=e=>{const{activeAxis:s,axisOptions:n,selectedTraceIndex:o,onTraceEdit:r,onAxisOptionClick:i,traces:l,uploadedFiles:c,onTraceDelete:d,onTraceSettingsItemEdit:u}=e,h=Ue(u,1e3),p=a.useMemo(()=>l.length?l.map((f,b)=>{var C,m,x,v,g,S,N,R;return t.jsxs("div",{className:A("flex flex-col bg-background-light p-3 rounded-lg border",b===o?"border-primary":""),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"color",className:"w-4 h-4 aspect-square flex-shrink-0 rounded-full cursor-pointer",defaultValue:f.settings.color,onChange:M=>h("color",M.target.value,b)}),t.jsx(oe,{defaultValue:f.settings.name,onChange:M=>h("name",M.target.value,b),className:"font-medium bg-transparent border-none p-0 focus:ring-0"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{if(b===o)return r(null);r(b)},children:b===o?t.jsx(ht,{className:"h-4 w-4"}):t.jsx(Ys,{className:"h-4 w-4"})}),t.jsx(Z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{console.log("traceIndex",b),d(b)},children:t.jsx(qs,{className:"h-4 w-4"})})]})]}),(f==null?void 0:f.x)&&t.jsxs("div",{className:"text-sm text-accent-foreground",children:[t.jsx("span",{className:"font-semibold",children:"X: "}),t.jsxs("span",{className:"text-primary",children:[((x=(m=c[((C=f==null?void 0:f.x)==null?void 0:C.fileId)??""])==null?void 0:m.name)==null?void 0:x.slice(0,20))+"..."," :"," "]}),t.jsx("span",{style:{color:f.settings.color},children:(v=f==null?void 0:f.x)==null?void 0:v.column})]}),(f==null?void 0:f.y)&&t.jsxs("div",{className:"text-sm text-accent-foreground",children:[t.jsx("span",{className:"font-semibold",children:"Y: "}),t.jsxs("span",{className:"text-primary",children:[((N=(S=c[((g=f==null?void 0:f.y)==null?void 0:g.fileId)??""])==null?void 0:S.name)==null?void 0:N.slice(0,20))+"..."," :"," "]}),t.jsx("span",{style:{color:f.settings.color},children:(R=f==null?void 0:f.y)==null?void 0:R.column})]})]},b)}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-lg font-semibold mb-0",children:"Traces"}),t.jsx("p",{className:"text-sm text-accent-foreground",children:"Your selections will appear here"})]}),[d,r,h,o,l,c]);return t.jsxs("div",{className:"h-[135px] flex bg-background-light border-b-2 rounded-lg rounded-b-none",children:[t.jsx("div",{className:A("w-3/4 p-2 h-auto overflow-y-auto",l.length&&"grid grid-cols-1 gap-2 md:grid-cols-2"),children:p}),t.jsxs("div",{className:"w-1/4 border-l flex flex-col justify-between gap-5 p-2",children:[t.jsx(It,{value:s,onValueChange:f=>i(f),className:"w-full",children:t.jsx(jt,{className:"w-full flex",children:n.map(f=>t.jsxs(Et,{value:f,className:"capitalize w-full",children:[f,"-axis"]},f))})}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"algorithm-select",className:"block text-sm font-medium text-foreground mb-1",children:"Auto Selection Algorithm"}),t.jsxs(ns,{value:"",children:[t.jsx(os,{id:"algorithm-select",className:"w-full",children:t.jsx(rs,{placeholder:"Select algorithm"})}),t.jsxs(as,{children:[t.jsx(Ne,{value:"linear",children:"Linear"}),t.jsx(Ne,{value:"logarithmic",children:"Logarithmic"}),t.jsx(Ne,{value:"exponential",children:"Exponential"})]})]})]})]})]})},yr=a.memo(Cr),Tr=e=>{const{isFileColumnCollapsed:s,selectedFileId:n,setSelectedFileId:o,setIsFileColumnCollapsed:r,uploadedFiles:i,dataGridProps:l}=e,{theme:c}=Xs(),d=a.useMemo(()=>Object.entries(i).map(([u,h])=>t.jsx("li",{children:t.jsx(Z,{variant:n===u?"default":"outline",className:A("h-auto w-full overflow-hidden transition-all duration-300 shadow-sm hover:shadow-sm"),onClick:()=>o(u),children:t.jsx("span",{className:"w-full text-ellipsis overflow-hidden font-medium ",children:h==null?void 0:h.name})})},u)),[n,o,i]);return t.jsxs("div",{className:"flex-grow flex",children:[t.jsxs("div",{className:`relative py-3 px-2 flex flex-col gap-4 bg-background-light transition-all duration-300 border-r rounded-bl-lg ${s?"w-12":"w-48"}`,children:[t.jsx(Z,{variant:"ghost",className:"p-2 absolute right-1 top-1",onClick:()=>r(!s),children:s?t.jsx(dt,{className:"h-6 w-6"}):t.jsx(ct,{className:"h-6 w-6"})}),!s&&t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"font-semibold mb-0 text-sm",children:"Uploaded files"}),t.jsx("ul",{className:"space-y-2 text-sm text-accent-foreground w-full",children:d})]})]}),t.jsx("div",{className:A("flex-grow bg-background-light overflow-y-auto ag-theme-quartz [&_.ag-root-wrapper]:rounded-none [&_.ag-root-wrapper]:border-none",c==="dark"?"ag-theme-quartz-dark":"ag-theme-quartz"),children:n?t.jsx(fn,{...l}):t.jsx("div",{className:"flex justify-center items-center h-full w-full",children:t.jsx("h3",{className:"text-lg font-semibold mb-1 text-foreground",children:"Select a file to view its data."})})})]})},Nr=a.memo(Tr),Ir=["#ff0000","#0000ff","#ff00ff","#800000","#808000","#008000","#008080","#800080","#808080"],jr=[["bg-[#ff0000]","bg-[#ff0000]/5","bg-[#ff0000]/10","bg-[#ff0000]/20","bg-[#ff0000]/30","bg-[#ff0000]/40","bg-[#ff0000]/50","bg-[#ff0000]/60","bg-[#ff0000]/70","bg-[#ff0000]/80","bg-[#ff0000]/90"],["bg-[#0000ff]","bg-[#0000ff]/5","bg-[#0000ff]/10","bg-[#0000ff]/20","bg-[#0000ff]/30","bg-[#0000ff]/40","bg-[#0000ff]/50","bg-[#0000ff]/60","bg-[#0000ff]/70","bg-[#0000ff]/80","bg-[#0000ff]/90"],["bg-[#ff00ff]","bg-[#ff00ff]/5","bg-[#ff00ff]/10","bg-[#ff00ff]/20","bg-[#ff00ff]/30","bg-[#ff00ff]/40","bg-[#ff00ff]/50","bg-[#ff00ff]/60","bg-[#ff00ff]/70","bg-[#ff00ff]/80","bg-[#ff00ff]/90"],["bg-[#800000]","bg-[#800000]/5","bg-[#800000]/10","bg-[#800000]/20","bg-[#800000]/30","bg-[#800000]/40","bg-[#800000]/50","bg-[#800000]/60","bg-[#800000]/70","bg-[#800000]/80","bg-[#800000]/90"],["bg-[#808000]","bg-[#808000]/5","bg-[#808000]/10","bg-[#808000]/20","bg-[#808000]/30","bg-[#808000]/40","bg-[#808000]/50","bg-[#808000]/60","bg-[#808000]/70","bg-[#808000]/80","bg-[#808000]/90"],["bg-[#008000]","bg-[#008000]/5","bg-[#008000]/10","bg-[#008000]/20","bg-[#008000]/30","bg-[#008000]/40","bg-[#008000]/50","bg-[#008000]/60","bg-[#008000]/70","bg-[#008000]/80","bg-[#008000]/90"],["bg-[#008080]","bg-[#008080]/5","bg-[#008080]/10","bg-[#008080]/20","bg-[#008080]/30","bg-[#008080]/40","bg-[#008080]/50","bg-[#008080]/60","bg-[#008080]/70","bg-[#008080]/80","bg-[#008080]/90"],["bg-[#800080]","bg-[#800080]/5","bg-[#800080]/10","bg-[#800080]/20","bg-[#800080]/30","bg-[#800080]/40","bg-[#800080]/50","bg-[#800080]/60","bg-[#800080]/70","bg-[#800080]/80","bg-[#800080]/90"],["bg-[#808080]","bg-[#808080]/5","bg-[#808080]/10","bg-[#808080]/20","bg-[#808080]/30","bg-[#808080]/40","bg-[#808080]/50","bg-[#808080]/60","bg-[#808080]/70","bg-[#808080]/80","bg-[#808080]/90"]];function rt(e,s){const n=jr.find(r=>r[0].includes(e));if(!n)return null;const o=Math.min(Math.floor(s/10),10);return n[o]}function Er(e){const{chartType:s,allTraces:n,completeTraces:o,addOrUpdateTrace:r}=e,i=Te(_=>_.files),l=a.useMemo(()=>{const{xRequired:_,yRequired:w}=mt[s],y=[];return _&&y.push("x"),w&&y.push("y"),y},[s]),[c,d]=a.useState(""),[u,h]=a.useState(l[0]),[p,f]=a.useState(null),[b,C]=a.useState(null),m=o.length,x=p===null?m:p,v=a.useMemo(()=>{var _;return((_=i[c])==null?void 0:_.data)??[]},[c,i]),g=a.useMemo(()=>v.reduce((w,y)=>(Object.keys(y).forEach(T=>{w.includes(T)||w.push(T)}),w),[]).map(w=>({field:w,cellClass:()=>{if(w===b)return"cursor-pointer bg-primary/10";const y=n.find(T=>{var E,L;return((E=T.x)==null?void 0:E.fileId)===c&&T.x.column===w||((L=T.y)==null?void 0:L.fileId)===c&&T.y.column===w});return y?`cursor-pointer ${rt(y.settings.color,20)}`:"cursor-pointer"},headerClass:()=>{if(w===b)return"bg-primary/10 hover:!bg-primary/10 cursor-pointer";const y=n.find(T=>{var E,L;return((E=T.x)==null?void 0:E.fileId)===c&&T.x.column===w||((L=T.y)==null?void 0:L.fileId)===c&&T.y.column===w});return y?`cursor-pointer hover:!bg-primary ${rt(y.settings.color,20)}`:"cursor-pointer"}})),[n,v,b,c]),S=a.useMemo(()=>({editable:!1,filter:!1,resizable:!0}),[]),N=a.useCallback(_=>{r({[u]:{fileId:c,column:_.colDef.field}},x)},[r,u,c,x]),R=a.useCallback(_=>{C(_.colDef.field||null)},[]),M=a.useCallback(()=>{C(null)},[]),P=a.useCallback(_=>{C(_.column.getId()||null)},[]),G=a.useCallback(()=>{C(null)},[]);return{dataGridProps:{rowData:v,columnDefs:g,defaultColDef:S,suppressRowClickSelection:!0,suppressCellFocus:!0,suppressRowHoverHighlight:!0,suppressHeaderFocus:!0,onCellClicked:N,onCellMouseOver:R,onCellMouseOut:M,onColumnHeaderMouseOver:P,onColumnHeaderMouseLeave:G},defaultTraceIndex:m,selectedTraceIndex:p,setSelectedTraceIndex:f,uploadedFiles:i,selectedFileId:c,axisOptions:l,activeAxis:u,setActiveAxis:h,setSelectedFileId:d}}function Rr(){const[e,s]=a.useState(!1),[n,o]=a.useState(!1);return{isFileColumnCollapsed:e,setIsFileColumnCollapsed:s,isChartColumnCollapsed:n,setIsChartColumnCollapsed:o}}const Ar=e=>{const{addOrUpdateTrace:s,chartType:n,allTraces:o,completeTraces:r,deleteTrace:i,editTraceSettingsItem:l}=e,{uploadedFiles:c,selectedFileId:d,activeAxis:u,axisOptions:h,selectedTraceIndex:p,setSelectedTraceIndex:f,setActiveAxis:b,setSelectedFileId:C,dataGridProps:m}=Er({chartType:n,allTraces:o,completeTraces:r,addOrUpdateTrace:s}),{isFileColumnCollapsed:x,setIsFileColumnCollapsed:v}=Rr();return t.jsxs(t.Fragment,{children:[t.jsx(yr,{activeAxis:u,axisOptions:h,onAxisOptionClick:b,traces:r,uploadedFiles:c,selectedTraceIndex:p,onTraceEdit:f,onTraceDelete:i,onTraceSettingsItemEdit:l}),t.jsx(Nr,{dataGridProps:m,isFileColumnCollapsed:x,setIsFileColumnCollapsed:v,uploadedFiles:c,selectedFileId:d,setSelectedFileId:C})]})},Pr=a.memo(Ar);var _r="Label",ls=a.forwardRef((e,s)=>t.jsx(B.label,{...e,ref:s,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));ls.displayName=_r;var Mr=ls;function J({className:e,...s}){return t.jsx(Mr,{"data-slot":"label",className:A("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}function is(e,[s,n]){return Math.min(n,Math.max(s,e))}function ce(e,s,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return s==null?void 0:s(r)}}function ot(e,s){if(typeof e=="function")return e(s);e!=null&&(e.current=s)}function cs(...e){return s=>{let n=!1;const o=e.map(r=>{const i=ot(r,s);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<o.length;r++){const i=o[r];typeof i=="function"?i():ot(e[r],null)}}}}function le(...e){return a.useCallback(cs(...e),e)}function ds(e,s=[]){let n=[];function o(i,l){const c=a.createContext(l),d=n.length;n=[...n,l];const u=p=>{var v;const{scope:f,children:b,...C}=p,m=((v=f==null?void 0:f[e])==null?void 0:v[d])||c,x=a.useMemo(()=>C,Object.values(C));return t.jsx(m.Provider,{value:x,children:b})};u.displayName=i+"Provider";function h(p,f){var m;const b=((m=f==null?void 0:f[e])==null?void 0:m[d])||c,C=a.useContext(b);if(C)return C;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[u,h]}const r=()=>{const i=n.map(l=>a.createContext(l));return function(c){const d=(c==null?void 0:c[e])||i;return a.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return r.scopeName=e,[o,kr(r,...s)]}function kr(...e){const s=e[0];if(e.length===1)return s;const n=()=>{const o=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const l=o.reduce((c,{useScope:d,scopeName:u})=>{const p=d(i)[`__scope${u}`];return{...c,...p}},{});return a.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return n.scopeName=s.scopeName,n}function us(e){const s=a.useRef(e);return a.useEffect(()=>{s.current=e}),a.useMemo(()=>(...n)=>{var o;return(o=s.current)==null?void 0:o.call(s,...n)},[])}function Dr({prop:e,defaultProp:s,onChange:n=()=>{}}){const[o,r]=Lr({defaultProp:s,onChange:n}),i=e!==void 0,l=i?e:o,c=us(n),d=a.useCallback(u=>{if(i){const p=typeof u=="function"?u(e):u;p!==e&&c(p)}else r(u)},[i,e,r,c]);return[l,d]}function Lr({defaultProp:e,onChange:s}){const n=a.useState(e),[o]=n,r=a.useRef(o),i=us(s);return a.useEffect(()=>{r.current!==o&&(i(o),r.current=o)},[o,r,i]),n}var Or=a.createContext(void 0);function Vr(e){const s=a.useContext(Or);return e||s||"ltr"}function Fr(e){const s=a.useRef({value:e,previous:e});return a.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}var $r=globalThis!=null&&globalThis.document?a.useLayoutEffect:()=>{};function Br(e){const[s,n]=a.useState(void 0);return $r(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let l,c;if("borderBoxSize"in i){const d=i.borderBoxSize,u=Array.isArray(d)?d[0]:d;l=u.inlineSize,c=u.blockSize}else l=e.offsetWidth,c=e.offsetHeight;n({width:l,height:c})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else n(void 0)},[e]),s}function Ke(e){const s=Hr(e),n=a.forwardRef((o,r)=>{const{children:i,...l}=o,c=a.Children.toArray(i),d=c.find(Gr);if(d){const u=d.props.children,h=c.map(p=>p===d?a.Children.count(u)>1?a.Children.only(null):a.isValidElement(u)?u.props.children:null:p);return t.jsx(s,{...l,ref:r,children:a.isValidElement(u)?a.cloneElement(u,void 0,h):null})}return t.jsx(s,{...l,ref:r,children:i})});return n.displayName=`${e}.Slot`,n}function Hr(e){const s=a.forwardRef((n,o)=>{const{children:r,...i}=n;if(a.isValidElement(r)){const l=Kr(r),c=Ur(i,r.props);return r.type!==a.Fragment&&(c.ref=o?cs(o,l):l),a.cloneElement(r,c)}return a.Children.count(r)>1?a.Children.only(null):null});return s.displayName=`${e}.SlotClone`,s}var zr=Symbol("radix.slottable");function Gr(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===zr}function Ur(e,s){const n={...s};for(const o in s){const r=e[o],i=s[o];/^on[A-Z]/.test(o)?r&&i?n[o]=(...c)=>{i(...c),r(...c)}:r&&(n[o]=r):o==="style"?n[o]={...r,...i}:o==="className"&&(n[o]=[r,i].filter(Boolean).join(" "))}return{...e,...n}}function Kr(e){var o,r;let s=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?e.ref:(s=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Wr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_e=Wr.reduce((e,s)=>{const n=Ke(`Primitive.${s}`),o=a.forwardRef((r,i)=>{const{asChild:l,...c}=r,d=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(d,{...c,ref:i})});return o.displayName=`Primitive.${s}`,{...e,[s]:o}},{});function Yr(e){const s=e+"CollectionProvider",[n,o]=ds(s),[r,i]=n(s,{collectionRef:{current:null},itemMap:new Map}),l=m=>{const{scope:x,children:v}=m,g=re.useRef(null),S=re.useRef(new Map).current;return t.jsx(r,{scope:x,itemMap:S,collectionRef:g,children:v})};l.displayName=s;const c=e+"CollectionSlot",d=Ke(c),u=re.forwardRef((m,x)=>{const{scope:v,children:g}=m,S=i(c,v),N=le(x,S.collectionRef);return t.jsx(d,{ref:N,children:g})});u.displayName=c;const h=e+"CollectionItemSlot",p="data-radix-collection-item",f=Ke(h),b=re.forwardRef((m,x)=>{const{scope:v,children:g,...S}=m,N=re.useRef(null),R=le(x,N),M=i(h,v);return re.useEffect(()=>(M.itemMap.set(N,{ref:N,...S}),()=>void M.itemMap.delete(N))),t.jsx(f,{[p]:"",ref:R,children:g})});b.displayName=h;function C(m){const x=i(e+"CollectionConsumer",m);return re.useCallback(()=>{const g=x.collectionRef.current;if(!g)return[];const S=Array.from(g.querySelectorAll(`[${p}]`));return Array.from(x.itemMap.values()).sort((M,P)=>S.indexOf(M.ref.current)-S.indexOf(P.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:l,Slot:u,ItemSlot:b},C,o]}var fs=["PageUp","PageDown"],ms=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ps={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ue="Slider",[We,qr,Xr]=Yr(ue),[hs,$o]=ds(ue,[Xr]),[Jr,Me]=hs(ue),xs=a.forwardRef((e,s)=>{const{name:n,min:o=0,max:r=100,step:i=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:u=[o],value:h,onValueChange:p=()=>{},onValueCommit:f=()=>{},inverted:b=!1,form:C,...m}=e,x=a.useRef(new Set),v=a.useRef(0),S=l==="horizontal"?Zr:Qr,[N=[],R]=Dr({prop:h,defaultProp:u,onChange:y=>{var E;(E=[...x.current][v.current])==null||E.focus(),p(y)}}),M=a.useRef(N);function P(y){const T=ro(N,y);w(y,T)}function G(y){w(y,v.current)}function _(){const y=M.current[v.current];N[v.current]!==y&&f(N)}function w(y,T,{commit:E}={commit:!1}){const L=io(i),U=co(Math.round((y-o)/i)*i+o,L),$=is(U,[o,r]);R((H=[])=>{const z=so(H,$,T);if(lo(z,d*i)){v.current=z.indexOf($);const W=String(z)!==String(H);return W&&E&&f(z),W?z:H}else return H})}return t.jsx(Jr,{scope:e.__scopeSlider,name:n,disabled:c,min:o,max:r,valueIndexToChangeRef:v,thumbs:x.current,values:N,orientation:l,form:C,children:t.jsx(We.Provider,{scope:e.__scopeSlider,children:t.jsx(We.Slot,{scope:e.__scopeSlider,children:t.jsx(S,{"aria-disabled":c,"data-disabled":c?"":void 0,...m,ref:s,onPointerDown:ce(m.onPointerDown,()=>{c||(M.current=N)}),min:o,max:r,inverted:b,onSlideStart:c?void 0:P,onSlideMove:c?void 0:G,onSlideEnd:c?void 0:_,onHomeKeyDown:()=>!c&&w(o,0,{commit:!0}),onEndKeyDown:()=>!c&&w(r,N.length-1,{commit:!0}),onStepKeyDown:({event:y,direction:T})=>{if(!c){const U=fs.includes(y.key)||y.shiftKey&&ms.includes(y.key)?10:1,$=v.current,H=N[$],z=i*U*T;w(H+z,$,{commit:!0})}}})})})})});xs.displayName=ue;var[gs,vs]=hs(ue,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Zr=a.forwardRef((e,s)=>{const{min:n,max:o,dir:r,inverted:i,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:u,...h}=e,[p,f]=a.useState(null),b=le(s,S=>f(S)),C=a.useRef(void 0),m=Vr(r),x=m==="ltr",v=x&&!i||!x&&i;function g(S){const N=C.current||p.getBoundingClientRect(),R=[0,N.width],P=et(R,v?[n,o]:[o,n]);return C.current=N,P(S-N.left)}return t.jsx(gs,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:t.jsx(bs,{dir:m,"data-orientation":"horizontal",...h,ref:b,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const N=g(S.clientX);l==null||l(N)},onSlideMove:S=>{const N=g(S.clientX);c==null||c(N)},onSlideEnd:()=>{C.current=void 0,d==null||d()},onStepKeyDown:S=>{const R=ps[v?"from-left":"from-right"].includes(S.key);u==null||u({event:S,direction:R?-1:1})}})})}),Qr=a.forwardRef((e,s)=>{const{min:n,max:o,inverted:r,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,h=a.useRef(null),p=le(s,h),f=a.useRef(void 0),b=!r;function C(m){const x=f.current||h.current.getBoundingClientRect(),v=[0,x.height],S=et(v,b?[o,n]:[n,o]);return f.current=x,S(m-x.top)}return t.jsx(gs,{scope:e.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:t.jsx(bs,{"data-orientation":"vertical",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const x=C(m.clientY);i==null||i(x)},onSlideMove:m=>{const x=C(m.clientY);l==null||l(x)},onSlideEnd:()=>{f.current=void 0,c==null||c()},onStepKeyDown:m=>{const v=ps[b?"from-bottom":"from-top"].includes(m.key);d==null||d({event:m,direction:v?-1:1})}})})}),bs=a.forwardRef((e,s)=>{const{__scopeSlider:n,onSlideStart:o,onSlideMove:r,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:d,...u}=e,h=Me(ue,n);return t.jsx(_e.span,{...u,ref:s,onKeyDown:ce(e.onKeyDown,p=>{p.key==="Home"?(l(p),p.preventDefault()):p.key==="End"?(c(p),p.preventDefault()):fs.concat(ms).includes(p.key)&&(d(p),p.preventDefault())}),onPointerDown:ce(e.onPointerDown,p=>{const f=p.target;f.setPointerCapture(p.pointerId),p.preventDefault(),h.thumbs.has(f)?f.focus():o(p)}),onPointerMove:ce(e.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&r(p)}),onPointerUp:ce(e.onPointerUp,p=>{const f=p.target;f.hasPointerCapture(p.pointerId)&&(f.releasePointerCapture(p.pointerId),i(p))})})}),Ss="SliderTrack",ws=a.forwardRef((e,s)=>{const{__scopeSlider:n,...o}=e,r=Me(Ss,n);return t.jsx(_e.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...o,ref:s})});ws.displayName=Ss;var Ye="SliderRange",Cs=a.forwardRef((e,s)=>{const{__scopeSlider:n,...o}=e,r=Me(Ye,n),i=vs(Ye,n),l=a.useRef(null),c=le(s,l),d=r.values.length,u=r.values.map(f=>Ts(f,r.min,r.max)),h=d>1?Math.min(...u):0,p=100-Math.max(...u);return t.jsx(_e.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...o,ref:c,style:{...e.style,[i.startEdge]:h+"%",[i.endEdge]:p+"%"}})});Cs.displayName=Ye;var qe="SliderThumb",ys=a.forwardRef((e,s)=>{const n=qr(e.__scopeSlider),[o,r]=a.useState(null),i=le(s,c=>r(c)),l=a.useMemo(()=>o?n().findIndex(c=>c.ref.current===o):-1,[n,o]);return t.jsx(eo,{...e,ref:i,index:l})}),eo=a.forwardRef((e,s)=>{const{__scopeSlider:n,index:o,name:r,...i}=e,l=Me(qe,n),c=vs(qe,n),[d,u]=a.useState(null),h=le(s,g=>u(g)),p=d?l.form||!!d.closest("form"):!0,f=Br(d),b=l.values[o],C=b===void 0?0:Ts(b,l.min,l.max),m=no(o,l.values.length),x=f==null?void 0:f[c.size],v=x?oo(x,C,c.direction):0;return a.useEffect(()=>{if(d)return l.thumbs.add(d),()=>{l.thumbs.delete(d)}},[d,l.thumbs]),t.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${C}% + ${v}px)`},children:[t.jsx(We.ItemSlot,{scope:e.__scopeSlider,children:t.jsx(_e.span,{role:"slider","aria-label":e["aria-label"]||m,"aria-valuemin":l.min,"aria-valuenow":b,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:h,style:b===void 0?{display:"none"}:e.style,onFocus:ce(e.onFocus,()=>{l.valueIndexToChangeRef.current=o})})}),p&&t.jsx(to,{name:r??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:b},o)]})});ys.displayName=qe;var to=e=>{const{value:s,...n}=e,o=a.useRef(null),r=Fr(s);return a.useEffect(()=>{const i=o.current,l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(r!==s&&d){const u=new Event("input",{bubbles:!0});d.call(i,s),i.dispatchEvent(u)}},[r,s]),t.jsx("input",{style:{display:"none"},...n,ref:o,defaultValue:s})};function so(e=[],s,n){const o=[...e];return o[n]=s,o.sort((r,i)=>r-i)}function Ts(e,s,n){const i=100/(n-s)*(e-s);return is(i,[0,100])}function no(e,s){return s>2?`Value ${e+1} of ${s}`:s===2?["Minimum","Maximum"][e]:void 0}function ro(e,s){if(e.length===1)return 0;const n=e.map(r=>Math.abs(r-s)),o=Math.min(...n);return n.indexOf(o)}function oo(e,s,n){const o=e/2,i=et([0,50],[0,o]);return(o-i(s)*n)*n}function ao(e){return e.slice(0,-1).map((s,n)=>e[n+1]-s)}function lo(e,s){if(s>0){const n=ao(e);return Math.min(...n)>=s}return!0}function et(e,s){return n=>{if(e[0]===e[1]||s[0]===s[1])return s[0];const o=(s[1]-s[0])/(e[1]-e[0]);return s[0]+o*(n-e[0])}}function io(e){return(String(e).split(".")[1]||"").length}function co(e,s){const n=Math.pow(10,s);return Math.round(e*n)/n}var uo=xs,fo=ws,mo=Cs,po=ys;function ho({className:e,defaultValue:s,value:n,min:o=0,max:r=100,...i}){const l=a.useMemo(()=>Array.isArray(n)?n:Array.isArray(s)?s:[o,r],[n,s,o,r]);return t.jsxs(uo,{"data-slot":"slider",defaultValue:s,value:n,min:o,max:r,className:A("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[t.jsx(fo,{"data-slot":"slider-track",className:A("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:t.jsx(mo,{"data-slot":"slider-range",className:A("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:l.length},(c,d)=>t.jsx(po,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},d))]})}var tt="Switch",[xo,Bo]=Xe(tt),[go,vo]=xo(tt),Ns=a.forwardRef((e,s)=>{const{__scopeSwitch:n,name:o,checked:r,defaultChecked:i,required:l,disabled:c,value:d="on",onCheckedChange:u,form:h,...p}=e,[f,b]=a.useState(null),C=X(s,S=>b(S)),m=a.useRef(!1),x=f?h||!!f.closest("form"):!0,[v=!1,g]=Ie({prop:r,defaultProp:i,onChange:u});return t.jsxs(go,{scope:n,checked:v,disabled:c,children:[t.jsx(B.button,{type:"button",role:"switch","aria-checked":v,"aria-required":l,"data-state":Es(v),"data-disabled":c?"":void 0,disabled:c,value:d,...p,ref:C,onClick:F(e.onClick,S=>{g(N=>!N),x&&(m.current=S.isPropagationStopped(),m.current||S.stopPropagation())})}),x&&t.jsx(bo,{control:f,bubbles:!m.current,name:o,value:d,checked:v,required:l,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});Ns.displayName=tt;var Is="SwitchThumb",js=a.forwardRef((e,s)=>{const{__scopeSwitch:n,...o}=e,r=vo(Is,n);return t.jsx(B.span,{"data-state":Es(r.checked),"data-disabled":r.disabled?"":void 0,...o,ref:s})});js.displayName=Is;var bo=e=>{const{control:s,checked:n,bubbles:o=!0,...r}=e,i=a.useRef(null),l=At(n),c=Js(s);return a.useEffect(()=>{const d=i.current,u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(l!==n&&p){const f=new Event("click",{bubbles:o});p.call(d,n),d.dispatchEvent(f)}},[l,n,o]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Es(e){return e?"checked":"unchecked"}var So=Ns,wo=js;function Co({className:e,...s}){return t.jsx(So,{"data-slot":"switch",className:A("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",e),...s,children:t.jsx(wo,{"data-slot":"switch-thumb",className:A("bg-white pointer-events-none block size-4 rounded-full ring-0 shadow-lg transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}function st(e){var s,n,o;switch(e.inputType){case"text":return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),t.jsx(oe,{type:"text",id:e.id,placeholder:e.placeholder,className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValue,onChange:r=>{e.onChangeValue(r.target.value)},...e.inputProps})]},e.id);case"number":return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),t.jsx(oe,{type:"number",id:e.id,placeholder:e.placeholder,className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValue,onChange:r=>{var l;const i=(l=e.inputProps)==null?void 0:l.max;if(i!==void 0){const c=Math.min(Number(r.target.value),Number(i));e.onChangeValue(c.toString()),r.target.value=c.toString();return}e.onChangeValue(r.target.value)},...e.inputProps})]},e.id);case"switch":return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),t.jsx(Co,{id:e.id,defaultChecked:e.defaultValue,onCheckedChange:r=>{e.onChangeValue(r)}})]},e.id);case"select":return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:"legend-position-select",className:"text-sm font-medium ",children:e.label}),t.jsxs(ns,{value:e.defaultValue,onValueChange:r=>{e.onChangeValue(r)},children:[t.jsx(os,{id:e.id,className:"w-[100px]",children:t.jsx(rs,{placeholder:"Select position"})}),t.jsx(as,{children:(s=e.options)==null?void 0:s.map(r=>t.jsx(Ne,{value:r.value,children:r.label},r.value))})]})]},e.id);case"color":return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),t.jsx(oe,{type:"color",id:e.id,placeholder:e.placeholder,className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValue,onChange:r=>{e.onChangeValue(r.target.value)},...e.inputProps})]},e.id);case"slider":return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),t.jsx(ho,{id:e.id,value:[e.defaultValue],onValueChange:r=>{e.onChangeValue(r==null?void 0:r[0])},min:Number(((n=e.inputProps)==null?void 0:n.min)??0),max:Number(((o=e.inputProps)==null?void 0:o.max)??100)})]},e.id);default:return null}}function yo(e){return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:"x-axis-limits",className:"text-sm font-medium",children:e.label}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(J,{htmlFor:`${e.id}-min`,className:"text-sm font-medium",children:"Min"}),t.jsx(oe,{type:"text",placeholder:"Min",className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValueMin,onChange:s=>{e.onChangeMin(s.target.value)}})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(J,{htmlFor:`${e.id}-max`,className:"text-sm font-medium",children:"Max"}),t.jsx(oe,{type:"text",placeholder:"Max",className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValueMax,onChange:s=>{e.onChangeMax(s.target.value)}})]})]})]})}const To=e=>{const{chartSettings:s,onSettingChange:n,settingInputsConfig:o}=e,[r,i]=a.useState(s),l=(d,u)=>{i(h=>({...h,[d]:u})),n(d,u)},c=a.useMemo(()=>o.map(u=>({...u,defaultValue:r[u.id],onChangeValue:h=>{l(u.id,h)}})).map(u=>st(u)),[l,r,o]);return t.jsxs("div",{className:"flex-grow flex overflow-y-auto",children:[t.jsx("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6 border-r-2 border-secondary",children:c}),t.jsx("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6"})]})},No=a.memo(To),Io=e=>{const{chartSettings:s,onSettingChange:n,settingInputsConfig:o}=e,[r,i]=a.useState(s),l=a.useCallback((u,h,p)=>{if(u==="x"){const b={...r.xAxisLimits,[h]:p};i(C=>({...C,xAxisLimits:b})),n("xAxisLimits",b);return}const f={...r.yAxisLimits,[h]:p};i(b=>({...b,yAxisLimits:f})),n("yAxisLimits",f)},[r,n]),c=a.useCallback((u,h)=>{i(p=>({...p,[u]:h})),n(u,h)},[n]),d=a.useMemo(()=>Object.entries(o).map(([u,h],p)=>{const f=h.map(b=>{var C,m;if(b.inputType==="min/max"){const x={...b,defaultValueMin:((C=r[b.id])==null?void 0:C.min)||void 0,defaultValueMax:((m=r[b.id])==null?void 0:m.max)||void 0,onChangeMin:v=>{l(u,"min",v)},onChangeMax:v=>{l(u,"max",v)}};return yo(x)}return st({...b,defaultValue:r[b.id],onChangeValue:x=>{c(b.id,x)}})});return t.jsx("div",{className:A("flex-1 flex flex-col space-y-4 pl-3 pr-6 border-secondary",p<Object.keys(o).length-1?"border-r-2":""),children:f},u)}),[r,c,l,o]);return t.jsx("div",{className:"flex-grow flex overflow-y-auto",children:d})},jo=a.memo(Io),Eo=e=>{var C;const{traces:s,onTraceSettingChange:n,settingInputsConfig:o}=e,[r,i]=a.useState((C=s[0])==null?void 0:C.id),[l,c]=a.useState(""),[d,u]=a.useState(s),h=a.useMemo(()=>d.filter(m=>m.settings.name.toLowerCase().includes(l.toLowerCase())),[d,l]),[p,f]=a.useMemo(()=>{const m=d.findIndex(v=>v.id===r);return[d[m],m]},[d,r]),b=(m,x,v)=>{const g=[...d];g[v]={...g[v],settings:{...g[v].settings,[m]:x}},u(g),n(m,x,v)};return t.jsxs("div",{className:"flex-grow flex overflow-y-auto",children:[t.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6 border-r-2 border-secondary",children:[t.jsx(oe,{type:"text",placeholder:"Search traces...",value:l,onChange:m=>c(m.target.value),className:"sticky top-0 bg-background shadow-sm"}),t.jsx("div",{className:"flex flex-col space-y-2 overflow-y-auto",children:h.map(m=>t.jsxs("div",{className:`
                flex items-center space-x-3 p-2 rounded-lg
                transition-colors duration-200 ease-in-out
                cursor-pointer hover:bg-primary/20
                bg-secondary/40
                ${r===m.id?"!bg-primary/80 !text-background !font-medium shadow-sm":""}
              `,onClick:()=>i(m.id),children:[t.jsx("div",{className:"w-4 h-4 rounded-sm shadow-sm border border-white",style:{backgroundColor:m.settings.color}}),t.jsx("span",{className:"text-sm",children:m.settings.name})]},m.id))})]}),t.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-6 pr-6 overflow-y-auto",children:[!r&&t.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:t.jsx("span",{className:"text-sm",children:"Select a trace on the left to edit its settings"})}),p&&o.map(m=>{const x={...m,defaultValue:p.settings[m.id],onChangeValue:v=>b(m.id,v,f)};return st(x)})]})]})},Ro=a.memo(Eo),me={GENERAL:{title:"General settings",value:"general-settings"},AXIS:{title:"Axis settings",value:"axis-settings"},SERIES:{title:"Series settings",value:"series-settings"},TOOLTIP:{title:"Tooltip settings",value:"tooltip-settings"}};function at(e){switch(e){case j.LINE:return be[j.LINE];case j.SCATTER:return be[j.SCATTER];case j.BAR:return be[j.BAR];case j.AREA:return be[j.AREA];default:return Zs}}function Ao(e){switch(e){case j.LINE:return Se[j.LINE];case j.SCATTER:return Se[j.SCATTER];case j.BAR:return Se[j.BAR];case j.AREA:return Se[j.AREA];default:return Qs}}function Po(e){switch(e){case j.LINE:return{GENERAL:ye[j.LINE],AXIS:Ce[j.LINE],TRACE:we[j.LINE]};case j.SCATTER:return{GENERAL:ye[j.SCATTER],AXIS:Ce[j.SCATTER],TRACE:we[j.SCATTER]};case j.BAR:return{GENERAL:ye[j.BAR],AXIS:Ce[j.BAR],TRACE:we[j.BAR]};case j.AREA:return{GENERAL:ye[j.AREA],AXIS:Ce[j.AREA],TRACE:we[j.AREA]};default:return{GENERAL:sn,AXIS:tn,TRACE:en}}}const _o=e=>{const{chartSettings:s,setChartSettings:n,traces:o,onTraceSettingChange:r,chartType:i}=e,[l,c]=a.useState(me.GENERAL),d=a.useCallback((f,b)=>{n({...s,[f]:b})},[s,n]),u=Ue(d,1e3),h=Ue(r,1e3),p=a.useMemo(()=>Po(i),[i]);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col space-y-1 border-b-2 rounded-lg rounded-b-none p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-0",children:"Customize Your Chart"}),t.jsx("p",{className:"text-sm text-accent-foreground",children:"Customize your chart with the options below."})]}),t.jsxs("div",{className:"flex-grow flex items-stretch overflow-hidden",children:[t.jsx("ul",{className:"flex flex-col w-[200px] border-r-2",children:Object.values(me).map(f=>t.jsx("li",{onClick:()=>c(f),className:A("px-4 py-3 border-b-2 cursor-pointer hover:bg-primary/20",f.value===l.value?"bg-primary/50 hover:bg-primary/50":""),children:f.title},f.value))}),t.jsxs("div",{className:"flex-grow flex flex-col gap-5 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:l.title}),l.value===me.GENERAL.value&&t.jsx(No,{chartSettings:s,onSettingChange:u,settingInputsConfig:p.GENERAL}),l.value===me.AXIS.value&&t.jsx(jo,{chartSettings:s,onSettingChange:u,settingInputsConfig:p.AXIS}),l.value===me.SERIES.value&&t.jsx(Ro,{onTraceSettingChange:h,traces:o,settingInputsConfig:p.TRACE})]})]})]})},Mo=a.memo(_o);function ko(e){const{onClose:s}=e,{dataManager:n}=nn(),o=Te(w=>w.chartToBeEditedId),r=Te(w=>w.setChartToBeEditedId),i=Te(w=>{var y;return(y=w.charts)==null?void 0:y.find(T=>T.i===o)}),[l,c]=a.useState({type:(i==null?void 0:i.type)??void 0,tracesConfig:(i==null?void 0:i.tracesConfig)??[],chartSettings:(i==null?void 0:i.chartSettings)??at((i==null?void 0:i.type)??"")}),[d,u]=a.useState(i?Y.DATA_SELECT.value:Y.CHART_TYPE_SELECT.value),h=l.type,p=l.chartSettings,f=l.tracesConfig.filter(w=>{if(!h)return!1;const{xRequired:y,yRequired:T}=mt[h];switch(!0){case(y&&T):return!!(w!=null&&w.x&&(w!=null&&w.y));case(y&&!T):return!!(w!=null&&w.x);case(!y&&T):return!!(w!=null&&w.y);default:return!1}}),b=d<=Y.CHART_TYPE_SELECT.value,C=a.useMemo(()=>{switch(d){case Y.CHART_TYPE_SELECT.value:return!l.type;case Y.DATA_SELECT.value:return!f.length;case Y.CUSTOMIZATION.value:return!1;default:return!1}},[l.type,f.length,d]),m=d>=Y.CUSTOMIZATION.value,x=a.useCallback(w=>{switch(!0){case w===Y.CHART_TYPE_SELECT.value:return!1;case w===Y.DATA_SELECT.value:return!l.type;case w===Y.CUSTOMIZATION.value:return!f.length;default:return!1}},[l.type,f.length]),v=a.useCallback(w=>{c(y=>({...y,type:w,chartSettings:at(w)})),u(y=>y+1)},[]),g=a.useCallback(w=>{c(y=>({...y,chartSettings:{...y.chartSettings,...w}}))},[]),S=a.useCallback((w,y)=>{h&&c(T=>{switch(!0){case y===T.tracesConfig.length:return{...T,tracesConfig:[...T.tracesConfig,{...w,settings:{...Ao(h),name:"Trace "+T.tracesConfig.length,color:Ir[y]},id:rn()}]};case(y>-1&&y<T.tracesConfig.length):return{...T,tracesConfig:T.tracesConfig.map((E,L)=>y!==L?E:{...E,...w})};default:return T}})},[h]),N=a.useCallback(w=>{c(y=>w<0||w>=y.tracesConfig.length?y:{...y,tracesConfig:y.tracesConfig.filter((T,E)=>w!==E)})},[]),R=a.useCallback((w,y,T)=>{c(E=>T<0||T>=E.tracesConfig.length?E:{...E,tracesConfig:E.tracesConfig.map((L,U)=>T!==U?L:{...L,settings:{...L.settings,[w]:y}})})},[]),M=a.useCallback(w=>{u(w)},[]),P=a.useCallback(()=>{b||u(w=>w-1)},[b]),G=a.useCallback(()=>{C||u(w=>w+1)},[C]),_=a.useCallback(async()=>{if(i){n.updateChart(o,{...i,...l}),s();return}n.addChart(l),s()},[l,i,o,n,s]);return{currentStep:d,chartType:h,completeTraces:f,allTraces:l.tracesConfig,traces:f,isLastStep:m,disablePreviousStep:b,disableNextStep:C,chartSettings:p,handleStepChange:M,handleChartTypeSelect:v,handleChartSettingsChange:g,addOrUpdateTrace:S,deleteTrace:N,editTraceSettingsItem:R,finalizeChartSelection:_,handleLoadPreviousStep:P,handleLoadNextStep:G,checkIfStepIsDisabled:x,setEditChartId:r}}function Do(){const[e,s]=a.useState(null),n=a.useCallback(o=>{s(o)},[]);return{chartAPI:e,setChartPreviewRef:n}}function Ho(e){const{onClose:s}=e,{chartType:n,currentStep:o,allTraces:r,completeTraces:i,addOrUpdateTrace:l,deleteTrace:c,editTraceSettingsItem:d,handleChartTypeSelect:u,handleStepChange:h,finalizeChartSelection:p,handleLoadNextStep:f,handleLoadPreviousStep:b,checkIfStepIsDisabled:C,isLastStep:m,disablePreviousStep:x,disableNextStep:v,chartSettings:g,handleChartSettingsChange:S,setEditChartId:N}=ko({onClose:s}),{chartAPI:R,setChartPreviewRef:M}=Do(),P=a.useMemo(()=>o!==2&&o!==3||!i.length?null:t.jsxs("div",{className:"flex-grow flex flex-col w-full h-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-foreground px-4",children:g!=null&&g.titleVisibility?g==null?void 0:g.title:""}),t.jsx(on,{chart:{i:"preview",...an,tracesConfig:i,type:n,chartSettings:g},chartAPI:R,setRef:M})]}),[R,g,n,i,o,M]);return t.jsx(mn,{open:!0,onOpenChange:()=>{N(""),s()},children:t.jsx(pn,{className:"!w-[90vw] !max-w-[1800px] h-[90vh] flex flex-col p-0 overflow-hidden gap-0",children:t.jsxs(ln,{children:[t.jsx(Nn,{}),t.jsxs(It,{value:o.toString(),className:"flex-grow flex flex-col",children:[t.jsx(kn,{currentStep:o,onStepChange:h,checkIfStepIsDisabled:C}),o===1&&t.jsx($n,{onChartSelect:u,tabValue:o.toString(),selectedChartType:n}),(o===2||o===3)&&n&&t.jsx(Vn,{tabValue:o.toString(),chartPreviewJsx:P,sectionJsx:o===2?t.jsx(Pr,{chartType:n,completeTraces:i,allTraces:r,addOrUpdateTrace:l,deleteTrace:c,editTraceSettingsItem:d}):t.jsx(Mo,{chartSettings:g,setChartSettings:S,traces:i,onTraceSettingChange:d,chartType:n})})]}),t.jsx(Ln,{isLastStep:m,disablePreviousStep:x,onNext:m?p:f,onPrevious:b,disableNextStep:v})]})})})}export{Ho as default};
