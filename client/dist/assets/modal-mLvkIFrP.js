import{c as he,r as a,j as t,u as lt,a as Ie,b as Xe,d as Ee,P as B,e as it,R as Rr,I as Ar,f as F,g as Pr,h as A,C as j,i as _r,B as Z,k as ct,l as dt,m as Mr,n as ut,o as kr,p as Dr,q as X,A as Lr,s as Q,t as Or,v as ft,V as Vr,w as Fr,x as $r,y as Br,z as Hr,S as zr,F as Gr,D as Ur,E as Kr,G as nt,H as Wr,J as oe,K as Yr,T as qr,L as Xr,M as Te,N as mt,O as se,Q as Jr,U as Zr,W as Se,X as Qr,Y as be,Z as en,_ as tn,$ as rn,a0 as we,a1 as Ce,a2 as ye,a3 as nn,a4 as sn,a5 as on,a6 as an,a7 as ln}from"./index-6MAVHgSl.js";import{D as cn,a as dn,b as un,c as fn,d as mn}from"./dialog-_VDH8kWv.js";import{C as pt,D as pn}from"./index-Bv8nMR5h.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]],xn=he("ChartArea",hn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],vn=he("ChartLine",gn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=[["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["circle",{cx:"18.5",cy:"5.5",r:".5",fill:"currentColor",key:"lysivs"}],["circle",{cx:"11.5",cy:"11.5",r:".5",fill:"currentColor",key:"byv1b8"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["circle",{cx:"17.5",cy:"14.5",r:".5",fill:"currentColor",key:"1gjh6j"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]],bn=he("ChartScatter",Sn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ht=he("Check",wn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],yn=he("ChevronUp",Cn),Tn=()=>t.jsxs(cn,{className:"px-6 py-4",children:[t.jsx(dn,{children:"Create a New Chart"}),t.jsx(un,{children:"Follow the steps to create your custom chart."})]}),Nn=a.memo(Tn);var Je="Tabs",[In,Fo]=Xe(Je,[it]),xt=it(),[jn,Ze]=In(Je),gt=a.forwardRef((e,r)=>{const{__scopeTabs:n,value:o,onValueChange:s,defaultValue:i,orientation:l="horizontal",dir:c,activationMode:d="automatic",...u}=e,h=lt(c),[p,f]=Ie({prop:o,onChange:s,defaultProp:i});return t.jsx(jn,{scope:n,baseId:Ee(),value:p,onValueChange:f,orientation:l,dir:h,activationMode:d,children:t.jsx(B.div,{dir:h,"data-orientation":l,...u,ref:r})})});gt.displayName=Je;var vt="TabsList",St=a.forwardRef((e,r)=>{const{__scopeTabs:n,loop:o=!0,...s}=e,i=Ze(vt,n),l=xt(n);return t.jsx(Rr,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:o,children:t.jsx(B.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:r})})});St.displayName=vt;var bt="TabsTrigger",wt=a.forwardRef((e,r)=>{const{__scopeTabs:n,value:o,disabled:s=!1,...i}=e,l=Ze(bt,n),c=xt(n),d=Tt(l.baseId,o),u=Nt(l.baseId,o),h=o===l.value;return t.jsx(Ar,{asChild:!0,...c,focusable:!s,active:h,children:t.jsx(B.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...i,ref:r,onMouseDown:F(e.onMouseDown,p=>{!s&&p.button===0&&p.ctrlKey===!1?l.onValueChange(o):p.preventDefault()}),onKeyDown:F(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&l.onValueChange(o)}),onFocus:F(e.onFocus,()=>{const p=l.activationMode!=="manual";!h&&!s&&p&&l.onValueChange(o)})})})});wt.displayName=bt;var Ct="TabsContent",yt=a.forwardRef((e,r)=>{const{__scopeTabs:n,value:o,forceMount:s,children:i,...l}=e,c=Ze(Ct,n),d=Tt(c.baseId,o),u=Nt(c.baseId,o),h=o===c.value,p=a.useRef(h);return a.useEffect(()=>{const f=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(f)},[]),t.jsx(Pr,{present:s||h,children:({present:f})=>t.jsx(B.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!f,id:u,tabIndex:0,...l,ref:r,style:{...e.style,animationDuration:p.current?"0s":void 0},children:f&&i})})});yt.displayName=Ct;function Tt(e,r){return`${e}-trigger-${r}`}function Nt(e,r){return`${e}-content-${r}`}var En=gt,Rn=St,An=wt,Pn=yt;function It({className:e,...r}){return t.jsx(En,{"data-slot":"tabs",className:A("flex flex-col gap-2",e),...r})}function jt({className:e,...r}){return t.jsx(Rn,{"data-slot":"tabs-list",className:A("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",e),...r})}function Et({className:e,...r}){return t.jsx(An,{"data-slot":"tabs-trigger",className:A("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function Rt({className:e,...r}){return t.jsx(Pn,{"data-slot":"tabs-content",className:A("flex-1 outline-none",e),...r})}const _n=[{icon:_r,label:"Bar",key:j.BAR},{icon:vn,label:"Line",key:j.LINE},{icon:bn,label:"Scatter",key:j.SCATTER},{icon:xn,label:"Area",key:j.AREA}],Y={CHART_TYPE_SELECT:{label:"Choose Chart Type",value:1},DATA_SELECT:{label:"Select Data Source",value:2},CUSTOMIZATION:{label:"Customize",value:3}},Mn=e=>{const{currentStep:r,onStepChange:n,checkIfStepIsDisabled:o}=e;return t.jsx(jt,{className:"w-full justify-start h-12 px-6 border-b border-b-secondary bg-primary-foreground",children:Object.values(Y).map(s=>{const i=o(s.value),l=s.value===r;return t.jsxs(Et,{value:s.value.toString(),disabled:i,onClick:()=>n(s.value),className:A("flex-1 h-full data-[state=active]:font-semibold data-[state=active]:shadow-none !bg-primary-foreground transition-all cursor-pointer",i&&"!cursor-not-allowed"),children:[t.jsx("span",{className:A(`mr-2 w-6 h-6 rounded-full ${s.value<=r?"bg-transparent text-primary border border-primary":"bg-foreground/10 text-accent-foreground"} flex items-center justify-center text-sm`,l&&"!bg-primary !text-background !border-primary rounded-full"),children:s.value}),t.jsx("span",{className:s.value<=r?"text-primary":"text-muted-foreground",children:s.label})]},s.value)})})},kn=a.memo(Mn),Dn=e=>{const{disableNextStep:r,onNext:n,onPrevious:o,isLastStep:s,disablePreviousStep:i}=e;return t.jsxs("div",{className:"flex-shrink-0 px-6 py-4 flex justify-between items-center border-t border-t-secondary bg-primary-foreground",children:[t.jsx(Z,{onClick:o,variant:"outline",disabled:i,children:"Previous"}),t.jsx(Z,{variant:"default",disabled:r,onClick:n,children:s?"Finish":"Next"})]})},Ln=a.memo(Dn),On=e=>{const{tabValue:r,sectionJsx:n,chartPreviewJsx:o}=e,[s,i]=a.useState(!0),[l,c]=a.useState(!0),d=()=>{const u=!s;i(u),setTimeout(()=>{c(u)},300)};return t.jsx(Rt,{value:r,className:"flex-grow flex flex-col overflow-hidden",children:t.jsxs("div",{className:"flex flex-grow p-6 space-x-6",children:[t.jsx("div",{className:A("flex-grow flex flex-col bg-background-light rounded-lg shadow-sm border border- transition-all duration-300",s?"w-2/3":"flex-grow"),children:n}),t.jsxs("div",{className:A("bg-background-light py-2 px-1 space-y-6 rounded-lg shadow-sm border border- transition-all duration-300 flex flex-col",s?"w-1/3":"w-16"),children:[t.jsxs("div",{className:"flex items-center p-1",children:[t.jsx(Z,{variant:"ghost",className:"p-2",onClick:d,children:s?t.jsx(dt,{className:"h-6 w-6"}):t.jsx(ct,{className:"h-6 w-6"})}),s&&t.jsx("h4",{className:"font-semibold mb-0 text-xl flex-grow",children:"Chart Preview"})]}),l&&s&&t.jsx("div",{className:A("flex-grow flex w-full items-center relative"),children:o||t.jsxs("div",{className:" absolute w-full top-1/2 -translate-y-1/2 flex flex-col items-center justify-center gap-5",children:[t.jsx(Mr,{className:"text-primary/50 h-20 w-20"}),t.jsx("p",{className:"text-accent-foreground text-center",children:"Select traces on the left to preview chart"})]})})]})]})})},Vn=a.memo(On),Fn=e=>{const{tabValue:r,onChartSelect:n,selectedChartType:o}=e;return t.jsxs(Rt,{value:r,className:"flex-grow flex flex-col p-6 overflow-y-auto",children:[t.jsx("h2",{className:"text-3xl font-medium text-foreground my-8 text-center tracking-normal",children:"Select Chart Type"}),t.jsx("div",{className:"flex-grow w-full grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 pt-20",children:_n.map(s=>t.jsxs(Z,{variant:"outline",className:A("h-52 flex flex-col items-center justify-center gap-4 bg-gradient-to-br transition-all duration-300 shadow-sm hover:shadow-md","from-white to-primary/10 hover:from-white hover:to-primary/30","dark:from-secondary dark:to-primary/30 dark:hover:to-primary/80",o===s.key&&"from-primary-light to-primary/50 dark:from-primary/40 dark:to-primary/80 shadow-md"),onClick:()=>n(s.key),children:[t.jsx(s.icon,{className:"!h-16 !w-16 mb-2 text-primary"}),t.jsx("span",{className:"font-medium text-2xl text-foreground",children:s.label})]},s.label))})]})},$n=a.memo(Fn);function At(e){const r=a.useRef({value:e,previous:e});return a.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}var Bn=[" ","Enter","ArrowUp","ArrowDown"],Hn=[" ","Enter"],xe="Select",[Re,Ae,zn]=Dr(xe),[de,$o]=Xe(xe,[zn,ut]),Pe=ut(),[Gn,ee]=de(xe),[Un,Kn]=de(xe),Pt=e=>{const{__scopeSelect:r,children:n,open:o,defaultOpen:s,onOpenChange:i,value:l,defaultValue:c,onValueChange:d,dir:u,name:h,autoComplete:p,disabled:f,required:v,form:C}=e,m=Pe(r),[x,g]=a.useState(null),[S,b]=a.useState(null),[N,R]=a.useState(!1),M=lt(u),[P=!1,G]=Ie({prop:o,defaultProp:s,onChange:i}),[_,w]=Ie({prop:l,defaultProp:c,onChange:d}),y=a.useRef(null),T=x?C||!!x.closest("form"):!0,[E,L]=a.useState(new Set),U=Array.from(E).map($=>$.props.value).join(";");return t.jsx(kr,{...m,children:t.jsxs(Gn,{required:v,scope:r,trigger:x,onTriggerChange:g,valueNode:S,onValueNodeChange:b,valueNodeHasChildren:N,onValueNodeHasChildrenChange:R,contentId:Ee(),value:_,onValueChange:w,open:P,onOpenChange:G,dir:M,triggerPointerDownPosRef:y,disabled:f,children:[t.jsx(Re.Provider,{scope:r,children:t.jsx(Un,{scope:e.__scopeSelect,onNativeOptionAdd:a.useCallback($=>{L(H=>new Set(H).add($))},[]),onNativeOptionRemove:a.useCallback($=>{L(H=>{const z=new Set(H);return z.delete($),z})},[]),children:n})}),T?t.jsxs(er,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:p,value:_,onChange:$=>w($.target.value),disabled:f,form:C,children:[_===void 0?t.jsx("option",{value:""}):null,Array.from(E)]},U):null]})})};Pt.displayName=xe;var _t="SelectTrigger",Mt=a.forwardRef((e,r)=>{const{__scopeSelect:n,disabled:o=!1,...s}=e,i=Pe(n),l=ee(_t,n),c=l.disabled||o,d=X(r,l.onTriggerChange),u=Ae(n),h=a.useRef("touch"),[p,f,v]=tr(m=>{const x=u().filter(b=>!b.disabled),g=x.find(b=>b.value===l.value),S=rr(x,m,g);S!==void 0&&l.onValueChange(S.value)}),C=m=>{c||(l.onOpenChange(!0),v()),m&&(l.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return t.jsx(Lr,{asChild:!0,...i,children:t.jsx(B.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Qt(l.value)?"":void 0,...s,ref:d,onClick:F(s.onClick,m=>{m.currentTarget.focus(),h.current!=="mouse"&&C(m)}),onPointerDown:F(s.onPointerDown,m=>{h.current=m.pointerType;const x=m.target;x.hasPointerCapture(m.pointerId)&&x.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(C(m),m.preventDefault())}),onKeyDown:F(s.onKeyDown,m=>{const x=p.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(x&&m.key===" ")&&Bn.includes(m.key)&&(C(),m.preventDefault())})})})});Mt.displayName=_t;var kt="SelectValue",Dt=a.forwardRef((e,r)=>{const{__scopeSelect:n,className:o,style:s,children:i,placeholder:l="",...c}=e,d=ee(kt,n),{onValueNodeHasChildrenChange:u}=d,h=i!==void 0,p=X(r,d.onValueNodeChange);return Q(()=>{u(h)},[u,h]),t.jsx(B.span,{...c,ref:p,style:{pointerEvents:"none"},children:Qt(d.value)?t.jsx(t.Fragment,{children:l}):i})});Dt.displayName=kt;var Wn="SelectIcon",Lt=a.forwardRef((e,r)=>{const{__scopeSelect:n,children:o,...s}=e;return t.jsx(B.span,{"aria-hidden":!0,...s,ref:r,children:o||"â–¼"})});Lt.displayName=Wn;var Yn="SelectPortal",Ot=e=>t.jsx(Or,{asChild:!0,...e});Ot.displayName=Yn;var ae="SelectContent",Vt=a.forwardRef((e,r)=>{const n=ee(ae,e.__scopeSelect),[o,s]=a.useState();if(Q(()=>{s(new DocumentFragment)},[]),!n.open){const i=o;return i?ft.createPortal(t.jsx(Ft,{scope:e.__scopeSelect,children:t.jsx(Re.Slot,{scope:e.__scopeSelect,children:t.jsx("div",{children:e.children})})}),i):null}return t.jsx($t,{...e,ref:r})});Vt.displayName=ae;var q=10,[Ft,te]=de(ae),qn="SelectContentImpl",$t=a.forwardRef((e,r)=>{const{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:l,side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:p,collisionBoundary:f,collisionPadding:v,sticky:C,hideWhenDetached:m,avoidCollisions:x,...g}=e,S=ee(ae,n),[b,N]=a.useState(null),[R,M]=a.useState(null),P=X(r,I=>N(I)),[G,_]=a.useState(null),[w,y]=a.useState(null),T=Ae(n),[E,L]=a.useState(!1),U=a.useRef(!1);a.useEffect(()=>{if(b)return $r(b)},[b]),Br();const $=a.useCallback(I=>{const[V,...K]=T().map(D=>D.ref.current),[O]=K.slice(-1),k=document.activeElement;for(const D of I)if(D===k||(D==null||D.scrollIntoView({block:"nearest"}),D===V&&R&&(R.scrollTop=0),D===O&&R&&(R.scrollTop=R.scrollHeight),D==null||D.focus(),document.activeElement!==k))return},[T,R]),H=a.useCallback(()=>$([G,b]),[$,G,b]);a.useEffect(()=>{E&&H()},[E,H]);const{onOpenChange:z,triggerPointerDownPosRef:W}=S;a.useEffect(()=>{if(b){let I={x:0,y:0};const V=O=>{var k,D;I={x:Math.abs(Math.round(O.pageX)-(((k=W.current)==null?void 0:k.x)??0)),y:Math.abs(Math.round(O.pageY)-(((D=W.current)==null?void 0:D.y)??0))}},K=O=>{I.x<=10&&I.y<=10?O.preventDefault():b.contains(O.target)||z(!1),document.removeEventListener("pointermove",V),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",V),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",K,{capture:!0})}}},[b,z,W]),a.useEffect(()=>{const I=()=>z(!1);return window.addEventListener("blur",I),window.addEventListener("resize",I),()=>{window.removeEventListener("blur",I),window.removeEventListener("resize",I)}},[z]);const[ke,ge]=tr(I=>{const V=T().filter(k=>!k.disabled),K=V.find(k=>k.ref.current===document.activeElement),O=rr(V,I,K);O&&setTimeout(()=>O.ref.current.focus())}),De=a.useCallback((I,V,K)=>{const O=!U.current&&!K;(S.value!==void 0&&S.value===V||O)&&(_(I),O&&(U.current=!0))},[S.value]),Le=a.useCallback(()=>b==null?void 0:b.focus(),[b]),ie=a.useCallback((I,V,K)=>{const O=!U.current&&!K;(S.value!==void 0&&S.value===V||O)&&y(I)},[S.value]),ve=o==="popper"?$e:Bt,fe=ve===$e?{side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:p,collisionBoundary:f,collisionPadding:v,sticky:C,hideWhenDetached:m,avoidCollisions:x}:{};return t.jsx(Ft,{scope:n,content:b,viewport:R,onViewportChange:M,itemRefCallback:De,selectedItem:G,onItemLeave:Le,itemTextRefCallback:ie,focusSelectedItem:H,selectedItemText:w,position:o,isPositioned:E,searchRef:ke,children:t.jsx(Hr,{as:zr,allowPinchZoom:!0,children:t.jsx(Gr,{asChild:!0,trapped:S.open,onMountAutoFocus:I=>{I.preventDefault()},onUnmountAutoFocus:F(s,I=>{var V;(V=S.trigger)==null||V.focus({preventScroll:!0}),I.preventDefault()}),children:t.jsx(Ur,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:I=>I.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:t.jsx(ve,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:I=>I.preventDefault(),...g,...fe,onPlaced:()=>L(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:F(g.onKeyDown,I=>{const V=I.ctrlKey||I.altKey||I.metaKey;if(I.key==="Tab"&&I.preventDefault(),!V&&I.key.length===1&&ge(I.key),["ArrowUp","ArrowDown","Home","End"].includes(I.key)){let O=T().filter(k=>!k.disabled).map(k=>k.ref.current);if(["ArrowUp","End"].includes(I.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(I.key)){const k=I.target,D=O.indexOf(k);O=O.slice(D+1)}setTimeout(()=>$(O)),I.preventDefault()}})})})})})})});$t.displayName=qn;var Xn="SelectItemAlignedPosition",Bt=a.forwardRef((e,r)=>{const{__scopeSelect:n,onPlaced:o,...s}=e,i=ee(ae,n),l=te(ae,n),[c,d]=a.useState(null),[u,h]=a.useState(null),p=X(r,P=>h(P)),f=Ae(n),v=a.useRef(!1),C=a.useRef(!0),{viewport:m,selectedItem:x,selectedItemText:g,focusSelectedItem:S}=l,b=a.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&u&&m&&x&&g){const P=i.trigger.getBoundingClientRect(),G=u.getBoundingClientRect(),_=i.valueNode.getBoundingClientRect(),w=g.getBoundingClientRect();if(i.dir!=="rtl"){const k=w.left-G.left,D=_.left-k,re=P.left-D,ne=P.width+re,Oe=Math.max(ne,G.width),Ve=window.innerWidth-q,Fe=nt(D,[q,Math.max(q,Ve-Oe)]);c.style.minWidth=ne+"px",c.style.left=Fe+"px"}else{const k=G.right-w.right,D=window.innerWidth-_.right-k,re=window.innerWidth-P.right-D,ne=P.width+re,Oe=Math.max(ne,G.width),Ve=window.innerWidth-q,Fe=nt(D,[q,Math.max(q,Ve-Oe)]);c.style.minWidth=ne+"px",c.style.right=Fe+"px"}const y=f(),T=window.innerHeight-q*2,E=m.scrollHeight,L=window.getComputedStyle(u),U=parseInt(L.borderTopWidth,10),$=parseInt(L.paddingTop,10),H=parseInt(L.borderBottomWidth,10),z=parseInt(L.paddingBottom,10),W=U+$+E+z+H,ke=Math.min(x.offsetHeight*5,W),ge=window.getComputedStyle(m),De=parseInt(ge.paddingTop,10),Le=parseInt(ge.paddingBottom,10),ie=P.top+P.height/2-q,ve=T-ie,fe=x.offsetHeight/2,I=x.offsetTop+fe,V=U+$+I,K=W-V;if(V<=ie){const k=y.length>0&&x===y[y.length-1].ref.current;c.style.bottom="0px";const D=u.clientHeight-m.offsetTop-m.offsetHeight,re=Math.max(ve,fe+(k?Le:0)+D+H),ne=V+re;c.style.height=ne+"px"}else{const k=y.length>0&&x===y[0].ref.current;c.style.top="0px";const re=Math.max(ie,U+m.offsetTop+(k?De:0)+fe)+K;c.style.height=re+"px",m.scrollTop=V-ie+m.offsetTop}c.style.margin=`${q}px 0`,c.style.minHeight=ke+"px",c.style.maxHeight=T+"px",o==null||o(),requestAnimationFrame(()=>v.current=!0)}},[f,i.trigger,i.valueNode,c,u,m,x,g,i.dir,o]);Q(()=>b(),[b]);const[N,R]=a.useState();Q(()=>{u&&R(window.getComputedStyle(u).zIndex)},[u]);const M=a.useCallback(P=>{P&&C.current===!0&&(b(),S==null||S(),C.current=!1)},[b,S]);return t.jsx(Zn,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:v,onScrollButtonChange:M,children:t.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:t.jsx(B.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Bt.displayName=Xn;var Jn="SelectPopperPosition",$e=a.forwardRef((e,r)=>{const{__scopeSelect:n,align:o="start",collisionPadding:s=q,...i}=e,l=Pe(n);return t.jsx(Kr,{...l,...i,ref:r,align:o,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$e.displayName=Jn;var[Zn,Qe]=de(ae,{}),Be="SelectViewport",Ht=a.forwardRef((e,r)=>{const{__scopeSelect:n,nonce:o,...s}=e,i=te(Be,n),l=Qe(Be,n),c=X(r,i.onViewportChange),d=a.useRef(0);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),t.jsx(Re.Slot,{scope:n,children:t.jsx(B.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:F(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:f}=l;if(f!=null&&f.current&&p){const v=Math.abs(d.current-h.scrollTop);if(v>0){const C=window.innerHeight-q*2,m=parseFloat(p.style.minHeight),x=parseFloat(p.style.height),g=Math.max(m,x);if(g<C){const S=g+v,b=Math.min(C,S),N=S-b;p.style.height=b+"px",p.style.bottom==="0px"&&(h.scrollTop=N>0?N:0,p.style.justifyContent="flex-end")}}}d.current=h.scrollTop})})})]})});Ht.displayName=Be;var zt="SelectGroup",[Qn,es]=de(zt),ts=a.forwardRef((e,r)=>{const{__scopeSelect:n,...o}=e,s=Ee();return t.jsx(Qn,{scope:n,id:s,children:t.jsx(B.div,{role:"group","aria-labelledby":s,...o,ref:r})})});ts.displayName=zt;var Gt="SelectLabel",rs=a.forwardRef((e,r)=>{const{__scopeSelect:n,...o}=e,s=es(Gt,n);return t.jsx(B.div,{id:s.id,...o,ref:r})});rs.displayName=Gt;var je="SelectItem",[ns,Ut]=de(je),Kt=a.forwardRef((e,r)=>{const{__scopeSelect:n,value:o,disabled:s=!1,textValue:i,...l}=e,c=ee(je,n),d=te(je,n),u=c.value===o,[h,p]=a.useState(i??""),[f,v]=a.useState(!1),C=X(r,S=>{var b;return(b=d.itemRefCallback)==null?void 0:b.call(d,S,o,s)}),m=Ee(),x=a.useRef("touch"),g=()=>{s||(c.onValueChange(o),c.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return t.jsx(ns,{scope:n,value:o,disabled:s,textId:m,isSelected:u,onItemTextChange:a.useCallback(S=>{p(b=>b||((S==null?void 0:S.textContent)??"").trim())},[]),children:t.jsx(Re.ItemSlot,{scope:n,value:o,disabled:s,textValue:h,children:t.jsx(B.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:C,onFocus:F(l.onFocus,()=>v(!0)),onBlur:F(l.onBlur,()=>v(!1)),onClick:F(l.onClick,()=>{x.current!=="mouse"&&g()}),onPointerUp:F(l.onPointerUp,()=>{x.current==="mouse"&&g()}),onPointerDown:F(l.onPointerDown,S=>{x.current=S.pointerType}),onPointerMove:F(l.onPointerMove,S=>{var b;x.current=S.pointerType,s?(b=d.onItemLeave)==null||b.call(d):x.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:F(l.onPointerLeave,S=>{var b;S.currentTarget===document.activeElement&&((b=d.onItemLeave)==null||b.call(d))}),onKeyDown:F(l.onKeyDown,S=>{var N;((N=d.searchRef)==null?void 0:N.current)!==""&&S.key===" "||(Hn.includes(S.key)&&g(),S.key===" "&&S.preventDefault())})})})})});Kt.displayName=je;var pe="SelectItemText",Wt=a.forwardRef((e,r)=>{const{__scopeSelect:n,className:o,style:s,...i}=e,l=ee(pe,n),c=te(pe,n),d=Ut(pe,n),u=Kn(pe,n),[h,p]=a.useState(null),f=X(r,g=>p(g),d.onItemTextChange,g=>{var S;return(S=c.itemTextRefCallback)==null?void 0:S.call(c,g,d.value,d.disabled)}),v=h==null?void 0:h.textContent,C=a.useMemo(()=>t.jsx("option",{value:d.value,disabled:d.disabled,children:v},d.value),[d.disabled,d.value,v]),{onNativeOptionAdd:m,onNativeOptionRemove:x}=u;return Q(()=>(m(C),()=>x(C)),[m,x,C]),t.jsxs(t.Fragment,{children:[t.jsx(B.span,{id:d.textId,...i,ref:f}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?ft.createPortal(i.children,l.valueNode):null]})});Wt.displayName=pe;var Yt="SelectItemIndicator",qt=a.forwardRef((e,r)=>{const{__scopeSelect:n,...o}=e;return Ut(Yt,n).isSelected?t.jsx(B.span,{"aria-hidden":!0,...o,ref:r}):null});qt.displayName=Yt;var He="SelectScrollUpButton",Xt=a.forwardRef((e,r)=>{const n=te(He,e.__scopeSelect),o=Qe(He,e.__scopeSelect),[s,i]=a.useState(!1),l=X(r,o.onScrollButtonChange);return Q(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollTop>0;i(u)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?t.jsx(Zt,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});Xt.displayName=He;var ze="SelectScrollDownButton",Jt=a.forwardRef((e,r)=>{const n=te(ze,e.__scopeSelect),o=Qe(ze,e.__scopeSelect),[s,i]=a.useState(!1),l=X(r,o.onScrollButtonChange);return Q(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollHeight-d.clientHeight,h=Math.ceil(d.scrollTop)<u;i(h)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?t.jsx(Zt,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});Jt.displayName=ze;var Zt=a.forwardRef((e,r)=>{const{__scopeSelect:n,onAutoScroll:o,...s}=e,i=te("SelectScrollButton",n),l=a.useRef(null),c=Ae(n),d=a.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return a.useEffect(()=>()=>d(),[d]),Q(()=>{var h;const u=c().find(p=>p.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[c]),t.jsx(B.div,{"aria-hidden":!0,...s,ref:r,style:{flexShrink:0,...s.style},onPointerDown:F(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(o,50))}),onPointerMove:F(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),l.current===null&&(l.current=window.setInterval(o,50))}),onPointerLeave:F(s.onPointerLeave,()=>{d()})})}),ss="SelectSeparator",os=a.forwardRef((e,r)=>{const{__scopeSelect:n,...o}=e;return t.jsx(B.div,{"aria-hidden":!0,...o,ref:r})});os.displayName=ss;var Ge="SelectArrow",as=a.forwardRef((e,r)=>{const{__scopeSelect:n,...o}=e,s=Pe(n),i=ee(Ge,n),l=te(Ge,n);return i.open&&l.position==="popper"?t.jsx(Wr,{...s,...o,ref:r}):null});as.displayName=Ge;function Qt(e){return e===""||e===void 0}var er=a.forwardRef((e,r)=>{const{value:n,...o}=e,s=a.useRef(null),i=X(r,s),l=At(n);return a.useEffect(()=>{const c=s.current,d=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==n&&h){const p=new Event("change",{bubbles:!0});h.call(c,n),c.dispatchEvent(p)}},[l,n]),t.jsx(Vr,{asChild:!0,children:t.jsx("select",{...o,ref:i,defaultValue:n})})});er.displayName="BubbleSelect";function tr(e){const r=Fr(e),n=a.useRef(""),o=a.useRef(0),s=a.useCallback(l=>{const c=n.current+l;r(c),function d(u){n.current=u,window.clearTimeout(o.current),u!==""&&(o.current=window.setTimeout(()=>d(""),1e3))}(c)},[r]),i=a.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,s,i]}function rr(e,r,n){const s=r.length>1&&Array.from(r).every(u=>u===r[0])?r[0]:r,i=n?e.indexOf(n):-1;let l=ls(e,Math.max(i,0));s.length===1&&(l=l.filter(u=>u!==n));const d=l.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==n?d:void 0}function ls(e,r){return e.map((n,o)=>e[(r+o)%e.length])}var is=Pt,cs=Mt,ds=Dt,us=Lt,fs=Ot,ms=Vt,ps=Ht,hs=Kt,xs=Wt,gs=qt,vs=Xt,Ss=Jt;function nr({...e}){return t.jsx(is,{"data-slot":"select",...e})}function sr({...e}){return t.jsx(ds,{"data-slot":"select-value",...e})}function or({className:e,children:r,...n}){return t.jsxs(cs,{"data-slot":"select-trigger",className:A("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-full items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 cursor-pointer",e),...n,children:[r,t.jsx(us,{asChild:!0,children:t.jsx(pt,{className:"size-4 opacity-50"})})]})}function ar({className:e,children:r,position:n="popper",...o}){return t.jsx(fs,{children:t.jsxs(ms,{"data-slot":"select-content",className:A("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...o,children:[t.jsx(bs,{}),t.jsx(ps,{className:A("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:r}),t.jsx(ws,{})]})})}function Ne({className:e,children:r,...n}){return t.jsxs(hs,{"data-slot":"select-item",className:A("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2 cursor-pointer",e),...n,children:[t.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:t.jsx(gs,{children:t.jsx(ht,{className:"size-4"})})}),t.jsx(xs,{children:r})]})}function bs({className:e,...r}){return t.jsx(vs,{"data-slot":"select-scroll-up-button",className:A("flex cursor-default items-center justify-center py-1",e),...r,children:t.jsx(yn,{className:"size-4"})})}function ws({className:e,...r}){return t.jsx(Ss,{"data-slot":"select-scroll-down-button",className:A("flex cursor-default items-center justify-center py-1",e),...r,children:t.jsx(pt,{className:"size-4"})})}function Ue(e,r){const n=a.useRef(void 0);return a.useCallback((...o)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{e(...o)},r)},[e,r])}const Cs=e=>{const{activeAxis:r,axisOptions:n,selectedTraceIndex:o,onTraceEdit:s,onAxisOptionClick:i,traces:l,uploadedFiles:c,onTraceDelete:d,onTraceSettingsItemEdit:u}=e,h=Ue(u,1e3),p=a.useMemo(()=>l.length?l.map((f,v)=>{var C,m,x,g,S,b,N,R;return t.jsxs("div",{className:A("flex flex-col bg-background-light p-3 rounded-lg border",v===o?"border-primary":""),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"color",className:"w-4 h-4 aspect-square flex-shrink-0 rounded-full cursor-pointer",defaultValue:f.settings.color,onChange:M=>h("color",M.target.value,v)}),t.jsx(oe,{defaultValue:f.settings.name,onChange:M=>h("name",M.target.value,v),className:"font-medium bg-transparent border-none p-0 focus:ring-0"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{if(v===o)return s(null);s(v)},children:v===o?t.jsx(ht,{className:"h-4 w-4"}):t.jsx(Yr,{className:"h-4 w-4"})}),t.jsx(Z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{console.log("traceIndex",v),d(v)},children:t.jsx(qr,{className:"h-4 w-4"})})]})]}),(f==null?void 0:f.x)&&t.jsxs("div",{className:"text-sm text-accent-foreground",children:[t.jsx("span",{className:"font-semibold",children:"X: "}),t.jsxs("span",{className:"text-primary",children:[((x=(m=c[((C=f==null?void 0:f.x)==null?void 0:C.fileId)??""])==null?void 0:m.name)==null?void 0:x.slice(0,20))+"..."," :"," "]}),t.jsx("span",{style:{color:f.settings.color},children:(g=f==null?void 0:f.x)==null?void 0:g.column})]}),(f==null?void 0:f.y)&&t.jsxs("div",{className:"text-sm text-accent-foreground",children:[t.jsx("span",{className:"font-semibold",children:"Y: "}),t.jsxs("span",{className:"text-primary",children:[((N=(b=c[((S=f==null?void 0:f.y)==null?void 0:S.fileId)??""])==null?void 0:b.name)==null?void 0:N.slice(0,20))+"..."," :"," "]}),t.jsx("span",{style:{color:f.settings.color},children:(R=f==null?void 0:f.y)==null?void 0:R.column})]})]},v)}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-lg font-semibold mb-0",children:"Traces"}),t.jsx("p",{className:"text-sm text-accent-foreground",children:"Your selections will appear here"})]}),[d,s,h,o,l,c]);return t.jsxs("div",{className:"h-[135px] flex bg-background-light border-b-2 rounded-lg rounded-b-none",children:[t.jsx("div",{className:A("w-3/4 p-2 h-auto overflow-y-auto",l.length&&"grid grid-cols-1 gap-2 md:grid-cols-2"),children:p}),t.jsxs("div",{className:"w-1/4 border-l flex flex-col justify-between gap-5 p-2",children:[t.jsx(It,{value:r,onValueChange:f=>i(f),className:"w-full",children:t.jsx(jt,{className:"w-full flex",children:n.map(f=>t.jsxs(Et,{value:f,className:"capitalize w-full",children:[f,"-axis"]},f))})}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"algorithm-select",className:"block text-sm font-medium text-foreground mb-1",children:"Auto Selection Algorithm"}),t.jsxs(nr,{value:"",children:[t.jsx(or,{id:"algorithm-select",className:"w-full",children:t.jsx(sr,{placeholder:"Select algorithm"})}),t.jsxs(ar,{children:[t.jsx(Ne,{value:"linear",children:"Linear"}),t.jsx(Ne,{value:"logarithmic",children:"Logarithmic"}),t.jsx(Ne,{value:"exponential",children:"Exponential"})]})]})]})]})]})},ys=a.memo(Cs),Ts=e=>{const{isFileColumnCollapsed:r,selectedFileId:n,setSelectedFileId:o,setIsFileColumnCollapsed:s,uploadedFiles:i,dataGridProps:l}=e,{theme:c}=Xr(),d=a.useMemo(()=>Object.entries(i).map(([u,h])=>t.jsx("li",{children:t.jsx(Z,{variant:n===u?"default":"outline",className:A("h-auto w-full overflow-hidden transition-all duration-300 shadow-sm hover:shadow-sm"),onClick:()=>o(u),children:t.jsx("span",{className:"w-full text-ellipsis overflow-hidden font-medium ",children:h==null?void 0:h.name})})},u)),[n,o,i]);return t.jsxs("div",{className:"flex-grow flex",children:[t.jsxs("div",{className:`relative py-3 px-2 flex flex-col gap-4 bg-background-light transition-all duration-300 border-r rounded-bl-lg ${r?"w-12":"w-48"}`,children:[t.jsx(Z,{variant:"ghost",className:"p-2 absolute right-1 top-1",onClick:()=>s(!r),children:r?t.jsx(dt,{className:"h-6 w-6"}):t.jsx(ct,{className:"h-6 w-6"})}),!r&&t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"font-semibold mb-0 text-sm",children:"Uploaded files"}),t.jsx("ul",{className:"space-y-2 text-sm text-accent-foreground w-full",children:d})]})]}),t.jsx("div",{className:A("flex-grow bg-background-light overflow-y-auto ag-theme-quartz [&_.ag-root-wrapper]:rounded-none [&_.ag-root-wrapper]:border-none",c==="dark"?"ag-theme-quartz-dark":"ag-theme-quartz"),children:n?t.jsx(pn,{...l}):t.jsx("div",{className:"flex justify-center items-center h-full w-full",children:t.jsx("h3",{className:"text-lg font-semibold mb-1 text-foreground",children:"Select a file to view its data."})})})]})},Ns=a.memo(Ts),Is=["#ff0000","#0000ff","#ff00ff","#800000","#808000","#008000","#008080","#800080","#808080"],js=[["bg-[#ff0000]","bg-[#ff0000]/5","bg-[#ff0000]/10","bg-[#ff0000]/20","bg-[#ff0000]/30","bg-[#ff0000]/40","bg-[#ff0000]/50","bg-[#ff0000]/60","bg-[#ff0000]/70","bg-[#ff0000]/80","bg-[#ff0000]/90"],["bg-[#0000ff]","bg-[#0000ff]/5","bg-[#0000ff]/10","bg-[#0000ff]/20","bg-[#0000ff]/30","bg-[#0000ff]/40","bg-[#0000ff]/50","bg-[#0000ff]/60","bg-[#0000ff]/70","bg-[#0000ff]/80","bg-[#0000ff]/90"],["bg-[#ff00ff]","bg-[#ff00ff]/5","bg-[#ff00ff]/10","bg-[#ff00ff]/20","bg-[#ff00ff]/30","bg-[#ff00ff]/40","bg-[#ff00ff]/50","bg-[#ff00ff]/60","bg-[#ff00ff]/70","bg-[#ff00ff]/80","bg-[#ff00ff]/90"],["bg-[#800000]","bg-[#800000]/5","bg-[#800000]/10","bg-[#800000]/20","bg-[#800000]/30","bg-[#800000]/40","bg-[#800000]/50","bg-[#800000]/60","bg-[#800000]/70","bg-[#800000]/80","bg-[#800000]/90"],["bg-[#808000]","bg-[#808000]/5","bg-[#808000]/10","bg-[#808000]/20","bg-[#808000]/30","bg-[#808000]/40","bg-[#808000]/50","bg-[#808000]/60","bg-[#808000]/70","bg-[#808000]/80","bg-[#808000]/90"],["bg-[#008000]","bg-[#008000]/5","bg-[#008000]/10","bg-[#008000]/20","bg-[#008000]/30","bg-[#008000]/40","bg-[#008000]/50","bg-[#008000]/60","bg-[#008000]/70","bg-[#008000]/80","bg-[#008000]/90"],["bg-[#008080]","bg-[#008080]/5","bg-[#008080]/10","bg-[#008080]/20","bg-[#008080]/30","bg-[#008080]/40","bg-[#008080]/50","bg-[#008080]/60","bg-[#008080]/70","bg-[#008080]/80","bg-[#008080]/90"],["bg-[#800080]","bg-[#800080]/5","bg-[#800080]/10","bg-[#800080]/20","bg-[#800080]/30","bg-[#800080]/40","bg-[#800080]/50","bg-[#800080]/60","bg-[#800080]/70","bg-[#800080]/80","bg-[#800080]/90"],["bg-[#808080]","bg-[#808080]/5","bg-[#808080]/10","bg-[#808080]/20","bg-[#808080]/30","bg-[#808080]/40","bg-[#808080]/50","bg-[#808080]/60","bg-[#808080]/70","bg-[#808080]/80","bg-[#808080]/90"]];function st(e,r){const n=js.find(s=>s[0].includes(e));if(!n)return null;const o=Math.min(Math.floor(r/10),10);return n[o]}function Es(e){const{chartType:r,allTraces:n,completeTraces:o,addOrUpdateTrace:s}=e,i=Te(_=>_.files),l=a.useMemo(()=>{const{xRequired:_,yRequired:w}=mt[r],y=[];return _&&y.push("x"),w&&y.push("y"),y},[r]),[c,d]=a.useState(""),[u,h]=a.useState(l[0]),[p,f]=a.useState(null),[v,C]=a.useState(null),m=o.length,x=p===null?m:p,g=a.useMemo(()=>{var _;return((_=i[c])==null?void 0:_.data)??[]},[c,i]),S=a.useMemo(()=>g.reduce((w,y)=>(Object.keys(y).forEach(T=>{w.includes(T)||w.push(T)}),w),[]).map(w=>({field:w,cellClass:()=>{if(w===v)return"cursor-pointer bg-primary/10";const y=n.find(T=>{var E,L;return((E=T.x)==null?void 0:E.fileId)===c&&T.x.column===w||((L=T.y)==null?void 0:L.fileId)===c&&T.y.column===w});return y?`cursor-pointer ${st(y.settings.color,20)}`:"cursor-pointer"},headerClass:()=>{if(w===v)return"bg-primary/10 hover:!bg-primary/10 cursor-pointer";const y=n.find(T=>{var E,L;return((E=T.x)==null?void 0:E.fileId)===c&&T.x.column===w||((L=T.y)==null?void 0:L.fileId)===c&&T.y.column===w});return y?`cursor-pointer hover:!bg-primary ${st(y.settings.color,20)}`:"cursor-pointer"}})),[n,g,v,c]),b=a.useMemo(()=>({editable:!1,filter:!1,resizable:!0}),[]),N=a.useCallback(_=>{s({[u]:{fileId:c,column:_.colDef.field}},x)},[s,u,c,x]),R=a.useCallback(_=>{C(_.colDef.field||null)},[]),M=a.useCallback(()=>{C(null)},[]),P=a.useCallback(_=>{C(_.column.getId()||null)},[]),G=a.useCallback(()=>{C(null)},[]);return{dataGridProps:{rowData:g,columnDefs:S,defaultColDef:b,suppressRowClickSelection:!0,suppressCellFocus:!0,suppressRowHoverHighlight:!0,suppressHeaderFocus:!0,onCellClicked:N,onCellMouseOver:R,onCellMouseOut:M,onColumnHeaderMouseOver:P,onColumnHeaderMouseLeave:G},defaultTraceIndex:m,selectedTraceIndex:p,setSelectedTraceIndex:f,uploadedFiles:i,selectedFileId:c,axisOptions:l,activeAxis:u,setActiveAxis:h,setSelectedFileId:d}}function Rs(){const[e,r]=a.useState(!1),[n,o]=a.useState(!1);return{isFileColumnCollapsed:e,setIsFileColumnCollapsed:r,isChartColumnCollapsed:n,setIsChartColumnCollapsed:o}}const As=e=>{const{addOrUpdateTrace:r,chartType:n,allTraces:o,completeTraces:s,deleteTrace:i,editTraceSettingsItem:l}=e,{uploadedFiles:c,selectedFileId:d,activeAxis:u,axisOptions:h,selectedTraceIndex:p,setSelectedTraceIndex:f,setActiveAxis:v,setSelectedFileId:C,dataGridProps:m}=Es({chartType:n,allTraces:o,completeTraces:s,addOrUpdateTrace:r}),{isFileColumnCollapsed:x,setIsFileColumnCollapsed:g}=Rs();return t.jsxs(t.Fragment,{children:[t.jsx(ys,{activeAxis:u,axisOptions:h,onAxisOptionClick:v,traces:s,uploadedFiles:c,selectedTraceIndex:p,onTraceEdit:f,onTraceDelete:i,onTraceSettingsItemEdit:l}),t.jsx(Ns,{dataGridProps:m,isFileColumnCollapsed:x,setIsFileColumnCollapsed:g,uploadedFiles:c,selectedFileId:d,setSelectedFileId:C})]})},Ps=a.memo(As);var _s="Label",lr=a.forwardRef((e,r)=>t.jsx(B.label,{...e,ref:r,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));lr.displayName=_s;var Ms=lr;function J({className:e,...r}){return t.jsx(Ms,{"data-slot":"label",className:A("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}function ir(e,[r,n]){return Math.min(n,Math.max(r,e))}function ce(e,r,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return r==null?void 0:r(s)}}function ot(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function cr(...e){return r=>{let n=!1;const o=e.map(s=>{const i=ot(s,r);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<o.length;s++){const i=o[s];typeof i=="function"?i():ot(e[s],null)}}}}function le(...e){return a.useCallback(cr(...e),e)}function dr(e,r=[]){let n=[];function o(i,l){const c=a.createContext(l),d=n.length;n=[...n,l];const u=p=>{var g;const{scope:f,children:v,...C}=p,m=((g=f==null?void 0:f[e])==null?void 0:g[d])||c,x=a.useMemo(()=>C,Object.values(C));return t.jsx(m.Provider,{value:x,children:v})};u.displayName=i+"Provider";function h(p,f){var m;const v=((m=f==null?void 0:f[e])==null?void 0:m[d])||c,C=a.useContext(v);if(C)return C;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(l=>a.createContext(l));return function(c){const d=(c==null?void 0:c[e])||i;return a.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return s.scopeName=e,[o,ks(s,...r)]}function ks(...e){const r=e[0];if(e.length===1)return r;const n=()=>{const o=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const l=o.reduce((c,{useScope:d,scopeName:u})=>{const p=d(i)[`__scope${u}`];return{...c,...p}},{});return a.useMemo(()=>({[`__scope${r.scopeName}`]:l}),[l])}};return n.scopeName=r.scopeName,n}function ur(e){const r=a.useRef(e);return a.useEffect(()=>{r.current=e}),a.useMemo(()=>(...n)=>{var o;return(o=r.current)==null?void 0:o.call(r,...n)},[])}function Ds({prop:e,defaultProp:r,onChange:n=()=>{}}){const[o,s]=Ls({defaultProp:r,onChange:n}),i=e!==void 0,l=i?e:o,c=ur(n),d=a.useCallback(u=>{if(i){const p=typeof u=="function"?u(e):u;p!==e&&c(p)}else s(u)},[i,e,s,c]);return[l,d]}function Ls({defaultProp:e,onChange:r}){const n=a.useState(e),[o]=n,s=a.useRef(o),i=ur(r);return a.useEffect(()=>{s.current!==o&&(i(o),s.current=o)},[o,s,i]),n}var Os=a.createContext(void 0);function Vs(e){const r=a.useContext(Os);return e||r||"ltr"}function Fs(e){const r=a.useRef({value:e,previous:e});return a.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}var $s=globalThis!=null&&globalThis.document?a.useLayoutEffect:()=>{};function Bs(e){const[r,n]=a.useState(void 0);return $s(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let l,c;if("borderBoxSize"in i){const d=i.borderBoxSize,u=Array.isArray(d)?d[0]:d;l=u.inlineSize,c=u.blockSize}else l=e.offsetWidth,c=e.offsetHeight;n({width:l,height:c})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else n(void 0)},[e]),r}function Ke(e){const r=Hs(e),n=a.forwardRef((o,s)=>{const{children:i,...l}=o,c=a.Children.toArray(i),d=c.find(Gs);if(d){const u=d.props.children,h=c.map(p=>p===d?a.Children.count(u)>1?a.Children.only(null):a.isValidElement(u)?u.props.children:null:p);return t.jsx(r,{...l,ref:s,children:a.isValidElement(u)?a.cloneElement(u,void 0,h):null})}return t.jsx(r,{...l,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function Hs(e){const r=a.forwardRef((n,o)=>{const{children:s,...i}=n;if(a.isValidElement(s)){const l=Ks(s),c=Us(i,s.props);return s.type!==a.Fragment&&(c.ref=o?cr(o,l):l),a.cloneElement(s,c)}return a.Children.count(s)>1?a.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var zs=Symbol("radix.slottable");function Gs(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===zs}function Us(e,r){const n={...r};for(const o in r){const s=e[o],i=r[o];/^on[A-Z]/.test(o)?s&&i?n[o]=(...c)=>{i(...c),s(...c)}:s&&(n[o]=s):o==="style"?n[o]={...s,...i}:o==="className"&&(n[o]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function Ks(e){var o,s;let r=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?e.ref:(r=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Ws=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_e=Ws.reduce((e,r)=>{const n=Ke(`Primitive.${r}`),o=a.forwardRef((s,i)=>{const{asChild:l,...c}=s,d=l?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(d,{...c,ref:i})});return o.displayName=`Primitive.${r}`,{...e,[r]:o}},{});function Ys(e){const r=e+"CollectionProvider",[n,o]=dr(r),[s,i]=n(r,{collectionRef:{current:null},itemMap:new Map}),l=m=>{const{scope:x,children:g}=m,S=se.useRef(null),b=se.useRef(new Map).current;return t.jsx(s,{scope:x,itemMap:b,collectionRef:S,children:g})};l.displayName=r;const c=e+"CollectionSlot",d=Ke(c),u=se.forwardRef((m,x)=>{const{scope:g,children:S}=m,b=i(c,g),N=le(x,b.collectionRef);return t.jsx(d,{ref:N,children:S})});u.displayName=c;const h=e+"CollectionItemSlot",p="data-radix-collection-item",f=Ke(h),v=se.forwardRef((m,x)=>{const{scope:g,children:S,...b}=m,N=se.useRef(null),R=le(x,N),M=i(h,g);return se.useEffect(()=>(M.itemMap.set(N,{ref:N,...b}),()=>void M.itemMap.delete(N))),t.jsx(f,{[p]:"",ref:R,children:S})});v.displayName=h;function C(m){const x=i(e+"CollectionConsumer",m);return se.useCallback(()=>{const S=x.collectionRef.current;if(!S)return[];const b=Array.from(S.querySelectorAll(`[${p}]`));return Array.from(x.itemMap.values()).sort((M,P)=>b.indexOf(M.ref.current)-b.indexOf(P.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:l,Slot:u,ItemSlot:v},C,o]}var fr=["PageUp","PageDown"],mr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pr={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ue="Slider",[We,qs,Xs]=Ys(ue),[hr,Bo]=dr(ue,[Xs]),[Js,Me]=hr(ue),xr=a.forwardRef((e,r)=>{const{name:n,min:o=0,max:s=100,step:i=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:u=[o],value:h,onValueChange:p=()=>{},onValueCommit:f=()=>{},inverted:v=!1,form:C,...m}=e,x=a.useRef(new Set),g=a.useRef(0),b=l==="horizontal"?Zs:Qs,[N=[],R]=Ds({prop:h,defaultProp:u,onChange:y=>{var E;(E=[...x.current][g.current])==null||E.focus(),p(y)}}),M=a.useRef(N);function P(y){const T=so(N,y);w(y,T)}function G(y){w(y,g.current)}function _(){const y=M.current[g.current];N[g.current]!==y&&f(N)}function w(y,T,{commit:E}={commit:!1}){const L=io(i),U=co(Math.round((y-o)/i)*i+o,L),$=ir(U,[o,s]);R((H=[])=>{const z=ro(H,$,T);if(lo(z,d*i)){g.current=z.indexOf($);const W=String(z)!==String(H);return W&&E&&f(z),W?z:H}else return H})}return t.jsx(Js,{scope:e.__scopeSlider,name:n,disabled:c,min:o,max:s,valueIndexToChangeRef:g,thumbs:x.current,values:N,orientation:l,form:C,children:t.jsx(We.Provider,{scope:e.__scopeSlider,children:t.jsx(We.Slot,{scope:e.__scopeSlider,children:t.jsx(b,{"aria-disabled":c,"data-disabled":c?"":void 0,...m,ref:r,onPointerDown:ce(m.onPointerDown,()=>{c||(M.current=N)}),min:o,max:s,inverted:v,onSlideStart:c?void 0:P,onSlideMove:c?void 0:G,onSlideEnd:c?void 0:_,onHomeKeyDown:()=>!c&&w(o,0,{commit:!0}),onEndKeyDown:()=>!c&&w(s,N.length-1,{commit:!0}),onStepKeyDown:({event:y,direction:T})=>{if(!c){const U=fr.includes(y.key)||y.shiftKey&&mr.includes(y.key)?10:1,$=g.current,H=N[$],z=i*U*T;w(H+z,$,{commit:!0})}}})})})})});xr.displayName=ue;var[gr,vr]=hr(ue,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Zs=a.forwardRef((e,r)=>{const{min:n,max:o,dir:s,inverted:i,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:u,...h}=e,[p,f]=a.useState(null),v=le(r,b=>f(b)),C=a.useRef(void 0),m=Vs(s),x=m==="ltr",g=x&&!i||!x&&i;function S(b){const N=C.current||p.getBoundingClientRect(),R=[0,N.width],P=et(R,g?[n,o]:[o,n]);return C.current=N,P(b-N.left)}return t.jsx(gr,{scope:e.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:t.jsx(Sr,{dir:m,"data-orientation":"horizontal",...h,ref:v,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const N=S(b.clientX);l==null||l(N)},onSlideMove:b=>{const N=S(b.clientX);c==null||c(N)},onSlideEnd:()=>{C.current=void 0,d==null||d()},onStepKeyDown:b=>{const R=pr[g?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:R?-1:1})}})})}),Qs=a.forwardRef((e,r)=>{const{min:n,max:o,inverted:s,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,h=a.useRef(null),p=le(r,h),f=a.useRef(void 0),v=!s;function C(m){const x=f.current||h.current.getBoundingClientRect(),g=[0,x.height],b=et(g,v?[o,n]:[n,o]);return f.current=x,b(m-x.top)}return t.jsx(gr,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:t.jsx(Sr,{"data-orientation":"vertical",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const x=C(m.clientY);i==null||i(x)},onSlideMove:m=>{const x=C(m.clientY);l==null||l(x)},onSlideEnd:()=>{f.current=void 0,c==null||c()},onStepKeyDown:m=>{const g=pr[v?"from-bottom":"from-top"].includes(m.key);d==null||d({event:m,direction:g?-1:1})}})})}),Sr=a.forwardRef((e,r)=>{const{__scopeSlider:n,onSlideStart:o,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:d,...u}=e,h=Me(ue,n);return t.jsx(_e.span,{...u,ref:r,onKeyDown:ce(e.onKeyDown,p=>{p.key==="Home"?(l(p),p.preventDefault()):p.key==="End"?(c(p),p.preventDefault()):fr.concat(mr).includes(p.key)&&(d(p),p.preventDefault())}),onPointerDown:ce(e.onPointerDown,p=>{const f=p.target;f.setPointerCapture(p.pointerId),p.preventDefault(),h.thumbs.has(f)?f.focus():o(p)}),onPointerMove:ce(e.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&s(p)}),onPointerUp:ce(e.onPointerUp,p=>{const f=p.target;f.hasPointerCapture(p.pointerId)&&(f.releasePointerCapture(p.pointerId),i(p))})})}),br="SliderTrack",wr=a.forwardRef((e,r)=>{const{__scopeSlider:n,...o}=e,s=Me(br,n);return t.jsx(_e.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...o,ref:r})});wr.displayName=br;var Ye="SliderRange",Cr=a.forwardRef((e,r)=>{const{__scopeSlider:n,...o}=e,s=Me(Ye,n),i=vr(Ye,n),l=a.useRef(null),c=le(r,l),d=s.values.length,u=s.values.map(f=>Tr(f,s.min,s.max)),h=d>1?Math.min(...u):0,p=100-Math.max(...u);return t.jsx(_e.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...o,ref:c,style:{...e.style,[i.startEdge]:h+"%",[i.endEdge]:p+"%"}})});Cr.displayName=Ye;var qe="SliderThumb",yr=a.forwardRef((e,r)=>{const n=qs(e.__scopeSlider),[o,s]=a.useState(null),i=le(r,c=>s(c)),l=a.useMemo(()=>o?n().findIndex(c=>c.ref.current===o):-1,[n,o]);return t.jsx(eo,{...e,ref:i,index:l})}),eo=a.forwardRef((e,r)=>{const{__scopeSlider:n,index:o,name:s,...i}=e,l=Me(qe,n),c=vr(qe,n),[d,u]=a.useState(null),h=le(r,S=>u(S)),p=d?l.form||!!d.closest("form"):!0,f=Bs(d),v=l.values[o],C=v===void 0?0:Tr(v,l.min,l.max),m=no(o,l.values.length),x=f==null?void 0:f[c.size],g=x?oo(x,C,c.direction):0;return a.useEffect(()=>{if(d)return l.thumbs.add(d),()=>{l.thumbs.delete(d)}},[d,l.thumbs]),t.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${C}% + ${g}px)`},children:[t.jsx(We.ItemSlot,{scope:e.__scopeSlider,children:t.jsx(_e.span,{role:"slider","aria-label":e["aria-label"]||m,"aria-valuemin":l.min,"aria-valuenow":v,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:h,style:v===void 0?{display:"none"}:e.style,onFocus:ce(e.onFocus,()=>{l.valueIndexToChangeRef.current=o})})}),p&&t.jsx(to,{name:s??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:v},o)]})});yr.displayName=qe;var to=e=>{const{value:r,...n}=e,o=a.useRef(null),s=Fs(r);return a.useEffect(()=>{const i=o.current,l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==r&&d){const u=new Event("input",{bubbles:!0});d.call(i,r),i.dispatchEvent(u)}},[s,r]),t.jsx("input",{style:{display:"none"},...n,ref:o,defaultValue:r})};function ro(e=[],r,n){const o=[...e];return o[n]=r,o.sort((s,i)=>s-i)}function Tr(e,r,n){const i=100/(n-r)*(e-r);return ir(i,[0,100])}function no(e,r){return r>2?`Value ${e+1} of ${r}`:r===2?["Minimum","Maximum"][e]:void 0}function so(e,r){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-r)),o=Math.min(...n);return n.indexOf(o)}function oo(e,r,n){const o=e/2,i=et([0,50],[0,o]);return(o-i(r)*n)*n}function ao(e){return e.slice(0,-1).map((r,n)=>e[n+1]-r)}function lo(e,r){if(r>0){const n=ao(e);return Math.min(...n)>=r}return!0}function et(e,r){return n=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const o=(r[1]-r[0])/(e[1]-e[0]);return r[0]+o*(n-e[0])}}function io(e){return(String(e).split(".")[1]||"").length}function co(e,r){const n=Math.pow(10,r);return Math.round(e*n)/n}var uo=xr,fo=wr,mo=Cr,po=yr;function ho({className:e,defaultValue:r,value:n,min:o=0,max:s=100,...i}){const l=a.useMemo(()=>Array.isArray(n)?n:Array.isArray(r)?r:[o,s],[n,r,o,s]);return t.jsxs(uo,{"data-slot":"slider",defaultValue:r,value:n,min:o,max:s,className:A("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[t.jsx(fo,{"data-slot":"slider-track",className:A("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:t.jsx(mo,{"data-slot":"slider-range",className:A("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:l.length},(c,d)=>t.jsx(po,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},d))]})}var tt="Switch",[xo,Ho]=Xe(tt),[go,vo]=xo(tt),Nr=a.forwardRef((e,r)=>{const{__scopeSwitch:n,name:o,checked:s,defaultChecked:i,required:l,disabled:c,value:d="on",onCheckedChange:u,form:h,...p}=e,[f,v]=a.useState(null),C=X(r,b=>v(b)),m=a.useRef(!1),x=f?h||!!f.closest("form"):!0,[g=!1,S]=Ie({prop:s,defaultProp:i,onChange:u});return t.jsxs(go,{scope:n,checked:g,disabled:c,children:[t.jsx(B.button,{type:"button",role:"switch","aria-checked":g,"aria-required":l,"data-state":Er(g),"data-disabled":c?"":void 0,disabled:c,value:d,...p,ref:C,onClick:F(e.onClick,b=>{S(N=>!N),x&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})}),x&&t.jsx(So,{control:f,bubbles:!m.current,name:o,value:d,checked:g,required:l,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});Nr.displayName=tt;var Ir="SwitchThumb",jr=a.forwardRef((e,r)=>{const{__scopeSwitch:n,...o}=e,s=vo(Ir,n);return t.jsx(B.span,{"data-state":Er(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:r})});jr.displayName=Ir;var So=e=>{const{control:r,checked:n,bubbles:o=!0,...s}=e,i=a.useRef(null),l=At(n),c=Jr(r);return a.useEffect(()=>{const d=i.current,u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(l!==n&&p){const f=new Event("click",{bubbles:o});p.call(d,n),d.dispatchEvent(f)}},[l,n,o]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Er(e){return e?"checked":"unchecked"}var bo=Nr,wo=jr;function Co({className:e,...r}){return t.jsx(bo,{"data-slot":"switch",className:A("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",e),...r,children:t.jsx(wo,{"data-slot":"switch-thumb",className:A("bg-white pointer-events-none block size-4 rounded-full ring-0 shadow-lg transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}function rt(e){var r,n,o;switch(e.inputType){case"text":return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),t.jsx(oe,{type:"text",id:e.id,placeholder:e.placeholder,className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValue,onChange:s=>{e.onChangeValue(s.target.value)},...e.inputProps})]},e.id);case"number":return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),t.jsx(oe,{type:"number",id:e.id,placeholder:e.placeholder,className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValue,onChange:s=>{var l;const i=(l=e.inputProps)==null?void 0:l.max;if(i!==void 0){const c=Math.min(Number(s.target.value),Number(i));e.onChangeValue(c.toString()),s.target.value=c.toString();return}e.onChangeValue(s.target.value)},...e.inputProps})]},e.id);case"switch":return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),t.jsx(Co,{id:e.id,defaultChecked:e.defaultValue,onCheckedChange:s=>{e.onChangeValue(s)}})]},e.id);case"select":return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:"legend-position-select",className:"text-sm font-medium ",children:e.label}),t.jsxs(nr,{value:e.defaultValue,onValueChange:s=>{e.onChangeValue(s)},children:[t.jsx(or,{id:e.id,className:"w-[100px]",children:t.jsx(sr,{placeholder:"Select position"})}),t.jsx(ar,{children:(r=e.options)==null?void 0:r.map(s=>t.jsx(Ne,{value:s.value,children:s.label},s.value))})]})]},e.id);case"color":return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),t.jsx(oe,{type:"color",id:e.id,placeholder:e.placeholder,className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValue,onChange:s=>{e.onChangeValue(s.target.value)},...e.inputProps})]},e.id);case"slider":return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),t.jsx(ho,{id:e.id,value:[e.defaultValue],onValueChange:s=>{e.onChangeValue(s==null?void 0:s[0])},min:Number(((n=e.inputProps)==null?void 0:n.min)??0),max:Number(((o=e.inputProps)==null?void 0:o.max)??100)})]},e.id);default:return null}}function yo(e){return t.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[t.jsx(J,{htmlFor:"x-axis-limits",className:"text-sm font-medium",children:e.label}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(J,{htmlFor:`${e.id}-min`,className:"text-sm font-medium",children:"Min"}),t.jsx(oe,{type:"text",placeholder:"Min",className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValueMin,onChange:r=>{e.onChangeMin(r.target.value)}})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(J,{htmlFor:`${e.id}-max`,className:"text-sm font-medium",children:"Max"}),t.jsx(oe,{type:"text",placeholder:"Max",className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValueMax,onChange:r=>{e.onChangeMax(r.target.value)}})]})]})]})}const To=e=>{const{chartSettings:r,onSettingChange:n,settingInputsConfig:o}=e,[s,i]=a.useState(r),l=a.useCallback((d,u)=>{i(h=>({...h,[d]:u})),n(d,u)},[n]),c=a.useMemo(()=>o.map(u=>({...u,defaultValue:s[u.id],onChangeValue:h=>{l(u.id,h)}})).map(u=>rt(u)),[l,s,o]);return t.jsxs("div",{className:"flex-grow flex overflow-y-auto",children:[t.jsx("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6 border-r-2 border-secondary",children:c}),t.jsx("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6"})]})},No=a.memo(To),Io=e=>{const{chartSettings:r,onSettingChange:n,settingInputsConfig:o}=e,[s,i]=a.useState(r),l=a.useCallback((u,h,p)=>{if(u==="x"){const v={...s.xAxisLimits,[h]:p};i(C=>({...C,xAxisLimits:v})),n("xAxisLimits",v);return}const f={...s.yAxisLimits,[h]:p};i(v=>({...v,yAxisLimits:f})),n("yAxisLimits",f)},[s,n]),c=a.useCallback((u,h)=>{i(p=>({...p,[u]:h})),n(u,h)},[n]),d=a.useMemo(()=>Object.entries(o).map(([u,h],p)=>{const f=h.map(v=>{var C,m;if(v.inputType==="min/max"){const x={...v,defaultValueMin:((C=s[v.id])==null?void 0:C.min)||void 0,defaultValueMax:((m=s[v.id])==null?void 0:m.max)||void 0,onChangeMin:g=>{l(u,"min",g)},onChangeMax:g=>{l(u,"max",g)}};return yo(x)}return rt({...v,defaultValue:s[v.id],onChangeValue:x=>{c(v.id,x)}})});return t.jsx("div",{className:A("flex-1 flex flex-col space-y-4 pl-3 pr-6 border-secondary",p<Object.keys(o).length-1?"border-r-2":""),children:f},u)}),[s,c,l,o]);return t.jsx("div",{className:"flex-grow flex overflow-y-auto",children:d})},jo=a.memo(Io),Eo=e=>{var C;const{traces:r,onTraceSettingChange:n,settingInputsConfig:o}=e,[s,i]=a.useState((C=r[0])==null?void 0:C.id),[l,c]=a.useState(""),[d,u]=a.useState(r),h=a.useMemo(()=>d.filter(m=>m.settings.name.toLowerCase().includes(l.toLowerCase())),[d,l]),[p,f]=a.useMemo(()=>{const m=d.findIndex(g=>g.id===s);return[d[m],m]},[d,s]),v=(m,x,g)=>{const S=[...d];S[g]={...S[g],settings:{...S[g].settings,[m]:x}},u(S),n(m,x,g)};return t.jsxs("div",{className:"flex-grow flex overflow-y-auto",children:[t.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6 border-r-2 border-secondary",children:[t.jsx(oe,{type:"text",placeholder:"Search traces...",value:l,onChange:m=>c(m.target.value),className:"sticky top-0 bg-background shadow-sm"}),t.jsx("div",{className:"flex flex-col space-y-2 overflow-y-auto",children:h.map(m=>t.jsxs("div",{className:`
                flex items-center space-x-3 p-2 rounded-lg
                transition-colors duration-200 ease-in-out
                cursor-pointer hover:bg-primary/20
                bg-secondary/40
                ${s===m.id?"!bg-primary/80 !text-background !font-medium shadow-sm":""}
              `,onClick:()=>i(m.id),children:[t.jsx("div",{className:"w-4 h-4 rounded-sm shadow-sm border border-white",style:{backgroundColor:m.settings.color}}),t.jsx("span",{className:"text-sm",children:m.settings.name})]},m.id))})]}),t.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-6 pr-6 overflow-y-auto",children:[!s&&t.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:t.jsx("span",{className:"text-sm",children:"Select a trace on the left to edit its settings"})}),p&&o.map(m=>{const x={...m,defaultValue:p.settings[m.id],onChangeValue:g=>v(m.id,g,f)};return rt(x)})]})]})},Ro=a.memo(Eo),me={GENERAL:{title:"General settings",value:"general-settings"},AXIS:{title:"Axis settings",value:"axis-settings"},SERIES:{title:"Series settings",value:"series-settings"},TOOLTIP:{title:"Tooltip settings",value:"tooltip-settings"}};function at(e){switch(e){case j.LINE:return Se[j.LINE];case j.SCATTER:return Se[j.SCATTER];case j.BAR:return Se[j.BAR];case j.AREA:return Se[j.AREA];default:return Zr}}function Ao(e){switch(e){case j.LINE:return be[j.LINE];case j.SCATTER:return be[j.SCATTER];case j.BAR:return be[j.BAR];case j.AREA:return be[j.AREA];default:return Qr}}function Po(e){switch(e){case j.LINE:return{GENERAL:ye[j.LINE],AXIS:Ce[j.LINE],TRACE:we[j.LINE]};case j.SCATTER:return{GENERAL:ye[j.SCATTER],AXIS:Ce[j.SCATTER],TRACE:we[j.SCATTER]};case j.BAR:return{GENERAL:ye[j.BAR],AXIS:Ce[j.BAR],TRACE:we[j.BAR]};case j.AREA:return{GENERAL:ye[j.AREA],AXIS:Ce[j.AREA],TRACE:we[j.AREA]};default:return{GENERAL:rn,AXIS:tn,TRACE:en}}}const _o=e=>{const{chartSettings:r,setChartSettings:n,traces:o,onTraceSettingChange:s,chartType:i}=e,[l,c]=a.useState(me.GENERAL),d=a.useCallback((f,v)=>{n({...r,[f]:v})},[r,n]),u=Ue(d,1e3),h=Ue(s,1e3),p=a.useMemo(()=>Po(i),[i]);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col space-y-1 border-b-2 rounded-lg rounded-b-none p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-0",children:"Customize Your Chart"}),t.jsx("p",{className:"text-sm text-accent-foreground",children:"Customize your chart with the options below."})]}),t.jsxs("div",{className:"flex-grow flex items-stretch overflow-hidden",children:[t.jsx("ul",{className:"flex flex-col w-[200px] border-r-2",children:Object.values(me).map(f=>t.jsx("li",{onClick:()=>c(f),className:A("px-4 py-3 border-b-2 cursor-pointer hover:bg-primary/20",f.value===l.value?"bg-primary/50 hover:bg-primary/50":""),children:f.title},f.value))}),t.jsxs("div",{className:"flex-grow flex flex-col gap-5 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:l.title}),l.value===me.GENERAL.value&&t.jsx(No,{chartSettings:r,onSettingChange:u,settingInputsConfig:p.GENERAL}),l.value===me.AXIS.value&&t.jsx(jo,{chartSettings:r,onSettingChange:u,settingInputsConfig:p.AXIS}),l.value===me.SERIES.value&&t.jsx(Ro,{onTraceSettingChange:h,traces:o,settingInputsConfig:p.TRACE})]})]})]})},Mo=a.memo(_o);function ko(e){const{onClose:r}=e,{dataManager:n}=nn(),o=Te(w=>w.chartToBeEditedId),s=Te(w=>w.setChartToBeEditedId),i=Te(w=>{var y;return(y=w.charts)==null?void 0:y.find(T=>T.i===o)}),[l,c]=a.useState({type:(i==null?void 0:i.type)??void 0,tracesConfig:(i==null?void 0:i.tracesConfig)??[],chartSettings:(i==null?void 0:i.chartSettings)??at((i==null?void 0:i.type)??"")}),[d,u]=a.useState(i?Y.DATA_SELECT.value:Y.CHART_TYPE_SELECT.value),h=l.type,p=l.chartSettings,f=l.tracesConfig.filter(w=>{if(!h)return!1;const{xRequired:y,yRequired:T}=mt[h];switch(!0){case(y&&T):return!!(w!=null&&w.x&&(w!=null&&w.y));case(y&&!T):return!!(w!=null&&w.x);case(!y&&T):return!!(w!=null&&w.y);default:return!1}}),v=d<=Y.CHART_TYPE_SELECT.value,C=a.useMemo(()=>{switch(d){case Y.CHART_TYPE_SELECT.value:return!l.type;case Y.DATA_SELECT.value:return!f.length;case Y.CUSTOMIZATION.value:return!1;default:return!1}},[l.type,f.length,d]),m=d>=Y.CUSTOMIZATION.value,x=a.useCallback(w=>{switch(!0){case w===Y.CHART_TYPE_SELECT.value:return!1;case w===Y.DATA_SELECT.value:return!l.type;case w===Y.CUSTOMIZATION.value:return!f.length;default:return!1}},[l.type,f.length]),g=a.useCallback(w=>{c(y=>({...y,type:w,chartSettings:at(w)})),u(y=>y+1)},[]),S=a.useCallback(w=>{c(y=>({...y,chartSettings:{...y.chartSettings,...w}}))},[]),b=a.useCallback((w,y)=>{h&&c(T=>{switch(!0){case y===T.tracesConfig.length:return{...T,tracesConfig:[...T.tracesConfig,{...w,settings:{...Ao(h),name:"Trace "+T.tracesConfig.length,color:Is[y]},id:sn()}]};case(y>-1&&y<T.tracesConfig.length):return{...T,tracesConfig:T.tracesConfig.map((E,L)=>y!==L?E:{...E,...w})};default:return T}})},[h]),N=a.useCallback(w=>{c(y=>w<0||w>=y.tracesConfig.length?y:{...y,tracesConfig:y.tracesConfig.filter((T,E)=>w!==E)})},[]),R=a.useCallback((w,y,T)=>{c(E=>T<0||T>=E.tracesConfig.length?E:{...E,tracesConfig:E.tracesConfig.map((L,U)=>T!==U?L:{...L,settings:{...L.settings,[w]:y}})})},[]),M=a.useCallback(w=>{u(w)},[]),P=a.useCallback(()=>{v||u(w=>w-1)},[v]),G=a.useCallback(()=>{C||u(w=>w+1)},[C]),_=a.useCallback(async()=>{if(i){n.updateChart(o,{...i,...l}),r();return}n.addChart(l),r()},[l,i,o,n,r]);return{currentStep:d,chartType:h,completeTraces:f,allTraces:l.tracesConfig,traces:f,isLastStep:m,disablePreviousStep:v,disableNextStep:C,chartSettings:p,handleStepChange:M,handleChartTypeSelect:g,handleChartSettingsChange:S,addOrUpdateTrace:b,deleteTrace:N,editTraceSettingsItem:R,finalizeChartSelection:_,handleLoadPreviousStep:P,handleLoadNextStep:G,checkIfStepIsDisabled:x,setEditChartId:s}}function Do(){const[e,r]=a.useState(null),n=a.useCallback(o=>{r(o)},[]);return{chartAPI:e,setChartPreviewRef:n}}function zo(e){const{onClose:r}=e,{chartType:n,currentStep:o,allTraces:s,completeTraces:i,addOrUpdateTrace:l,deleteTrace:c,editTraceSettingsItem:d,handleChartTypeSelect:u,handleStepChange:h,finalizeChartSelection:p,handleLoadNextStep:f,handleLoadPreviousStep:v,checkIfStepIsDisabled:C,isLastStep:m,disablePreviousStep:x,disableNextStep:g,chartSettings:S,handleChartSettingsChange:b,setEditChartId:N}=ko({onClose:r}),{chartAPI:R,setChartPreviewRef:M}=Do(),P=a.useMemo(()=>o!==2&&o!==3||!i.length?null:t.jsx("div",{className:"flex-grow flex flex-col w-full h-full",children:t.jsx(on,{chart:{i:"preview",...an,tracesConfig:i,type:n,chartSettings:S},chartAPI:R,setRef:M})}),[R,S,n,i,o,M]);return t.jsx(fn,{open:!0,onOpenChange:()=>{N(""),r()},children:t.jsx(mn,{className:"!w-[90vw] !max-w-[1800px] h-[90vh] flex flex-col p-0 overflow-hidden gap-0",children:t.jsxs(ln,{children:[t.jsx(Nn,{}),t.jsxs(It,{value:o.toString(),className:"flex-grow flex flex-col",children:[t.jsx(kn,{currentStep:o,onStepChange:h,checkIfStepIsDisabled:C}),o===1&&t.jsx($n,{onChartSelect:u,tabValue:o.toString(),selectedChartType:n}),(o===2||o===3)&&n&&t.jsx(Vn,{tabValue:o.toString(),chartPreviewJsx:P,sectionJsx:o===2?t.jsx(Ps,{chartType:n,completeTraces:i,allTraces:s,addOrUpdateTrace:l,deleteTrace:c,editTraceSettingsItem:d}):t.jsx(Mo,{chartSettings:S,setChartSettings:b,traces:i,onTraceSettingChange:d,chartType:n})})]}),t.jsx(Ln,{isLastStep:m,disablePreviousStep:x,onNext:m?p:f,onPrevious:v,disableNextStep:g})]})})})}export{zo as default};
