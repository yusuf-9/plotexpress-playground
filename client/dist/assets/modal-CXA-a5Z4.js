import{c as he,r as a,j as s,u as lt,a as Ie,b as Xe,d as Ee,P as B,e as it,R as Rs,I as As,f as F,g as Ps,h as A,C as j,i as _s,B as Z,k as ct,l as dt,m as Ms,n as ut,o as ks,p as Ds,q as X,A as Ls,s as Q,t as Os,v as ft,V as Vs,w as Fs,x as $s,y as Bs,z as Hs,S as zs,F as Gs,D as Us,E as Ks,G as nt,H as Ws,J as oe,K as Ys,T as qs,L as Xs,M as Te,N as mt,O as re,Q as Js,U as Zs,W as be,X as Qs,Y as Se,Z as en,_ as tn,$ as sn,a0 as we,a1 as Ce,a2 as ye,a3 as nn,a4 as rn,a5 as on,a6 as an,a7 as ln,a8 as cn}from"./index-ACrJy655.js";import{D as dn,a as un,b as fn,c as mn,d as pn}from"./dialog-BqB98fxh.js";import{C as pt,D as hn}from"./index-D-PDcQbR.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]],gn=he("ChartArea",xn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],bn=he("ChartLine",vn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=[["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["circle",{cx:"18.5",cy:"5.5",r:".5",fill:"currentColor",key:"lysivs"}],["circle",{cx:"11.5",cy:"11.5",r:".5",fill:"currentColor",key:"byv1b8"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["circle",{cx:"17.5",cy:"14.5",r:".5",fill:"currentColor",key:"1gjh6j"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]],wn=he("ChartScatter",Sn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ht=he("Check",Cn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Tn=he("ChevronUp",yn),Nn=()=>s.jsxs(dn,{className:"px-6 py-4",children:[s.jsx(un,{children:"Create a New Chart"}),s.jsx(fn,{children:"Follow the steps to create your custom chart."})]}),In=a.memo(Nn);var Je="Tabs",[jn,Bo]=Xe(Je,[it]),xt=it(),[En,Ze]=jn(Je),gt=a.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,onValueChange:r,defaultValue:i,orientation:l="horizontal",dir:c,activationMode:d="automatic",...u}=e,h=lt(c),[p,f]=Ie({prop:o,onChange:r,defaultProp:i});return s.jsx(En,{scope:n,baseId:Ee(),value:p,onValueChange:f,orientation:l,dir:h,activationMode:d,children:s.jsx(B.div,{dir:h,"data-orientation":l,...u,ref:t})})});gt.displayName=Je;var vt="TabsList",bt=a.forwardRef((e,t)=>{const{__scopeTabs:n,loop:o=!0,...r}=e,i=Ze(vt,n),l=xt(n);return s.jsx(Rs,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:o,children:s.jsx(B.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});bt.displayName=vt;var St="TabsTrigger",wt=a.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,disabled:r=!1,...i}=e,l=Ze(St,n),c=xt(n),d=Tt(l.baseId,o),u=Nt(l.baseId,o),h=o===l.value;return s.jsx(As,{asChild:!0,...c,focusable:!r,active:h,children:s.jsx(B.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:d,...i,ref:t,onMouseDown:F(e.onMouseDown,p=>{!r&&p.button===0&&p.ctrlKey===!1?l.onValueChange(o):p.preventDefault()}),onKeyDown:F(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&l.onValueChange(o)}),onFocus:F(e.onFocus,()=>{const p=l.activationMode!=="manual";!h&&!r&&p&&l.onValueChange(o)})})})});wt.displayName=St;var Ct="TabsContent",yt=a.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,forceMount:r,children:i,...l}=e,c=Ze(Ct,n),d=Tt(c.baseId,o),u=Nt(c.baseId,o),h=o===c.value,p=a.useRef(h);return a.useEffect(()=>{const f=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(f)},[]),s.jsx(Ps,{present:r||h,children:({present:f})=>s.jsx(B.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!f,id:u,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:f&&i})})});yt.displayName=Ct;function Tt(e,t){return`${e}-trigger-${t}`}function Nt(e,t){return`${e}-content-${t}`}var Rn=gt,An=bt,Pn=wt,_n=yt;function It({className:e,...t}){return s.jsx(Rn,{"data-slot":"tabs",className:A("flex flex-col gap-2",e),...t})}function jt({className:e,...t}){return s.jsx(An,{"data-slot":"tabs-list",className:A("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",e),...t})}function Et({className:e,...t}){return s.jsx(Pn,{"data-slot":"tabs-trigger",className:A("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Rt({className:e,...t}){return s.jsx(_n,{"data-slot":"tabs-content",className:A("flex-1 outline-none",e),...t})}const Mn=[{icon:_s,label:"Bar",key:j.BAR},{icon:bn,label:"Line",key:j.LINE},{icon:wn,label:"Scatter",key:j.SCATTER},{icon:gn,label:"Area",key:j.AREA}],Y={CHART_TYPE_SELECT:{label:"Choose Chart Type",value:1},DATA_SELECT:{label:"Select Data Source",value:2},CUSTOMIZATION:{label:"Customize",value:3}},kn=e=>{const{currentStep:t,onStepChange:n,checkIfStepIsDisabled:o}=e;return s.jsx(jt,{className:"w-full justify-start h-12 px-6 border-b border-b-secondary bg-primary-foreground",children:Object.values(Y).map(r=>{const i=o(r.value),l=r.value===t;return s.jsxs(Et,{value:r.value.toString(),disabled:i,onClick:()=>n(r.value),className:A("flex-1 h-full data-[state=active]:font-semibold data-[state=active]:shadow-none !bg-primary-foreground transition-all cursor-pointer",i&&"!cursor-not-allowed"),children:[s.jsx("span",{className:A(`mr-2 w-6 h-6 rounded-full ${r.value<=t?"bg-transparent text-primary border border-primary":"bg-foreground/10 text-accent-foreground"} flex items-center justify-center text-sm`,l&&"!bg-primary !text-background !border-primary rounded-full"),children:r.value}),s.jsx("span",{className:r.value<=t?"text-primary":"text-muted-foreground",children:r.label})]},r.value)})})},Dn=a.memo(kn),Ln=e=>{const{disableNextStep:t,onNext:n,onPrevious:o,isLastStep:r,disablePreviousStep:i}=e;return s.jsxs("div",{className:"flex-shrink-0 px-6 py-4 flex justify-between items-center border-t border-t-secondary bg-primary-foreground",children:[s.jsx(Z,{onClick:o,variant:"outline",disabled:i,children:"Previous"}),s.jsx(Z,{variant:"default",disabled:t,onClick:n,children:r?"Finish":"Next"})]})},On=a.memo(Ln),Vn=e=>{const{tabValue:t,sectionJsx:n,chartPreviewJsx:o}=e,[r,i]=a.useState(!0),[l,c]=a.useState(!0),d=()=>{const u=!r;i(u),setTimeout(()=>{c(u)},300)};return s.jsx(Rt,{value:t,className:"flex-grow flex flex-col overflow-hidden",children:s.jsxs("div",{className:"flex flex-grow p-6 space-x-6",children:[s.jsx("div",{className:A("flex-grow flex flex-col bg-background-light rounded-lg shadow-sm border border- transition-all duration-300",r?"w-2/3":"flex-grow"),children:n}),s.jsxs("div",{className:A("bg-background-light py-2 px-1 space-y-6 rounded-lg shadow-sm border border- transition-all duration-300 flex flex-col",r?"w-1/3":"w-16"),children:[s.jsxs("div",{className:"flex items-center p-1",children:[s.jsx(Z,{variant:"ghost",className:"p-2",onClick:d,children:r?s.jsx(dt,{className:"h-6 w-6"}):s.jsx(ct,{className:"h-6 w-6"})}),r&&s.jsx("h4",{className:"font-semibold mb-0 text-xl flex-grow",children:"Chart Preview"})]}),l&&r&&s.jsx("div",{className:A("flex-grow flex w-full items-center relative"),children:o||s.jsxs("div",{className:" absolute w-full top-1/2 -translate-y-1/2 flex flex-col items-center justify-center gap-5",children:[s.jsx(Ms,{className:"text-primary/50 h-20 w-20"}),s.jsx("p",{className:"text-accent-foreground text-center",children:"Select traces on the left to preview chart"})]})})]})]})})},Fn=a.memo(Vn),$n=e=>{const{tabValue:t,onChartSelect:n,selectedChartType:o}=e;return s.jsxs(Rt,{value:t,className:"flex-grow flex flex-col p-6 overflow-y-auto",children:[s.jsx("h2",{className:"text-3xl font-medium text-foreground my-8 text-center tracking-normal",children:"Select Chart Type"}),s.jsx("div",{className:"flex-grow w-full grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 pt-20",children:Mn.map(r=>s.jsxs(Z,{variant:"outline",className:A("h-52 flex flex-col items-center justify-center gap-4 bg-gradient-to-br transition-all duration-300 shadow-sm hover:shadow-md","from-white to-primary/10 hover:from-white hover:to-primary/30","dark:from-secondary dark:to-primary/30 dark:hover:to-primary/80",o===r.key&&"from-primary-light to-primary/50 dark:from-primary/40 dark:to-primary/80 shadow-md"),onClick:()=>n(r.key),children:[s.jsx(r.icon,{className:"!h-16 !w-16 mb-2 text-primary"}),s.jsx("span",{className:"font-medium text-2xl text-foreground",children:r.label})]},r.label))})]})},Bn=a.memo($n);function At(e){const t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Hn=[" ","Enter","ArrowUp","ArrowDown"],zn=[" ","Enter"],xe="Select",[Re,Ae,Gn]=Ds(xe),[de,Ho]=Xe(xe,[Gn,ut]),Pe=ut(),[Un,ee]=de(xe),[Kn,Wn]=de(xe),Pt=e=>{const{__scopeSelect:t,children:n,open:o,defaultOpen:r,onOpenChange:i,value:l,defaultValue:c,onValueChange:d,dir:u,name:h,autoComplete:p,disabled:f,required:v,form:C}=e,m=Pe(t),[x,g]=a.useState(null),[b,S]=a.useState(null),[N,R]=a.useState(!1),M=lt(u),[P=!1,G]=Ie({prop:o,defaultProp:r,onChange:i}),[_,w]=Ie({prop:l,defaultProp:c,onChange:d}),y=a.useRef(null),T=x?C||!!x.closest("form"):!0,[E,L]=a.useState(new Set),U=Array.from(E).map($=>$.props.value).join(";");return s.jsx(ks,{...m,children:s.jsxs(Un,{required:v,scope:t,trigger:x,onTriggerChange:g,valueNode:b,onValueNodeChange:S,valueNodeHasChildren:N,onValueNodeHasChildrenChange:R,contentId:Ee(),value:_,onValueChange:w,open:P,onOpenChange:G,dir:M,triggerPointerDownPosRef:y,disabled:f,children:[s.jsx(Re.Provider,{scope:t,children:s.jsx(Kn,{scope:e.__scopeSelect,onNativeOptionAdd:a.useCallback($=>{L(H=>new Set(H).add($))},[]),onNativeOptionRemove:a.useCallback($=>{L(H=>{const z=new Set(H);return z.delete($),z})},[]),children:n})}),T?s.jsxs(es,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:p,value:_,onChange:$=>w($.target.value),disabled:f,form:C,children:[_===void 0?s.jsx("option",{value:""}):null,Array.from(E)]},U):null]})})};Pt.displayName=xe;var _t="SelectTrigger",Mt=a.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:o=!1,...r}=e,i=Pe(n),l=ee(_t,n),c=l.disabled||o,d=X(t,l.onTriggerChange),u=Ae(n),h=a.useRef("touch"),[p,f,v]=ts(m=>{const x=u().filter(S=>!S.disabled),g=x.find(S=>S.value===l.value),b=ss(x,m,g);b!==void 0&&l.onValueChange(b.value)}),C=m=>{c||(l.onOpenChange(!0),v()),m&&(l.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return s.jsx(Ls,{asChild:!0,...i,children:s.jsx(B.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Qt(l.value)?"":void 0,...r,ref:d,onClick:F(r.onClick,m=>{m.currentTarget.focus(),h.current!=="mouse"&&C(m)}),onPointerDown:F(r.onPointerDown,m=>{h.current=m.pointerType;const x=m.target;x.hasPointerCapture(m.pointerId)&&x.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(C(m),m.preventDefault())}),onKeyDown:F(r.onKeyDown,m=>{const x=p.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(x&&m.key===" ")&&Hn.includes(m.key)&&(C(),m.preventDefault())})})})});Mt.displayName=_t;var kt="SelectValue",Dt=a.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:r,children:i,placeholder:l="",...c}=e,d=ee(kt,n),{onValueNodeHasChildrenChange:u}=d,h=i!==void 0,p=X(t,d.onValueNodeChange);return Q(()=>{u(h)},[u,h]),s.jsx(B.span,{...c,ref:p,style:{pointerEvents:"none"},children:Qt(d.value)?s.jsx(s.Fragment,{children:l}):i})});Dt.displayName=kt;var Yn="SelectIcon",Lt=a.forwardRef((e,t)=>{const{__scopeSelect:n,children:o,...r}=e;return s.jsx(B.span,{"aria-hidden":!0,...r,ref:t,children:o||"â–¼"})});Lt.displayName=Yn;var qn="SelectPortal",Ot=e=>s.jsx(Os,{asChild:!0,...e});Ot.displayName=qn;var ae="SelectContent",Vt=a.forwardRef((e,t)=>{const n=ee(ae,e.__scopeSelect),[o,r]=a.useState();if(Q(()=>{r(new DocumentFragment)},[]),!n.open){const i=o;return i?ft.createPortal(s.jsx(Ft,{scope:e.__scopeSelect,children:s.jsx(Re.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx($t,{...e,ref:t})});Vt.displayName=ae;var q=10,[Ft,te]=de(ae),Xn="SelectContentImpl",$t=a.forwardRef((e,t)=>{const{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:l,side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:p,collisionBoundary:f,collisionPadding:v,sticky:C,hideWhenDetached:m,avoidCollisions:x,...g}=e,b=ee(ae,n),[S,N]=a.useState(null),[R,M]=a.useState(null),P=X(t,I=>N(I)),[G,_]=a.useState(null),[w,y]=a.useState(null),T=Ae(n),[E,L]=a.useState(!1),U=a.useRef(!1);a.useEffect(()=>{if(S)return $s(S)},[S]),Bs();const $=a.useCallback(I=>{const[V,...K]=T().map(D=>D.ref.current),[O]=K.slice(-1),k=document.activeElement;for(const D of I)if(D===k||(D==null||D.scrollIntoView({block:"nearest"}),D===V&&R&&(R.scrollTop=0),D===O&&R&&(R.scrollTop=R.scrollHeight),D==null||D.focus(),document.activeElement!==k))return},[T,R]),H=a.useCallback(()=>$([G,S]),[$,G,S]);a.useEffect(()=>{E&&H()},[E,H]);const{onOpenChange:z,triggerPointerDownPosRef:W}=b;a.useEffect(()=>{if(S){let I={x:0,y:0};const V=O=>{var k,D;I={x:Math.abs(Math.round(O.pageX)-(((k=W.current)==null?void 0:k.x)??0)),y:Math.abs(Math.round(O.pageY)-(((D=W.current)==null?void 0:D.y)??0))}},K=O=>{I.x<=10&&I.y<=10?O.preventDefault():S.contains(O.target)||z(!1),document.removeEventListener("pointermove",V),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",V),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",K,{capture:!0})}}},[S,z,W]),a.useEffect(()=>{const I=()=>z(!1);return window.addEventListener("blur",I),window.addEventListener("resize",I),()=>{window.removeEventListener("blur",I),window.removeEventListener("resize",I)}},[z]);const[ke,ge]=ts(I=>{const V=T().filter(k=>!k.disabled),K=V.find(k=>k.ref.current===document.activeElement),O=ss(V,I,K);O&&setTimeout(()=>O.ref.current.focus())}),De=a.useCallback((I,V,K)=>{const O=!U.current&&!K;(b.value!==void 0&&b.value===V||O)&&(_(I),O&&(U.current=!0))},[b.value]),Le=a.useCallback(()=>S==null?void 0:S.focus(),[S]),ie=a.useCallback((I,V,K)=>{const O=!U.current&&!K;(b.value!==void 0&&b.value===V||O)&&y(I)},[b.value]),ve=o==="popper"?$e:Bt,fe=ve===$e?{side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:p,collisionBoundary:f,collisionPadding:v,sticky:C,hideWhenDetached:m,avoidCollisions:x}:{};return s.jsx(Ft,{scope:n,content:S,viewport:R,onViewportChange:M,itemRefCallback:De,selectedItem:G,onItemLeave:Le,itemTextRefCallback:ie,focusSelectedItem:H,selectedItemText:w,position:o,isPositioned:E,searchRef:ke,children:s.jsx(Hs,{as:zs,allowPinchZoom:!0,children:s.jsx(Gs,{asChild:!0,trapped:b.open,onMountAutoFocus:I=>{I.preventDefault()},onUnmountAutoFocus:F(r,I=>{var V;(V=b.trigger)==null||V.focus({preventScroll:!0}),I.preventDefault()}),children:s.jsx(Us,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:I=>I.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:s.jsx(ve,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:I=>I.preventDefault(),...g,...fe,onPlaced:()=>L(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:F(g.onKeyDown,I=>{const V=I.ctrlKey||I.altKey||I.metaKey;if(I.key==="Tab"&&I.preventDefault(),!V&&I.key.length===1&&ge(I.key),["ArrowUp","ArrowDown","Home","End"].includes(I.key)){let O=T().filter(k=>!k.disabled).map(k=>k.ref.current);if(["ArrowUp","End"].includes(I.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(I.key)){const k=I.target,D=O.indexOf(k);O=O.slice(D+1)}setTimeout(()=>$(O)),I.preventDefault()}})})})})})})});$t.displayName=Xn;var Jn="SelectItemAlignedPosition",Bt=a.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:o,...r}=e,i=ee(ae,n),l=te(ae,n),[c,d]=a.useState(null),[u,h]=a.useState(null),p=X(t,P=>h(P)),f=Ae(n),v=a.useRef(!1),C=a.useRef(!0),{viewport:m,selectedItem:x,selectedItemText:g,focusSelectedItem:b}=l,S=a.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&u&&m&&x&&g){const P=i.trigger.getBoundingClientRect(),G=u.getBoundingClientRect(),_=i.valueNode.getBoundingClientRect(),w=g.getBoundingClientRect();if(i.dir!=="rtl"){const k=w.left-G.left,D=_.left-k,se=P.left-D,ne=P.width+se,Oe=Math.max(ne,G.width),Ve=window.innerWidth-q,Fe=nt(D,[q,Math.max(q,Ve-Oe)]);c.style.minWidth=ne+"px",c.style.left=Fe+"px"}else{const k=G.right-w.right,D=window.innerWidth-_.right-k,se=window.innerWidth-P.right-D,ne=P.width+se,Oe=Math.max(ne,G.width),Ve=window.innerWidth-q,Fe=nt(D,[q,Math.max(q,Ve-Oe)]);c.style.minWidth=ne+"px",c.style.right=Fe+"px"}const y=f(),T=window.innerHeight-q*2,E=m.scrollHeight,L=window.getComputedStyle(u),U=parseInt(L.borderTopWidth,10),$=parseInt(L.paddingTop,10),H=parseInt(L.borderBottomWidth,10),z=parseInt(L.paddingBottom,10),W=U+$+E+z+H,ke=Math.min(x.offsetHeight*5,W),ge=window.getComputedStyle(m),De=parseInt(ge.paddingTop,10),Le=parseInt(ge.paddingBottom,10),ie=P.top+P.height/2-q,ve=T-ie,fe=x.offsetHeight/2,I=x.offsetTop+fe,V=U+$+I,K=W-V;if(V<=ie){const k=y.length>0&&x===y[y.length-1].ref.current;c.style.bottom="0px";const D=u.clientHeight-m.offsetTop-m.offsetHeight,se=Math.max(ve,fe+(k?Le:0)+D+H),ne=V+se;c.style.height=ne+"px"}else{const k=y.length>0&&x===y[0].ref.current;c.style.top="0px";const se=Math.max(ie,U+m.offsetTop+(k?De:0)+fe)+K;c.style.height=se+"px",m.scrollTop=V-ie+m.offsetTop}c.style.margin=`${q}px 0`,c.style.minHeight=ke+"px",c.style.maxHeight=T+"px",o==null||o(),requestAnimationFrame(()=>v.current=!0)}},[f,i.trigger,i.valueNode,c,u,m,x,g,i.dir,o]);Q(()=>S(),[S]);const[N,R]=a.useState();Q(()=>{u&&R(window.getComputedStyle(u).zIndex)},[u]);const M=a.useCallback(P=>{P&&C.current===!0&&(S(),b==null||b(),C.current=!1)},[S,b]);return s.jsx(Qn,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:v,onScrollButtonChange:M,children:s.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(B.div,{...r,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});Bt.displayName=Jn;var Zn="SelectPopperPosition",$e=a.forwardRef((e,t)=>{const{__scopeSelect:n,align:o="start",collisionPadding:r=q,...i}=e,l=Pe(n);return s.jsx(Ks,{...l,...i,ref:t,align:o,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$e.displayName=Zn;var[Qn,Qe]=de(ae,{}),Be="SelectViewport",Ht=a.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:o,...r}=e,i=te(Be,n),l=Qe(Be,n),c=X(t,i.onViewportChange),d=a.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),s.jsx(Re.Slot,{scope:n,children:s.jsx(B.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:F(r.onScroll,u=>{const h=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:f}=l;if(f!=null&&f.current&&p){const v=Math.abs(d.current-h.scrollTop);if(v>0){const C=window.innerHeight-q*2,m=parseFloat(p.style.minHeight),x=parseFloat(p.style.height),g=Math.max(m,x);if(g<C){const b=g+v,S=Math.min(C,b),N=b-S;p.style.height=S+"px",p.style.bottom==="0px"&&(h.scrollTop=N>0?N:0,p.style.justifyContent="flex-end")}}}d.current=h.scrollTop})})})]})});Ht.displayName=Be;var zt="SelectGroup",[er,tr]=de(zt),sr=a.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=Ee();return s.jsx(er,{scope:n,id:r,children:s.jsx(B.div,{role:"group","aria-labelledby":r,...o,ref:t})})});sr.displayName=zt;var Gt="SelectLabel",nr=a.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=tr(Gt,n);return s.jsx(B.div,{id:r.id,...o,ref:t})});nr.displayName=Gt;var je="SelectItem",[rr,Ut]=de(je),Kt=a.forwardRef((e,t)=>{const{__scopeSelect:n,value:o,disabled:r=!1,textValue:i,...l}=e,c=ee(je,n),d=te(je,n),u=c.value===o,[h,p]=a.useState(i??""),[f,v]=a.useState(!1),C=X(t,b=>{var S;return(S=d.itemRefCallback)==null?void 0:S.call(d,b,o,r)}),m=Ee(),x=a.useRef("touch"),g=()=>{r||(c.onValueChange(o),c.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(rr,{scope:n,value:o,disabled:r,textId:m,isSelected:u,onItemTextChange:a.useCallback(b=>{p(S=>S||((b==null?void 0:b.textContent)??"").trim())},[]),children:s.jsx(Re.ItemSlot,{scope:n,value:o,disabled:r,textValue:h,children:s.jsx(B.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...l,ref:C,onFocus:F(l.onFocus,()=>v(!0)),onBlur:F(l.onBlur,()=>v(!1)),onClick:F(l.onClick,()=>{x.current!=="mouse"&&g()}),onPointerUp:F(l.onPointerUp,()=>{x.current==="mouse"&&g()}),onPointerDown:F(l.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:F(l.onPointerMove,b=>{var S;x.current=b.pointerType,r?(S=d.onItemLeave)==null||S.call(d):x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:F(l.onPointerLeave,b=>{var S;b.currentTarget===document.activeElement&&((S=d.onItemLeave)==null||S.call(d))}),onKeyDown:F(l.onKeyDown,b=>{var N;((N=d.searchRef)==null?void 0:N.current)!==""&&b.key===" "||(zn.includes(b.key)&&g(),b.key===" "&&b.preventDefault())})})})})});Kt.displayName=je;var pe="SelectItemText",Wt=a.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:r,...i}=e,l=ee(pe,n),c=te(pe,n),d=Ut(pe,n),u=Wn(pe,n),[h,p]=a.useState(null),f=X(t,g=>p(g),d.onItemTextChange,g=>{var b;return(b=c.itemTextRefCallback)==null?void 0:b.call(c,g,d.value,d.disabled)}),v=h==null?void 0:h.textContent,C=a.useMemo(()=>s.jsx("option",{value:d.value,disabled:d.disabled,children:v},d.value),[d.disabled,d.value,v]),{onNativeOptionAdd:m,onNativeOptionRemove:x}=u;return Q(()=>(m(C),()=>x(C)),[m,x,C]),s.jsxs(s.Fragment,{children:[s.jsx(B.span,{id:d.textId,...i,ref:f}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?ft.createPortal(i.children,l.valueNode):null]})});Wt.displayName=pe;var Yt="SelectItemIndicator",qt=a.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return Ut(Yt,n).isSelected?s.jsx(B.span,{"aria-hidden":!0,...o,ref:t}):null});qt.displayName=Yt;var He="SelectScrollUpButton",Xt=a.forwardRef((e,t)=>{const n=te(He,e.__scopeSelect),o=Qe(He,e.__scopeSelect),[r,i]=a.useState(!1),l=X(t,o.onScrollButtonChange);return Q(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollTop>0;i(u)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),r?s.jsx(Zt,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});Xt.displayName=He;var ze="SelectScrollDownButton",Jt=a.forwardRef((e,t)=>{const n=te(ze,e.__scopeSelect),o=Qe(ze,e.__scopeSelect),[r,i]=a.useState(!1),l=X(t,o.onScrollButtonChange);return Q(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollHeight-d.clientHeight,h=Math.ceil(d.scrollTop)<u;i(h)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),r?s.jsx(Zt,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});Jt.displayName=ze;var Zt=a.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:o,...r}=e,i=te("SelectScrollButton",n),l=a.useRef(null),c=Ae(n),d=a.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return a.useEffect(()=>()=>d(),[d]),Q(()=>{var h;const u=c().find(p=>p.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[c]),s.jsx(B.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:F(r.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(o,50))}),onPointerMove:F(r.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),l.current===null&&(l.current=window.setInterval(o,50))}),onPointerLeave:F(r.onPointerLeave,()=>{d()})})}),or="SelectSeparator",ar=a.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return s.jsx(B.div,{"aria-hidden":!0,...o,ref:t})});ar.displayName=or;var Ge="SelectArrow",lr=a.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=Pe(n),i=ee(Ge,n),l=te(Ge,n);return i.open&&l.position==="popper"?s.jsx(Ws,{...r,...o,ref:t}):null});lr.displayName=Ge;function Qt(e){return e===""||e===void 0}var es=a.forwardRef((e,t)=>{const{value:n,...o}=e,r=a.useRef(null),i=X(t,r),l=At(n);return a.useEffect(()=>{const c=r.current,d=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==n&&h){const p=new Event("change",{bubbles:!0});h.call(c,n),c.dispatchEvent(p)}},[l,n]),s.jsx(Vs,{asChild:!0,children:s.jsx("select",{...o,ref:i,defaultValue:n})})});es.displayName="BubbleSelect";function ts(e){const t=Fs(e),n=a.useRef(""),o=a.useRef(0),r=a.useCallback(l=>{const c=n.current+l;t(c),function d(u){n.current=u,window.clearTimeout(o.current),u!==""&&(o.current=window.setTimeout(()=>d(""),1e3))}(c)},[t]),i=a.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,r,i]}function ss(e,t,n){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let l=ir(e,Math.max(i,0));r.length===1&&(l=l.filter(u=>u!==n));const d=l.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==n?d:void 0}function ir(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var cr=Pt,dr=Mt,ur=Dt,fr=Lt,mr=Ot,pr=Vt,hr=Ht,xr=Kt,gr=Wt,vr=qt,br=Xt,Sr=Jt;function ns({...e}){return s.jsx(cr,{"data-slot":"select",...e})}function rs({...e}){return s.jsx(ur,{"data-slot":"select-value",...e})}function os({className:e,children:t,...n}){return s.jsxs(dr,{"data-slot":"select-trigger",className:A("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-full items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 cursor-pointer",e),...n,children:[t,s.jsx(fr,{asChild:!0,children:s.jsx(pt,{className:"size-4 opacity-50"})})]})}function as({className:e,children:t,position:n="popper",...o}){return s.jsx(mr,{children:s.jsxs(pr,{"data-slot":"select-content",className:A("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...o,children:[s.jsx(wr,{}),s.jsx(hr,{className:A("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),s.jsx(Cr,{})]})})}function Ne({className:e,children:t,...n}){return s.jsxs(xr,{"data-slot":"select-item",className:A("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2 cursor-pointer",e),...n,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(vr,{children:s.jsx(ht,{className:"size-4"})})}),s.jsx(gr,{children:t})]})}function wr({className:e,...t}){return s.jsx(br,{"data-slot":"select-scroll-up-button",className:A("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Tn,{className:"size-4"})})}function Cr({className:e,...t}){return s.jsx(Sr,{"data-slot":"select-scroll-down-button",className:A("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(pt,{className:"size-4"})})}function Ue(e,t){const n=a.useRef(void 0);return a.useCallback((...o)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{e(...o)},t)},[e,t])}const yr=e=>{const{activeAxis:t,axisOptions:n,selectedTraceIndex:o,onTraceEdit:r,onAxisOptionClick:i,traces:l,uploadedFiles:c,onTraceDelete:d,onTraceSettingsItemEdit:u}=e,h=Ue(u,1e3),p=a.useMemo(()=>l.length?l.map((f,v)=>{var C,m,x,g,b,S,N,R;return s.jsxs("div",{className:A("flex flex-col bg-background-light p-3 rounded-lg border",v===o?"border-primary":""),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"color",className:"w-4 h-4 aspect-square flex-shrink-0 rounded-full cursor-pointer",defaultValue:f.settings.color,onChange:M=>h("color",M.target.value,v)}),s.jsx(oe,{defaultValue:f.settings.name,onChange:M=>h("name",M.target.value,v),className:"font-medium bg-transparent border-none p-0 focus:ring-0"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{if(v===o)return r(null);r(v)},children:v===o?s.jsx(ht,{className:"h-4 w-4"}):s.jsx(Ys,{className:"h-4 w-4"})}),s.jsx(Z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{console.log("traceIndex",v),d(v)},children:s.jsx(qs,{className:"h-4 w-4"})})]})]}),(f==null?void 0:f.x)&&s.jsxs("div",{className:"text-sm text-accent-foreground",children:[s.jsx("span",{className:"font-semibold",children:"X: "}),s.jsxs("span",{className:"text-primary",children:[((x=(m=c[((C=f==null?void 0:f.x)==null?void 0:C.fileId)??""])==null?void 0:m.name)==null?void 0:x.slice(0,20))+"..."," :"," "]}),s.jsx("span",{style:{color:f.settings.color},children:(g=f==null?void 0:f.x)==null?void 0:g.column})]}),(f==null?void 0:f.y)&&s.jsxs("div",{className:"text-sm text-accent-foreground",children:[s.jsx("span",{className:"font-semibold",children:"Y: "}),s.jsxs("span",{className:"text-primary",children:[((N=(S=c[((b=f==null?void 0:f.y)==null?void 0:b.fileId)??""])==null?void 0:S.name)==null?void 0:N.slice(0,20))+"..."," :"," "]}),s.jsx("span",{style:{color:f.settings.color},children:(R=f==null?void 0:f.y)==null?void 0:R.column})]})]},v)}):s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-lg font-semibold mb-0",children:"Traces"}),s.jsx("p",{className:"text-sm text-accent-foreground",children:"Your selections will appear here"})]}),[d,r,h,o,l,c]);return s.jsxs("div",{className:"h-[135px] flex bg-background-light border-b-2 rounded-lg rounded-b-none",children:[s.jsx("div",{className:A("w-3/4 p-2 h-auto overflow-y-auto",l.length&&"grid grid-cols-1 gap-2 md:grid-cols-2"),children:p}),s.jsxs("div",{className:"w-1/4 border-l flex flex-col justify-between gap-5 p-2",children:[s.jsx(It,{value:t,onValueChange:f=>i(f),className:"w-full",children:s.jsx(jt,{className:"w-full flex",children:n.map(f=>s.jsxs(Et,{value:f,className:"capitalize w-full",children:[f,"-axis"]},f))})}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"algorithm-select",className:"block text-sm font-medium text-foreground mb-1",children:"Auto Selection Algorithm"}),s.jsxs(ns,{value:"",children:[s.jsx(os,{id:"algorithm-select",className:"w-full",children:s.jsx(rs,{placeholder:"Select algorithm"})}),s.jsxs(as,{children:[s.jsx(Ne,{value:"linear",children:"Linear"}),s.jsx(Ne,{value:"logarithmic",children:"Logarithmic"}),s.jsx(Ne,{value:"exponential",children:"Exponential"})]})]})]})]})]})},Tr=a.memo(yr),Nr=e=>{const{isFileColumnCollapsed:t,selectedFileId:n,setSelectedFileId:o,setIsFileColumnCollapsed:r,uploadedFiles:i,dataGridProps:l}=e,{theme:c}=Xs(),d=a.useMemo(()=>Object.entries(i).map(([u,h])=>s.jsx("li",{children:s.jsx(Z,{variant:n===u?"default":"outline",className:A("h-auto w-full overflow-hidden transition-all duration-300 shadow-sm hover:shadow-sm"),onClick:()=>o(u),children:s.jsx("span",{className:"w-full text-ellipsis overflow-hidden font-medium ",children:h==null?void 0:h.name})})},u)),[n,o,i]);return s.jsxs("div",{className:"flex-grow flex",children:[s.jsxs("div",{className:`relative py-3 px-2 flex flex-col gap-4 bg-background-light transition-all duration-300 border-r rounded-bl-lg ${t?"w-12":"w-48"}`,children:[s.jsx(Z,{variant:"ghost",className:"p-2 absolute right-1 top-1",onClick:()=>r(!t),children:t?s.jsx(dt,{className:"h-6 w-6"}):s.jsx(ct,{className:"h-6 w-6"})}),!t&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"font-semibold mb-0 text-sm",children:"Uploaded files"}),s.jsx("ul",{className:"space-y-2 text-sm text-accent-foreground w-full",children:d})]})]}),s.jsx("div",{className:A("flex-grow bg-background-light overflow-y-auto ag-theme-quartz [&_.ag-root-wrapper]:rounded-none [&_.ag-root-wrapper]:border-none",c==="dark"?"ag-theme-quartz-dark":"ag-theme-quartz"),children:n?s.jsx(hn,{...l}):s.jsx("div",{className:"flex justify-center items-center h-full w-full",children:s.jsx("h3",{className:"text-lg font-semibold mb-1 text-foreground",children:"Select a file to view its data."})})})]})},Ir=a.memo(Nr),jr=["#ff0000","#0000ff","#ff00ff","#800000","#808000","#008000","#008080","#800080","#808080"],Er=[["bg-[#ff0000]","bg-[#ff0000]/5","bg-[#ff0000]/10","bg-[#ff0000]/20","bg-[#ff0000]/30","bg-[#ff0000]/40","bg-[#ff0000]/50","bg-[#ff0000]/60","bg-[#ff0000]/70","bg-[#ff0000]/80","bg-[#ff0000]/90"],["bg-[#0000ff]","bg-[#0000ff]/5","bg-[#0000ff]/10","bg-[#0000ff]/20","bg-[#0000ff]/30","bg-[#0000ff]/40","bg-[#0000ff]/50","bg-[#0000ff]/60","bg-[#0000ff]/70","bg-[#0000ff]/80","bg-[#0000ff]/90"],["bg-[#ff00ff]","bg-[#ff00ff]/5","bg-[#ff00ff]/10","bg-[#ff00ff]/20","bg-[#ff00ff]/30","bg-[#ff00ff]/40","bg-[#ff00ff]/50","bg-[#ff00ff]/60","bg-[#ff00ff]/70","bg-[#ff00ff]/80","bg-[#ff00ff]/90"],["bg-[#800000]","bg-[#800000]/5","bg-[#800000]/10","bg-[#800000]/20","bg-[#800000]/30","bg-[#800000]/40","bg-[#800000]/50","bg-[#800000]/60","bg-[#800000]/70","bg-[#800000]/80","bg-[#800000]/90"],["bg-[#808000]","bg-[#808000]/5","bg-[#808000]/10","bg-[#808000]/20","bg-[#808000]/30","bg-[#808000]/40","bg-[#808000]/50","bg-[#808000]/60","bg-[#808000]/70","bg-[#808000]/80","bg-[#808000]/90"],["bg-[#008000]","bg-[#008000]/5","bg-[#008000]/10","bg-[#008000]/20","bg-[#008000]/30","bg-[#008000]/40","bg-[#008000]/50","bg-[#008000]/60","bg-[#008000]/70","bg-[#008000]/80","bg-[#008000]/90"],["bg-[#008080]","bg-[#008080]/5","bg-[#008080]/10","bg-[#008080]/20","bg-[#008080]/30","bg-[#008080]/40","bg-[#008080]/50","bg-[#008080]/60","bg-[#008080]/70","bg-[#008080]/80","bg-[#008080]/90"],["bg-[#800080]","bg-[#800080]/5","bg-[#800080]/10","bg-[#800080]/20","bg-[#800080]/30","bg-[#800080]/40","bg-[#800080]/50","bg-[#800080]/60","bg-[#800080]/70","bg-[#800080]/80","bg-[#800080]/90"],["bg-[#808080]","bg-[#808080]/5","bg-[#808080]/10","bg-[#808080]/20","bg-[#808080]/30","bg-[#808080]/40","bg-[#808080]/50","bg-[#808080]/60","bg-[#808080]/70","bg-[#808080]/80","bg-[#808080]/90"]];function rt(e,t){const n=Er.find(r=>r[0].includes(e));if(!n)return Rr(e,t);const o=Math.min(Math.floor(t/10),10);return n[o]}function Rr(e,t){var i;if(!/^#([0-9A-Fa-f]{6})$/.test(e)||t<0||t>100)return"";const n=`bg-[${e}]/${t}`,o=n.replace(/[[\]#]/g,"\\$&").replace(/\//g,"\\/");let r=document.getElementById("dynamic-bg-styles");if(r||(r=document.createElement("style"),r.id="dynamic-bg-styles",r.type="text/css",document.head.appendChild(r)),!((i=r.textContent)!=null&&i.includes(o))){const l=`rgba(${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}, ${t/100})`,c=`.${o} { background-color: ${l}; }`;r.textContent+=c}return n}function Ar(e){const{chartType:t,allTraces:n,completeTraces:o,addOrUpdateTrace:r}=e,i=Te(_=>_.files),l=a.useMemo(()=>{const{xRequired:_,yRequired:w}=mt[t],y=[];return _&&y.push("x"),w&&y.push("y"),y},[t]),[c,d]=a.useState(""),[u,h]=a.useState(l[0]),[p,f]=a.useState(null),[v,C]=a.useState(null),m=o.length,x=p===null?m:p,g=a.useMemo(()=>{var _;return((_=i[c])==null?void 0:_.data)??[]},[c,i]),b=a.useMemo(()=>g.reduce((w,y)=>(Object.keys(y).forEach(T=>{w.includes(T)||w.push(T)}),w),[]).map(w=>({field:w,cellClass:()=>{if(w===v)return"cursor-pointer bg-primary/10";const y=n.find(T=>{var E,L;return((E=T.x)==null?void 0:E.fileId)===c&&T.x.column===w||((L=T.y)==null?void 0:L.fileId)===c&&T.y.column===w});return y?`cursor-pointer ${rt(y.settings.color,20)}`:"cursor-pointer"},headerClass:()=>{if(w===v)return"bg-primary/10 hover:!bg-primary/10 cursor-pointer";const y=n.find(T=>{var E,L;return((E=T.x)==null?void 0:E.fileId)===c&&T.x.column===w||((L=T.y)==null?void 0:L.fileId)===c&&T.y.column===w});return y?`cursor-pointer hover:!bg-primary ${rt(y.settings.color,20)}`:"cursor-pointer"}})),[n,g,v,c]),S=a.useMemo(()=>({editable:!1,filter:!1,resizable:!0}),[]),N=a.useCallback(_=>{r({[u]:{fileId:c,column:_.colDef.field}},x),h(w=>w==="x"?"y":"x")},[r,u,c,x]),R=a.useCallback(_=>{C(_.colDef.field||null)},[]),M=a.useCallback(()=>{C(null)},[]),P=a.useCallback(_=>{C(_.column.getId()||null)},[]),G=a.useCallback(()=>{C(null)},[]);return{dataGridProps:{rowData:g,columnDefs:b,defaultColDef:S,suppressRowClickSelection:!0,suppressCellFocus:!0,suppressRowHoverHighlight:!0,suppressHeaderFocus:!0,onCellClicked:N,onCellMouseOver:R,onCellMouseOut:M,onColumnHeaderMouseOver:P,onColumnHeaderMouseLeave:G},defaultTraceIndex:m,selectedTraceIndex:p,setSelectedTraceIndex:f,uploadedFiles:i,selectedFileId:c,axisOptions:l,activeAxis:u,setActiveAxis:h,setSelectedFileId:d}}function Pr(){const[e,t]=a.useState(!1),[n,o]=a.useState(!1);return{isFileColumnCollapsed:e,setIsFileColumnCollapsed:t,isChartColumnCollapsed:n,setIsChartColumnCollapsed:o}}const _r=e=>{const{addOrUpdateTrace:t,chartType:n,allTraces:o,completeTraces:r,deleteTrace:i,editTraceSettingsItem:l}=e,{uploadedFiles:c,selectedFileId:d,activeAxis:u,axisOptions:h,selectedTraceIndex:p,setSelectedTraceIndex:f,setActiveAxis:v,setSelectedFileId:C,dataGridProps:m}=Ar({chartType:n,allTraces:o,completeTraces:r,addOrUpdateTrace:t}),{isFileColumnCollapsed:x,setIsFileColumnCollapsed:g}=Pr();return s.jsxs(s.Fragment,{children:[s.jsx(Tr,{activeAxis:u,axisOptions:h,onAxisOptionClick:v,traces:o,uploadedFiles:c,selectedTraceIndex:p,onTraceEdit:f,onTraceDelete:i,onTraceSettingsItemEdit:l}),s.jsx(Ir,{dataGridProps:m,isFileColumnCollapsed:x,setIsFileColumnCollapsed:g,uploadedFiles:c,selectedFileId:d,setSelectedFileId:C})]})},Mr=a.memo(_r);var kr="Label",ls=a.forwardRef((e,t)=>s.jsx(B.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));ls.displayName=kr;var Dr=ls;function J({className:e,...t}){return s.jsx(Dr,{"data-slot":"label",className:A("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function is(e,[t,n]){return Math.min(n,Math.max(t,e))}function ce(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function ot(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function cs(...e){return t=>{let n=!1;const o=e.map(r=>{const i=ot(r,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<o.length;r++){const i=o[r];typeof i=="function"?i():ot(e[r],null)}}}}function le(...e){return a.useCallback(cs(...e),e)}function ds(e,t=[]){let n=[];function o(i,l){const c=a.createContext(l),d=n.length;n=[...n,l];const u=p=>{var g;const{scope:f,children:v,...C}=p,m=((g=f==null?void 0:f[e])==null?void 0:g[d])||c,x=a.useMemo(()=>C,Object.values(C));return s.jsx(m.Provider,{value:x,children:v})};u.displayName=i+"Provider";function h(p,f){var m;const v=((m=f==null?void 0:f[e])==null?void 0:m[d])||c,C=a.useContext(v);if(C)return C;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[u,h]}const r=()=>{const i=n.map(l=>a.createContext(l));return function(c){const d=(c==null?void 0:c[e])||i;return a.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return r.scopeName=e,[o,Lr(r,...t)]}function Lr(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const l=o.reduce((c,{useScope:d,scopeName:u})=>{const p=d(i)[`__scope${u}`];return{...c,...p}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}function us(e){const t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...n)=>{var o;return(o=t.current)==null?void 0:o.call(t,...n)},[])}function Or({prop:e,defaultProp:t,onChange:n=()=>{}}){const[o,r]=Vr({defaultProp:t,onChange:n}),i=e!==void 0,l=i?e:o,c=us(n),d=a.useCallback(u=>{if(i){const p=typeof u=="function"?u(e):u;p!==e&&c(p)}else r(u)},[i,e,r,c]);return[l,d]}function Vr({defaultProp:e,onChange:t}){const n=a.useState(e),[o]=n,r=a.useRef(o),i=us(t);return a.useEffect(()=>{r.current!==o&&(i(o),r.current=o)},[o,r,i]),n}var Fr=a.createContext(void 0);function $r(e){const t=a.useContext(Fr);return e||t||"ltr"}function Br(e){const t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Hr=globalThis!=null&&globalThis.document?a.useLayoutEffect:()=>{};function zr(e){const[t,n]=a.useState(void 0);return Hr(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let l,c;if("borderBoxSize"in i){const d=i.borderBoxSize,u=Array.isArray(d)?d[0]:d;l=u.inlineSize,c=u.blockSize}else l=e.offsetWidth,c=e.offsetHeight;n({width:l,height:c})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else n(void 0)},[e]),t}function Ke(e){const t=Gr(e),n=a.forwardRef((o,r)=>{const{children:i,...l}=o,c=a.Children.toArray(i),d=c.find(Kr);if(d){const u=d.props.children,h=c.map(p=>p===d?a.Children.count(u)>1?a.Children.only(null):a.isValidElement(u)?u.props.children:null:p);return s.jsx(t,{...l,ref:r,children:a.isValidElement(u)?a.cloneElement(u,void 0,h):null})}return s.jsx(t,{...l,ref:r,children:i})});return n.displayName=`${e}.Slot`,n}function Gr(e){const t=a.forwardRef((n,o)=>{const{children:r,...i}=n;if(a.isValidElement(r)){const l=Yr(r),c=Wr(i,r.props);return r.type!==a.Fragment&&(c.ref=o?cs(o,l):l),a.cloneElement(r,c)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ur=Symbol("radix.slottable");function Kr(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ur}function Wr(e,t){const n={...t};for(const o in t){const r=e[o],i=t[o];/^on[A-Z]/.test(o)?r&&i?n[o]=(...c)=>{i(...c),r(...c)}:r&&(n[o]=r):o==="style"?n[o]={...r,...i}:o==="className"&&(n[o]=[r,i].filter(Boolean).join(" "))}return{...e,...n}}function Yr(e){var o,r;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var qr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_e=qr.reduce((e,t)=>{const n=Ke(`Primitive.${t}`),o=a.forwardRef((r,i)=>{const{asChild:l,...c}=r,d=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...c,ref:i})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function Xr(e){const t=e+"CollectionProvider",[n,o]=ds(t),[r,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=m=>{const{scope:x,children:g}=m,b=re.useRef(null),S=re.useRef(new Map).current;return s.jsx(r,{scope:x,itemMap:S,collectionRef:b,children:g})};l.displayName=t;const c=e+"CollectionSlot",d=Ke(c),u=re.forwardRef((m,x)=>{const{scope:g,children:b}=m,S=i(c,g),N=le(x,S.collectionRef);return s.jsx(d,{ref:N,children:b})});u.displayName=c;const h=e+"CollectionItemSlot",p="data-radix-collection-item",f=Ke(h),v=re.forwardRef((m,x)=>{const{scope:g,children:b,...S}=m,N=re.useRef(null),R=le(x,N),M=i(h,g);return re.useEffect(()=>(M.itemMap.set(N,{ref:N,...S}),()=>void M.itemMap.delete(N))),s.jsx(f,{[p]:"",ref:R,children:b})});v.displayName=h;function C(m){const x=i(e+"CollectionConsumer",m);return re.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const S=Array.from(b.querySelectorAll(`[${p}]`));return Array.from(x.itemMap.values()).sort((M,P)=>S.indexOf(M.ref.current)-S.indexOf(P.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:l,Slot:u,ItemSlot:v},C,o]}var fs=["PageUp","PageDown"],ms=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ps={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ue="Slider",[We,Jr,Zr]=Xr(ue),[hs,zo]=ds(ue,[Zr]),[Qr,Me]=hs(ue),xs=a.forwardRef((e,t)=>{const{name:n,min:o=0,max:r=100,step:i=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:u=[o],value:h,onValueChange:p=()=>{},onValueCommit:f=()=>{},inverted:v=!1,form:C,...m}=e,x=a.useRef(new Set),g=a.useRef(0),S=l==="horizontal"?eo:to,[N=[],R]=Or({prop:h,defaultProp:u,onChange:y=>{var E;(E=[...x.current][g.current])==null||E.focus(),p(y)}}),M=a.useRef(N);function P(y){const T=ao(N,y);w(y,T)}function G(y){w(y,g.current)}function _(){const y=M.current[g.current];N[g.current]!==y&&f(N)}function w(y,T,{commit:E}={commit:!1}){const L=uo(i),U=fo(Math.round((y-o)/i)*i+o,L),$=is(U,[o,r]);R((H=[])=>{const z=ro(H,$,T);if(co(z,d*i)){g.current=z.indexOf($);const W=String(z)!==String(H);return W&&E&&f(z),W?z:H}else return H})}return s.jsx(Qr,{scope:e.__scopeSlider,name:n,disabled:c,min:o,max:r,valueIndexToChangeRef:g,thumbs:x.current,values:N,orientation:l,form:C,children:s.jsx(We.Provider,{scope:e.__scopeSlider,children:s.jsx(We.Slot,{scope:e.__scopeSlider,children:s.jsx(S,{"aria-disabled":c,"data-disabled":c?"":void 0,...m,ref:t,onPointerDown:ce(m.onPointerDown,()=>{c||(M.current=N)}),min:o,max:r,inverted:v,onSlideStart:c?void 0:P,onSlideMove:c?void 0:G,onSlideEnd:c?void 0:_,onHomeKeyDown:()=>!c&&w(o,0,{commit:!0}),onEndKeyDown:()=>!c&&w(r,N.length-1,{commit:!0}),onStepKeyDown:({event:y,direction:T})=>{if(!c){const U=fs.includes(y.key)||y.shiftKey&&ms.includes(y.key)?10:1,$=g.current,H=N[$],z=i*U*T;w(H+z,$,{commit:!0})}}})})})})});xs.displayName=ue;var[gs,vs]=hs(ue,{startEdge:"left",endEdge:"right",size:"width",direction:1}),eo=a.forwardRef((e,t)=>{const{min:n,max:o,dir:r,inverted:i,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:u,...h}=e,[p,f]=a.useState(null),v=le(t,S=>f(S)),C=a.useRef(void 0),m=$r(r),x=m==="ltr",g=x&&!i||!x&&i;function b(S){const N=C.current||p.getBoundingClientRect(),R=[0,N.width],P=et(R,g?[n,o]:[o,n]);return C.current=N,P(S-N.left)}return s.jsx(gs,{scope:e.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:s.jsx(bs,{dir:m,"data-orientation":"horizontal",...h,ref:v,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const N=b(S.clientX);l==null||l(N)},onSlideMove:S=>{const N=b(S.clientX);c==null||c(N)},onSlideEnd:()=>{C.current=void 0,d==null||d()},onStepKeyDown:S=>{const R=ps[g?"from-left":"from-right"].includes(S.key);u==null||u({event:S,direction:R?-1:1})}})})}),to=a.forwardRef((e,t)=>{const{min:n,max:o,inverted:r,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,h=a.useRef(null),p=le(t,h),f=a.useRef(void 0),v=!r;function C(m){const x=f.current||h.current.getBoundingClientRect(),g=[0,x.height],S=et(g,v?[o,n]:[n,o]);return f.current=x,S(m-x.top)}return s.jsx(gs,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:s.jsx(bs,{"data-orientation":"vertical",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const x=C(m.clientY);i==null||i(x)},onSlideMove:m=>{const x=C(m.clientY);l==null||l(x)},onSlideEnd:()=>{f.current=void 0,c==null||c()},onStepKeyDown:m=>{const g=ps[v?"from-bottom":"from-top"].includes(m.key);d==null||d({event:m,direction:g?-1:1})}})})}),bs=a.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:o,onSlideMove:r,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:d,...u}=e,h=Me(ue,n);return s.jsx(_e.span,{...u,ref:t,onKeyDown:ce(e.onKeyDown,p=>{p.key==="Home"?(l(p),p.preventDefault()):p.key==="End"?(c(p),p.preventDefault()):fs.concat(ms).includes(p.key)&&(d(p),p.preventDefault())}),onPointerDown:ce(e.onPointerDown,p=>{const f=p.target;f.setPointerCapture(p.pointerId),p.preventDefault(),h.thumbs.has(f)?f.focus():o(p)}),onPointerMove:ce(e.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&r(p)}),onPointerUp:ce(e.onPointerUp,p=>{const f=p.target;f.hasPointerCapture(p.pointerId)&&(f.releasePointerCapture(p.pointerId),i(p))})})}),Ss="SliderTrack",ws=a.forwardRef((e,t)=>{const{__scopeSlider:n,...o}=e,r=Me(Ss,n);return s.jsx(_e.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...o,ref:t})});ws.displayName=Ss;var Ye="SliderRange",Cs=a.forwardRef((e,t)=>{const{__scopeSlider:n,...o}=e,r=Me(Ye,n),i=vs(Ye,n),l=a.useRef(null),c=le(t,l),d=r.values.length,u=r.values.map(f=>Ts(f,r.min,r.max)),h=d>1?Math.min(...u):0,p=100-Math.max(...u);return s.jsx(_e.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...o,ref:c,style:{...e.style,[i.startEdge]:h+"%",[i.endEdge]:p+"%"}})});Cs.displayName=Ye;var qe="SliderThumb",ys=a.forwardRef((e,t)=>{const n=Jr(e.__scopeSlider),[o,r]=a.useState(null),i=le(t,c=>r(c)),l=a.useMemo(()=>o?n().findIndex(c=>c.ref.current===o):-1,[n,o]);return s.jsx(so,{...e,ref:i,index:l})}),so=a.forwardRef((e,t)=>{const{__scopeSlider:n,index:o,name:r,...i}=e,l=Me(qe,n),c=vs(qe,n),[d,u]=a.useState(null),h=le(t,b=>u(b)),p=d?l.form||!!d.closest("form"):!0,f=zr(d),v=l.values[o],C=v===void 0?0:Ts(v,l.min,l.max),m=oo(o,l.values.length),x=f==null?void 0:f[c.size],g=x?lo(x,C,c.direction):0;return a.useEffect(()=>{if(d)return l.thumbs.add(d),()=>{l.thumbs.delete(d)}},[d,l.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${C}% + ${g}px)`},children:[s.jsx(We.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(_e.span,{role:"slider","aria-label":e["aria-label"]||m,"aria-valuemin":l.min,"aria-valuenow":v,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:h,style:v===void 0?{display:"none"}:e.style,onFocus:ce(e.onFocus,()=>{l.valueIndexToChangeRef.current=o})})}),p&&s.jsx(no,{name:r??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:v},o)]})});ys.displayName=qe;var no=e=>{const{value:t,...n}=e,o=a.useRef(null),r=Br(t);return a.useEffect(()=>{const i=o.current,l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(r!==t&&d){const u=new Event("input",{bubbles:!0});d.call(i,t),i.dispatchEvent(u)}},[r,t]),s.jsx("input",{style:{display:"none"},...n,ref:o,defaultValue:t})};function ro(e=[],t,n){const o=[...e];return o[n]=t,o.sort((r,i)=>r-i)}function Ts(e,t,n){const i=100/(n-t)*(e-t);return is(i,[0,100])}function oo(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function ao(e,t){if(e.length===1)return 0;const n=e.map(r=>Math.abs(r-t)),o=Math.min(...n);return n.indexOf(o)}function lo(e,t,n){const o=e/2,i=et([0,50],[0,o]);return(o-i(t)*n)*n}function io(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function co(e,t){if(t>0){const n=io(e);return Math.min(...n)>=t}return!0}function et(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(n-e[0])}}function uo(e){return(String(e).split(".")[1]||"").length}function fo(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var mo=xs,po=ws,ho=Cs,xo=ys;function go({className:e,defaultValue:t,value:n,min:o=0,max:r=100,...i}){const l=a.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[o,r],[n,t,o,r]);return s.jsxs(mo,{"data-slot":"slider",defaultValue:t,value:n,min:o,max:r,className:A("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[s.jsx(po,{"data-slot":"slider-track",className:A("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:s.jsx(ho,{"data-slot":"slider-range",className:A("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:l.length},(c,d)=>s.jsx(xo,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},d))]})}var tt="Switch",[vo,Go]=Xe(tt),[bo,So]=vo(tt),Ns=a.forwardRef((e,t)=>{const{__scopeSwitch:n,name:o,checked:r,defaultChecked:i,required:l,disabled:c,value:d="on",onCheckedChange:u,form:h,...p}=e,[f,v]=a.useState(null),C=X(t,S=>v(S)),m=a.useRef(!1),x=f?h||!!f.closest("form"):!0,[g=!1,b]=Ie({prop:r,defaultProp:i,onChange:u});return s.jsxs(bo,{scope:n,checked:g,disabled:c,children:[s.jsx(B.button,{type:"button",role:"switch","aria-checked":g,"aria-required":l,"data-state":Es(g),"data-disabled":c?"":void 0,disabled:c,value:d,...p,ref:C,onClick:F(e.onClick,S=>{b(N=>!N),x&&(m.current=S.isPropagationStopped(),m.current||S.stopPropagation())})}),x&&s.jsx(wo,{control:f,bubbles:!m.current,name:o,value:d,checked:g,required:l,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});Ns.displayName=tt;var Is="SwitchThumb",js=a.forwardRef((e,t)=>{const{__scopeSwitch:n,...o}=e,r=So(Is,n);return s.jsx(B.span,{"data-state":Es(r.checked),"data-disabled":r.disabled?"":void 0,...o,ref:t})});js.displayName=Is;var wo=e=>{const{control:t,checked:n,bubbles:o=!0,...r}=e,i=a.useRef(null),l=At(n),c=Js(t);return a.useEffect(()=>{const d=i.current,u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(l!==n&&p){const f=new Event("click",{bubbles:o});p.call(d,n),d.dispatchEvent(f)}},[l,n,o]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Es(e){return e?"checked":"unchecked"}var Co=Ns,yo=js;function To({className:e,...t}){return s.jsx(Co,{"data-slot":"switch",className:A("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",e),...t,children:s.jsx(yo,{"data-slot":"switch-thumb",className:A("bg-white pointer-events-none block size-4 rounded-full ring-0 shadow-lg transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}function st(e){var t,n,o;switch(e.inputType){case"text":return s.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[s.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),s.jsx(oe,{type:"text",id:e.id,placeholder:e.placeholder,className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValue,onChange:r=>{e.onChangeValue(r.target.value)},...e.inputProps})]},e.id);case"number":return s.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[s.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),s.jsx(oe,{type:"number",id:e.id,placeholder:e.placeholder,className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValue,onChange:r=>{var l;const i=(l=e.inputProps)==null?void 0:l.max;if(i!==void 0){const c=Math.min(Number(r.target.value),Number(i));e.onChangeValue(c.toString()),r.target.value=c.toString();return}e.onChangeValue(r.target.value)},...e.inputProps})]},e.id);case"switch":return s.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[s.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),s.jsx(To,{id:e.id,defaultChecked:e.defaultValue,onCheckedChange:r=>{e.onChangeValue(r)}})]},e.id);case"select":return s.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[s.jsx(J,{htmlFor:"legend-position-select",className:"text-sm font-medium ",children:e.label}),s.jsxs(ns,{value:e.defaultValue,onValueChange:r=>{e.onChangeValue(r)},children:[s.jsx(os,{id:e.id,className:"w-[100px]",children:s.jsx(rs,{placeholder:"Select position"})}),s.jsx(as,{children:(t=e.options)==null?void 0:t.map(r=>s.jsx(Ne,{value:r.value,children:r.label},r.value))})]})]},e.id);case"color":return s.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[s.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),s.jsx(oe,{type:"color",id:e.id,placeholder:e.placeholder,className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValue,onChange:r=>{e.onChangeValue(r.target.value)},...e.inputProps})]},e.id);case"slider":return s.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[s.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),s.jsx(go,{id:e.id,value:[e.defaultValue],onValueChange:r=>{e.onChangeValue(r==null?void 0:r[0])},min:Number(((n=e.inputProps)==null?void 0:n.min)??0),max:Number(((o=e.inputProps)==null?void 0:o.max)??100)})]},e.id);default:return null}}function No(e){return s.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[s.jsx(J,{htmlFor:"x-axis-limits",className:"text-sm font-medium",children:e.label}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{htmlFor:`${e.id}-min`,className:"text-sm font-medium",children:"Min"}),s.jsx(oe,{type:"text",placeholder:"Min",className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValueMin,onChange:t=>{e.onChangeMin(t.target.value)}})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{htmlFor:`${e.id}-max`,className:"text-sm font-medium",children:"Max"}),s.jsx(oe,{type:"text",placeholder:"Max",className:"flex-1 border-b-2 border-secondary rounded-md p-2",value:e.defaultValueMax,onChange:t=>{e.onChangeMax(t.target.value)}})]})]})]})}const Io=e=>{const{chartSettings:t,onSettingChange:n,settingInputsConfig:o}=e,[r,i]=a.useState(t),l=a.useCallback((d,u)=>{i(h=>({...h,[d]:u})),n(d,u)},[n]),c=a.useMemo(()=>o.map(u=>({...u,defaultValue:r[u.id],onChangeValue:h=>{l(u.id,h)}})).map(u=>st(u)),[l,r,o]);return s.jsxs("div",{className:"flex-grow flex overflow-y-auto",children:[s.jsx("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6 border-r-2 border-secondary",children:c}),s.jsx("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6"})]})},jo=a.memo(Io),Eo=e=>{const{chartSettings:t,onSettingChange:n,settingInputsConfig:o}=e,[r,i]=a.useState(t),l=a.useCallback((u,h,p)=>{if(u==="x"){const v={...r.xAxisLimits,[h]:p};i(C=>({...C,xAxisLimits:v})),n("xAxisLimits",v);return}const f={...r.yAxisLimits,[h]:p};i(v=>({...v,yAxisLimits:f})),n("yAxisLimits",f)},[r,n]),c=a.useCallback((u,h)=>{i(p=>({...p,[u]:h})),n(u,h)},[n]),d=a.useMemo(()=>Object.entries(o).map(([u,h],p)=>{const f=h.map(v=>{var C,m;if(v.inputType==="min/max"){const x={...v,defaultValueMin:((C=r[v.id])==null?void 0:C.min)||void 0,defaultValueMax:((m=r[v.id])==null?void 0:m.max)||void 0,onChangeMin:g=>{l(u,"min",g)},onChangeMax:g=>{l(u,"max",g)}};return No(x)}return st({...v,defaultValue:r[v.id],onChangeValue:x=>{c(v.id,x)}})});return s.jsx("div",{className:A("flex-1 flex flex-col space-y-4 pl-3 pr-6 border-secondary",p<Object.keys(o).length-1?"border-r-2":""),children:f},u)}),[r,c,l,o]);return s.jsx("div",{className:"flex-grow flex overflow-y-auto",children:d})},Ro=a.memo(Eo),Ao=e=>{var C;const{traces:t,onTraceSettingChange:n,settingInputsConfig:o}=e,[r,i]=a.useState((C=t[0])==null?void 0:C.id),[l,c]=a.useState(""),[d,u]=a.useState(t),h=a.useMemo(()=>d.filter(m=>m.settings.name.toLowerCase().includes(l.toLowerCase())),[d,l]),[p,f]=a.useMemo(()=>{const m=d.findIndex(g=>g.id===r);return[d[m],m]},[d,r]),v=(m,x,g)=>{const b=[...d];b[g]={...b[g],settings:{...b[g].settings,[m]:x}},u(b),n(m,x,g)};return s.jsxs("div",{className:"flex-grow flex overflow-y-auto",children:[s.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6 border-r-2 border-secondary",children:[s.jsx(oe,{type:"text",placeholder:"Search traces...",value:l,onChange:m=>c(m.target.value),className:"sticky top-0 bg-background shadow-sm"}),s.jsx("div",{className:"flex flex-col space-y-2 overflow-y-auto",children:h.map(m=>s.jsxs("div",{className:`
                flex items-center space-x-3 p-2 rounded-lg
                transition-colors duration-200 ease-in-out
                cursor-pointer hover:bg-primary/20
                bg-secondary/40
                ${r===m.id?"!bg-primary/80 !text-background !font-medium shadow-sm":""}
              `,onClick:()=>i(m.id),children:[s.jsx("div",{className:"w-4 h-4 rounded-sm shadow-sm border border-white",style:{backgroundColor:m.settings.color}}),s.jsx("span",{className:"text-sm",children:m.settings.name})]},m.id))})]}),s.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-6 pr-6 overflow-y-auto",children:[!r&&s.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:s.jsx("span",{className:"text-sm",children:"Select a trace on the left to edit its settings"})}),p&&o.map(m=>{const x={...m,defaultValue:p.settings[m.id],onChangeValue:g=>v(m.id,g,f)};return st(x)})]})]})},Po=a.memo(Ao),me={GENERAL:{title:"General settings",value:"general-settings"},AXIS:{title:"Axis settings",value:"axis-settings"},SERIES:{title:"Series settings",value:"series-settings"},TOOLTIP:{title:"Tooltip settings",value:"tooltip-settings"}};function at(e){switch(e){case j.LINE:return be[j.LINE];case j.SCATTER:return be[j.SCATTER];case j.BAR:return be[j.BAR];case j.AREA:return be[j.AREA];default:return Zs}}function _o(e){switch(e){case j.LINE:return Se[j.LINE];case j.SCATTER:return Se[j.SCATTER];case j.BAR:return Se[j.BAR];case j.AREA:return Se[j.AREA];default:return Qs}}function Mo(e){switch(e){case j.LINE:return{GENERAL:ye[j.LINE],AXIS:Ce[j.LINE],TRACE:we[j.LINE]};case j.SCATTER:return{GENERAL:ye[j.SCATTER],AXIS:Ce[j.SCATTER],TRACE:we[j.SCATTER]};case j.BAR:return{GENERAL:ye[j.BAR],AXIS:Ce[j.BAR],TRACE:we[j.BAR]};case j.AREA:return{GENERAL:ye[j.AREA],AXIS:Ce[j.AREA],TRACE:we[j.AREA]};default:return{GENERAL:sn,AXIS:tn,TRACE:en}}}const ko=e=>{const{chartSettings:t,setChartSettings:n,traces:o,onTraceSettingChange:r,chartType:i}=e,[l,c]=a.useState(me.GENERAL),d=a.useCallback((f,v)=>{n({...t,[f]:v})},[t,n]),u=Ue(d,1e3),h=Ue(r,1e3),p=a.useMemo(()=>Mo(i),[i]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col space-y-1 border-b-2 rounded-lg rounded-b-none p-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-0",children:"Customize Your Chart"}),s.jsx("p",{className:"text-sm text-accent-foreground",children:"Customize your chart with the options below."})]}),s.jsxs("div",{className:"flex-grow flex items-stretch overflow-hidden",children:[s.jsx("ul",{className:"flex flex-col w-[200px] border-r-2",children:Object.values(me).map(f=>s.jsx("li",{onClick:()=>c(f),className:A("px-4 py-3 border-b-2 cursor-pointer hover:bg-primary/20",f.value===l.value?"bg-primary/50 hover:bg-primary/50":""),children:f.title},f.value))}),s.jsxs("div",{className:"flex-grow flex flex-col gap-5 p-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:l.title}),l.value===me.GENERAL.value&&s.jsx(jo,{chartSettings:t,onSettingChange:u,settingInputsConfig:p.GENERAL}),l.value===me.AXIS.value&&s.jsx(Ro,{chartSettings:t,onSettingChange:u,settingInputsConfig:p.AXIS}),l.value===me.SERIES.value&&s.jsx(Po,{onTraceSettingChange:h,traces:o,settingInputsConfig:p.TRACE})]})]})]})},Do=a.memo(ko);function Lo(e){const{onClose:t}=e,{dataManager:n}=nn(),o=Te(w=>w.chartToBeEditedId),r=Te(w=>w.setChartToBeEditedId),i=Te(w=>{var y;return(y=w.charts)==null?void 0:y.find(T=>T.i===o)}),[l,c]=a.useState({type:(i==null?void 0:i.type)??void 0,tracesConfig:(i==null?void 0:i.tracesConfig)??[],chartSettings:(i==null?void 0:i.chartSettings)??at((i==null?void 0:i.type)??"")}),[d,u]=a.useState(i?Y.DATA_SELECT.value:Y.CHART_TYPE_SELECT.value),h=l.type,p=l.chartSettings,f=l.tracesConfig.filter(w=>{if(!h)return!1;const{xRequired:y,yRequired:T}=mt[h];switch(!0){case(y&&T):return!!(w!=null&&w.x&&(w!=null&&w.y));case(y&&!T):return!!(w!=null&&w.x);case(!y&&T):return!!(w!=null&&w.y);default:return!1}}),v=d<=Y.CHART_TYPE_SELECT.value,C=a.useMemo(()=>{switch(d){case Y.CHART_TYPE_SELECT.value:return!l.type;case Y.DATA_SELECT.value:return!f.length;case Y.CUSTOMIZATION.value:return!1;default:return!1}},[l.type,f.length,d]),m=d>=Y.CUSTOMIZATION.value,x=a.useCallback(w=>{switch(!0){case w===Y.CHART_TYPE_SELECT.value:return!1;case w===Y.DATA_SELECT.value:return!l.type;case w===Y.CUSTOMIZATION.value:return!f.length;default:return!1}},[l.type,f.length]),g=a.useCallback(w=>{c(y=>({...y,type:w,chartSettings:at(w)})),u(y=>y+1)},[]),b=a.useCallback(w=>{c(y=>({...y,chartSettings:{...y.chartSettings,...w}}))},[]),S=a.useCallback((w,y)=>{h&&c(T=>{switch(!0){case y===T.tracesConfig.length:return{...T,tracesConfig:[...T.tracesConfig,{...w,settings:{..._o(h),name:"Trace "+T.tracesConfig.length,color:jr[y]},id:rn()}]};case(y>-1&&y<T.tracesConfig.length):return{...T,tracesConfig:T.tracesConfig.map((E,L)=>y!==L?E:{...E,...w})};default:return T}})},[h]),N=a.useCallback(w=>{c(y=>w<0||w>=y.tracesConfig.length?y:{...y,tracesConfig:y.tracesConfig.filter((T,E)=>w!==E)})},[]),R=a.useCallback((w,y,T)=>{c(E=>T<0||T>=E.tracesConfig.length?E:{...E,tracesConfig:E.tracesConfig.map((L,U)=>T!==U?L:{...L,settings:{...L.settings,[w]:y}})})},[]),M=a.useCallback(w=>{u(w)},[]),P=a.useCallback(()=>{v||u(w=>w-1)},[v]),G=a.useCallback(()=>{C||u(w=>w+1)},[C]),_=a.useCallback(async()=>{if(i){n.updateChart(o,{...i,...l}),t();return}n.addChart(l),t()},[l,i,o,n,t]);return{currentStep:d,chartType:h,completeTraces:f,allTraces:l.tracesConfig,traces:f,isLastStep:m,disablePreviousStep:v,disableNextStep:C,chartSettings:p,handleStepChange:M,handleChartTypeSelect:g,handleChartSettingsChange:b,addOrUpdateTrace:S,deleteTrace:N,editTraceSettingsItem:R,finalizeChartSelection:_,handleLoadPreviousStep:P,handleLoadNextStep:G,checkIfStepIsDisabled:x,setEditChartId:r}}function Oo(){const[e,t]=a.useState(null),n=a.useCallback(o=>{t(o)},[]);return{chartAPI:e,setChartPreviewRef:n}}function Uo(e){const{onClose:t}=e,{chartType:n,currentStep:o,allTraces:r,completeTraces:i,addOrUpdateTrace:l,deleteTrace:c,editTraceSettingsItem:d,handleChartTypeSelect:u,handleStepChange:h,finalizeChartSelection:p,handleLoadNextStep:f,handleLoadPreviousStep:v,checkIfStepIsDisabled:C,isLastStep:m,disablePreviousStep:x,disableNextStep:g,chartSettings:b,handleChartSettingsChange:S,setEditChartId:N}=Lo({onClose:t}),{chartAPI:R,setChartPreviewRef:M}=Oo(),P=a.useMemo(()=>o!==2&&o!==3||!i.length?null:s.jsx("div",{className:"flex-grow flex flex-col w-full h-full",children:s.jsx(on,{children:s.jsx(an,{chart:{i:"preview",...ln,tracesConfig:i,type:n,chartSettings:b},chartAPI:R,setRef:M})})}),[R,b,n,i,o,M]);return s.jsx(mn,{open:!0,onOpenChange:()=>{N(""),t()},children:s.jsx(pn,{className:"!w-[90vw] !max-w-[1800px] h-[90vh] flex flex-col p-0 overflow-hidden gap-0",children:s.jsxs(cn,{children:[s.jsx(In,{}),s.jsxs(It,{value:o.toString(),className:"flex-grow flex flex-col",children:[s.jsx(Dn,{currentStep:o,onStepChange:h,checkIfStepIsDisabled:C}),o===1&&s.jsx(Bn,{onChartSelect:u,tabValue:o.toString(),selectedChartType:n}),(o===2||o===3)&&n&&s.jsx(Fn,{tabValue:o.toString(),chartPreviewJsx:P,sectionJsx:o===2?s.jsx(Mr,{chartType:n,completeTraces:i,allTraces:r,addOrUpdateTrace:l,deleteTrace:c,editTraceSettingsItem:d}):s.jsx(Do,{chartSettings:b,setChartSettings:S,traces:i,onTraceSettingChange:d,chartType:n})})]}),s.jsx(On,{isLastStep:m,disablePreviousStep:x,onNext:m?p:f,onPrevious:v,disableNextStep:g})]})})})}export{Uo as default};
