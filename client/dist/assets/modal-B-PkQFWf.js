import{c as he,r as l,j as r,u as lt,a as Ie,b as Xe,d as Ee,P as B,e as it,R as Rr,I as Ar,f as F,g as Pr,h as A,C as j,i as _r,B as Z,k as ct,l as dt,m as Mr,n as ut,o as kr,p as Dr,q as X,A as Lr,s as Q,t as Or,v as ft,V as Vr,w as Fr,x as $r,y as Br,z as Hr,S as zr,F as Gr,D as Ur,E as Kr,G as nt,H as Wr,J as oe,K as Yr,T as qr,L as Xr,M as Te,N as mt,O as se,Q as Jr,U as Zr,W as be,X as Qr,Y as Se,Z as en,_ as tn,$ as rn,a0 as we,a1 as Ce,a2 as ye,a3 as nn,a4 as sn,a5 as on,a6 as an,a7 as ln}from"./index-DfKZyYni.js";import{D as cn,a as dn,b as un,C as pt,c as fn,d as mn,e as pn}from"./index-Bqu-hOal.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]],xn=he("ChartArea",hn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],vn=he("ChartLine",gn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=[["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["circle",{cx:"18.5",cy:"5.5",r:".5",fill:"currentColor",key:"lysivs"}],["circle",{cx:"11.5",cy:"11.5",r:".5",fill:"currentColor",key:"byv1b8"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["circle",{cx:"17.5",cy:"14.5",r:".5",fill:"currentColor",key:"1gjh6j"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]],Sn=he("ChartScatter",bn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ht=he("Check",wn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],yn=he("ChevronUp",Cn),Tn=()=>r.jsxs(cn,{className:"px-6 py-4",children:[r.jsx(dn,{children:"Create a New Chart"}),r.jsx(un,{children:"Follow the steps to create your custom chart."})]}),Nn=l.memo(Tn);var Je="Tabs",[In,Vo]=Xe(Je,[it]),xt=it(),[jn,Ze]=In(Je),gt=l.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,onValueChange:s,defaultValue:c,orientation:a="horizontal",dir:i,activationMode:d="automatic",...f}=e,p=lt(i),[m,u]=Ie({prop:o,onChange:s,defaultProp:c});return r.jsx(jn,{scope:n,baseId:Ee(),value:m,onValueChange:u,orientation:a,dir:p,activationMode:d,children:r.jsx(B.div,{dir:p,"data-orientation":a,...f,ref:t})})});gt.displayName=Je;var vt="TabsList",bt=l.forwardRef((e,t)=>{const{__scopeTabs:n,loop:o=!0,...s}=e,c=Ze(vt,n),a=xt(n);return r.jsx(Rr,{asChild:!0,...a,orientation:c.orientation,dir:c.dir,loop:o,children:r.jsx(B.div,{role:"tablist","aria-orientation":c.orientation,...s,ref:t})})});bt.displayName=vt;var St="TabsTrigger",wt=l.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,disabled:s=!1,...c}=e,a=Ze(St,n),i=xt(n),d=Tt(a.baseId,o),f=Nt(a.baseId,o),p=o===a.value;return r.jsx(Ar,{asChild:!0,...i,focusable:!s,active:p,children:r.jsx(B.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":f,"data-state":p?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...c,ref:t,onMouseDown:F(e.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?a.onValueChange(o):m.preventDefault()}),onKeyDown:F(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&a.onValueChange(o)}),onFocus:F(e.onFocus,()=>{const m=a.activationMode!=="manual";!p&&!s&&m&&a.onValueChange(o)})})})});wt.displayName=St;var Ct="TabsContent",yt=l.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,forceMount:s,children:c,...a}=e,i=Ze(Ct,n),d=Tt(i.baseId,o),f=Nt(i.baseId,o),p=o===i.value,m=l.useRef(p);return l.useEffect(()=>{const u=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(u)},[]),r.jsx(Pr,{present:s||p,children:({present:u})=>r.jsx(B.div,{"data-state":p?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":d,hidden:!u,id:f,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:u&&c})})});yt.displayName=Ct;function Tt(e,t){return`${e}-trigger-${t}`}function Nt(e,t){return`${e}-content-${t}`}var En=gt,Rn=bt,An=wt,Pn=yt;function It({className:e,...t}){return r.jsx(En,{"data-slot":"tabs",className:A("flex flex-col gap-2",e),...t})}function jt({className:e,...t}){return r.jsx(Rn,{"data-slot":"tabs-list",className:A("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",e),...t})}function Et({className:e,...t}){return r.jsx(An,{"data-slot":"tabs-trigger",className:A("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Rt({className:e,...t}){return r.jsx(Pn,{"data-slot":"tabs-content",className:A("flex-1 outline-none",e),...t})}const _n=[{icon:_r,label:"Bar",key:j.BAR},{icon:vn,label:"Line",key:j.LINE},{icon:Sn,label:"Scatter",key:j.SCATTER},{icon:xn,label:"Area",key:j.AREA}],Y={CHART_TYPE_SELECT:{label:"Choose Chart Type",value:1},DATA_SELECT:{label:"Select Data Source",value:2},CUSTOMIZATION:{label:"Customize",value:3}},Mn=e=>{const{currentStep:t,onStepChange:n,checkIfStepIsDisabled:o}=e;return r.jsx(jt,{className:"w-full justify-start h-12 px-6 border-b border-b-secondary bg-primary-foreground",children:Object.values(Y).map(s=>{const c=o(s.value),a=s.value===t;return r.jsxs(Et,{value:s.value.toString(),disabled:c,onClick:()=>n(s.value),className:A("flex-1 h-full data-[state=active]:font-semibold data-[state=active]:shadow-none !bg-primary-foreground transition-all cursor-pointer",c&&"!cursor-not-allowed"),children:[r.jsx("span",{className:A(`mr-2 w-6 h-6 rounded-full ${s.value<=t?"bg-transparent text-primary border border-primary":"bg-foreground/10 text-accent-foreground"} flex items-center justify-center text-sm`,a&&"!bg-primary !text-background !border-primary rounded-full"),children:s.value}),r.jsx("span",{className:s.value<=t?"text-primary":"text-muted-foreground",children:s.label})]},s.value)})})},kn=l.memo(Mn),Dn=e=>{const{disableNextStep:t,onNext:n,onPrevious:o,isLastStep:s,disablePreviousStep:c}=e;return r.jsxs("div",{className:"flex-shrink-0 px-6 py-4 flex justify-between items-center border-t border-t-secondary bg-primary-foreground",children:[r.jsx(Z,{onClick:o,variant:"outline",disabled:c,children:"Previous"}),r.jsx(Z,{variant:"default",disabled:t,onClick:n,children:s?"Finish":"Next"})]})},Ln=l.memo(Dn),On=e=>{const{tabValue:t,sectionJsx:n,chartPreviewJsx:o}=e,[s,c]=l.useState(!0),[a,i]=l.useState(!0),d=()=>{const f=!s;c(f),setTimeout(()=>{i(f)},300)};return r.jsx(Rt,{value:t,className:"flex-grow flex flex-col overflow-hidden",children:r.jsxs("div",{className:"flex flex-grow p-6 space-x-6",children:[r.jsx("div",{className:A("flex-grow flex flex-col bg-background-light rounded-lg shadow-sm border border- transition-all duration-300",s?"w-2/3":"flex-grow"),children:n}),r.jsxs("div",{className:A("bg-background-light py-2 px-1 space-y-6 rounded-lg shadow-sm border border- transition-all duration-300 flex flex-col",s?"w-1/3":"w-16"),children:[r.jsxs("div",{className:"flex items-center p-1",children:[r.jsx(Z,{variant:"ghost",className:"p-2",onClick:d,children:s?r.jsx(dt,{className:"h-6 w-6"}):r.jsx(ct,{className:"h-6 w-6"})}),s&&r.jsx("h4",{className:"font-semibold mb-0 text-xl flex-grow",children:"Chart Preview"})]}),a&&s&&r.jsx("div",{className:A("flex-grow flex w-full items-center relative"),children:o||r.jsxs("div",{className:" absolute w-full top-1/2 -translate-y-1/2 flex flex-col items-center justify-center gap-5",children:[r.jsx(Mr,{className:"text-primary/50 h-20 w-20"}),r.jsx("p",{className:"text-accent-foreground text-center",children:"Select traces on the left to preview chart"})]})})]})]})})},Vn=l.memo(On),Fn=e=>{const{tabValue:t,onChartSelect:n,selectedChartType:o}=e;return r.jsxs(Rt,{value:t,className:"flex-grow flex flex-col p-6 overflow-y-auto",children:[r.jsx("h2",{className:"text-3xl font-medium text-foreground my-8 text-center tracking-normal",children:"Select Chart Type"}),r.jsx("div",{className:"flex-grow w-full grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 pt-20",children:_n.map(s=>r.jsxs(Z,{variant:"outline",className:A("h-52 flex flex-col items-center justify-center gap-4 bg-gradient-to-br transition-all duration-300 shadow-sm hover:shadow-md","from-white to-primary/10 hover:from-white hover:to-primary/30","dark:from-secondary dark:to-primary/30 dark:hover:to-primary/80",o===s.key&&"from-primary-light to-primary/50 dark:from-primary/40 dark:to-primary/80 shadow-md"),onClick:()=>n(s.key),children:[r.jsx(s.icon,{className:"!h-16 !w-16 mb-2 text-primary"}),r.jsx("span",{className:"font-medium text-2xl text-foreground",children:s.label})]},s.label))})]})},$n=l.memo(Fn);function At(e){const t=l.useRef({value:e,previous:e});return l.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Bn=[" ","Enter","ArrowUp","ArrowDown"],Hn=[" ","Enter"],xe="Select",[Re,Ae,zn]=Dr(xe),[de,Fo]=Xe(xe,[zn,ut]),Pe=ut(),[Gn,ee]=de(xe),[Un,Kn]=de(xe),Pt=e=>{const{__scopeSelect:t,children:n,open:o,defaultOpen:s,onOpenChange:c,value:a,defaultValue:i,onValueChange:d,dir:f,name:p,autoComplete:m,disabled:u,required:b,form:C}=e,h=Pe(t),[g,S]=l.useState(null),[x,v]=l.useState(null),[N,R]=l.useState(!1),M=lt(f),[P=!1,G]=Ie({prop:o,defaultProp:s,onChange:c}),[_,w]=Ie({prop:a,defaultProp:i,onChange:d}),y=l.useRef(null),T=g?C||!!g.closest("form"):!0,[E,L]=l.useState(new Set),U=Array.from(E).map($=>$.props.value).join(";");return r.jsx(kr,{...h,children:r.jsxs(Gn,{required:b,scope:t,trigger:g,onTriggerChange:S,valueNode:x,onValueNodeChange:v,valueNodeHasChildren:N,onValueNodeHasChildrenChange:R,contentId:Ee(),value:_,onValueChange:w,open:P,onOpenChange:G,dir:M,triggerPointerDownPosRef:y,disabled:u,children:[r.jsx(Re.Provider,{scope:t,children:r.jsx(Un,{scope:e.__scopeSelect,onNativeOptionAdd:l.useCallback($=>{L(H=>new Set(H).add($))},[]),onNativeOptionRemove:l.useCallback($=>{L(H=>{const z=new Set(H);return z.delete($),z})},[]),children:n})}),T?r.jsxs(er,{"aria-hidden":!0,required:b,tabIndex:-1,name:p,autoComplete:m,value:_,onChange:$=>w($.target.value),disabled:u,form:C,children:[_===void 0?r.jsx("option",{value:""}):null,Array.from(E)]},U):null]})})};Pt.displayName=xe;var _t="SelectTrigger",Mt=l.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:o=!1,...s}=e,c=Pe(n),a=ee(_t,n),i=a.disabled||o,d=X(t,a.onTriggerChange),f=Ae(n),p=l.useRef("touch"),[m,u,b]=tr(h=>{const g=f().filter(v=>!v.disabled),S=g.find(v=>v.value===a.value),x=rr(g,h,S);x!==void 0&&a.onValueChange(x.value)}),C=h=>{i||(a.onOpenChange(!0),b()),h&&(a.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return r.jsx(Lr,{asChild:!0,...c,children:r.jsx(B.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":Qt(a.value)?"":void 0,...s,ref:d,onClick:F(s.onClick,h=>{h.currentTarget.focus(),p.current!=="mouse"&&C(h)}),onPointerDown:F(s.onPointerDown,h=>{p.current=h.pointerType;const g=h.target;g.hasPointerCapture(h.pointerId)&&g.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(C(h),h.preventDefault())}),onKeyDown:F(s.onKeyDown,h=>{const g=m.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&u(h.key),!(g&&h.key===" ")&&Bn.includes(h.key)&&(C(),h.preventDefault())})})})});Mt.displayName=_t;var kt="SelectValue",Dt=l.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:s,children:c,placeholder:a="",...i}=e,d=ee(kt,n),{onValueNodeHasChildrenChange:f}=d,p=c!==void 0,m=X(t,d.onValueNodeChange);return Q(()=>{f(p)},[f,p]),r.jsx(B.span,{...i,ref:m,style:{pointerEvents:"none"},children:Qt(d.value)?r.jsx(r.Fragment,{children:a}):c})});Dt.displayName=kt;var Wn="SelectIcon",Lt=l.forwardRef((e,t)=>{const{__scopeSelect:n,children:o,...s}=e;return r.jsx(B.span,{"aria-hidden":!0,...s,ref:t,children:o||"▼"})});Lt.displayName=Wn;var Yn="SelectPortal",Ot=e=>r.jsx(Or,{asChild:!0,...e});Ot.displayName=Yn;var ae="SelectContent",Vt=l.forwardRef((e,t)=>{const n=ee(ae,e.__scopeSelect),[o,s]=l.useState();if(Q(()=>{s(new DocumentFragment)},[]),!n.open){const c=o;return c?ft.createPortal(r.jsx(Ft,{scope:e.__scopeSelect,children:r.jsx(Re.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),c):null}return r.jsx($t,{...e,ref:t})});Vt.displayName=ae;var q=10,[Ft,te]=de(ae),qn="SelectContentImpl",$t=l.forwardRef((e,t)=>{const{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:c,onPointerDownOutside:a,side:i,sideOffset:d,align:f,alignOffset:p,arrowPadding:m,collisionBoundary:u,collisionPadding:b,sticky:C,hideWhenDetached:h,avoidCollisions:g,...S}=e,x=ee(ae,n),[v,N]=l.useState(null),[R,M]=l.useState(null),P=X(t,I=>N(I)),[G,_]=l.useState(null),[w,y]=l.useState(null),T=Ae(n),[E,L]=l.useState(!1),U=l.useRef(!1);l.useEffect(()=>{if(v)return $r(v)},[v]),Br();const $=l.useCallback(I=>{const[V,...K]=T().map(D=>D.ref.current),[O]=K.slice(-1),k=document.activeElement;for(const D of I)if(D===k||(D==null||D.scrollIntoView({block:"nearest"}),D===V&&R&&(R.scrollTop=0),D===O&&R&&(R.scrollTop=R.scrollHeight),D==null||D.focus(),document.activeElement!==k))return},[T,R]),H=l.useCallback(()=>$([G,v]),[$,G,v]);l.useEffect(()=>{E&&H()},[E,H]);const{onOpenChange:z,triggerPointerDownPosRef:W}=x;l.useEffect(()=>{if(v){let I={x:0,y:0};const V=O=>{var k,D;I={x:Math.abs(Math.round(O.pageX)-(((k=W.current)==null?void 0:k.x)??0)),y:Math.abs(Math.round(O.pageY)-(((D=W.current)==null?void 0:D.y)??0))}},K=O=>{I.x<=10&&I.y<=10?O.preventDefault():v.contains(O.target)||z(!1),document.removeEventListener("pointermove",V),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",V),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",K,{capture:!0})}}},[v,z,W]),l.useEffect(()=>{const I=()=>z(!1);return window.addEventListener("blur",I),window.addEventListener("resize",I),()=>{window.removeEventListener("blur",I),window.removeEventListener("resize",I)}},[z]);const[ke,ge]=tr(I=>{const V=T().filter(k=>!k.disabled),K=V.find(k=>k.ref.current===document.activeElement),O=rr(V,I,K);O&&setTimeout(()=>O.ref.current.focus())}),De=l.useCallback((I,V,K)=>{const O=!U.current&&!K;(x.value!==void 0&&x.value===V||O)&&(_(I),O&&(U.current=!0))},[x.value]),Le=l.useCallback(()=>v==null?void 0:v.focus(),[v]),ie=l.useCallback((I,V,K)=>{const O=!U.current&&!K;(x.value!==void 0&&x.value===V||O)&&y(I)},[x.value]),ve=o==="popper"?$e:Bt,fe=ve===$e?{side:i,sideOffset:d,align:f,alignOffset:p,arrowPadding:m,collisionBoundary:u,collisionPadding:b,sticky:C,hideWhenDetached:h,avoidCollisions:g}:{};return r.jsx(Ft,{scope:n,content:v,viewport:R,onViewportChange:M,itemRefCallback:De,selectedItem:G,onItemLeave:Le,itemTextRefCallback:ie,focusSelectedItem:H,selectedItemText:w,position:o,isPositioned:E,searchRef:ke,children:r.jsx(Hr,{as:zr,allowPinchZoom:!0,children:r.jsx(Gr,{asChild:!0,trapped:x.open,onMountAutoFocus:I=>{I.preventDefault()},onUnmountAutoFocus:F(s,I=>{var V;(V=x.trigger)==null||V.focus({preventScroll:!0}),I.preventDefault()}),children:r.jsx(Ur,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:a,onFocusOutside:I=>I.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:r.jsx(ve,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:I=>I.preventDefault(),...S,...fe,onPlaced:()=>L(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:F(S.onKeyDown,I=>{const V=I.ctrlKey||I.altKey||I.metaKey;if(I.key==="Tab"&&I.preventDefault(),!V&&I.key.length===1&&ge(I.key),["ArrowUp","ArrowDown","Home","End"].includes(I.key)){let O=T().filter(k=>!k.disabled).map(k=>k.ref.current);if(["ArrowUp","End"].includes(I.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(I.key)){const k=I.target,D=O.indexOf(k);O=O.slice(D+1)}setTimeout(()=>$(O)),I.preventDefault()}})})})})})})});$t.displayName=qn;var Xn="SelectItemAlignedPosition",Bt=l.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:o,...s}=e,c=ee(ae,n),a=te(ae,n),[i,d]=l.useState(null),[f,p]=l.useState(null),m=X(t,P=>p(P)),u=Ae(n),b=l.useRef(!1),C=l.useRef(!0),{viewport:h,selectedItem:g,selectedItemText:S,focusSelectedItem:x}=a,v=l.useCallback(()=>{if(c.trigger&&c.valueNode&&i&&f&&h&&g&&S){const P=c.trigger.getBoundingClientRect(),G=f.getBoundingClientRect(),_=c.valueNode.getBoundingClientRect(),w=S.getBoundingClientRect();if(c.dir!=="rtl"){const k=w.left-G.left,D=_.left-k,re=P.left-D,ne=P.width+re,Oe=Math.max(ne,G.width),Ve=window.innerWidth-q,Fe=nt(D,[q,Math.max(q,Ve-Oe)]);i.style.minWidth=ne+"px",i.style.left=Fe+"px"}else{const k=G.right-w.right,D=window.innerWidth-_.right-k,re=window.innerWidth-P.right-D,ne=P.width+re,Oe=Math.max(ne,G.width),Ve=window.innerWidth-q,Fe=nt(D,[q,Math.max(q,Ve-Oe)]);i.style.minWidth=ne+"px",i.style.right=Fe+"px"}const y=u(),T=window.innerHeight-q*2,E=h.scrollHeight,L=window.getComputedStyle(f),U=parseInt(L.borderTopWidth,10),$=parseInt(L.paddingTop,10),H=parseInt(L.borderBottomWidth,10),z=parseInt(L.paddingBottom,10),W=U+$+E+z+H,ke=Math.min(g.offsetHeight*5,W),ge=window.getComputedStyle(h),De=parseInt(ge.paddingTop,10),Le=parseInt(ge.paddingBottom,10),ie=P.top+P.height/2-q,ve=T-ie,fe=g.offsetHeight/2,I=g.offsetTop+fe,V=U+$+I,K=W-V;if(V<=ie){const k=y.length>0&&g===y[y.length-1].ref.current;i.style.bottom="0px";const D=f.clientHeight-h.offsetTop-h.offsetHeight,re=Math.max(ve,fe+(k?Le:0)+D+H),ne=V+re;i.style.height=ne+"px"}else{const k=y.length>0&&g===y[0].ref.current;i.style.top="0px";const re=Math.max(ie,U+h.offsetTop+(k?De:0)+fe)+K;i.style.height=re+"px",h.scrollTop=V-ie+h.offsetTop}i.style.margin=`${q}px 0`,i.style.minHeight=ke+"px",i.style.maxHeight=T+"px",o==null||o(),requestAnimationFrame(()=>b.current=!0)}},[u,c.trigger,c.valueNode,i,f,h,g,S,c.dir,o]);Q(()=>v(),[v]);const[N,R]=l.useState();Q(()=>{f&&R(window.getComputedStyle(f).zIndex)},[f]);const M=l.useCallback(P=>{P&&C.current===!0&&(v(),x==null||x(),C.current=!1)},[v,x]);return r.jsx(Zn,{scope:n,contentWrapper:i,shouldExpandOnScrollRef:b,onScrollButtonChange:M,children:r.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:r.jsx(B.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Bt.displayName=Xn;var Jn="SelectPopperPosition",$e=l.forwardRef((e,t)=>{const{__scopeSelect:n,align:o="start",collisionPadding:s=q,...c}=e,a=Pe(n);return r.jsx(Kr,{...a,...c,ref:t,align:o,collisionPadding:s,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$e.displayName=Jn;var[Zn,Qe]=de(ae,{}),Be="SelectViewport",Ht=l.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:o,...s}=e,c=te(Be,n),a=Qe(Be,n),i=X(t,c.onViewportChange),d=l.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),r.jsx(Re.Slot,{scope:n,children:r.jsx(B.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:F(s.onScroll,f=>{const p=f.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:u}=a;if(u!=null&&u.current&&m){const b=Math.abs(d.current-p.scrollTop);if(b>0){const C=window.innerHeight-q*2,h=parseFloat(m.style.minHeight),g=parseFloat(m.style.height),S=Math.max(h,g);if(S<C){const x=S+b,v=Math.min(C,x),N=x-v;m.style.height=v+"px",m.style.bottom==="0px"&&(p.scrollTop=N>0?N:0,m.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});Ht.displayName=Be;var zt="SelectGroup",[Qn,es]=de(zt),ts=l.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,s=Ee();return r.jsx(Qn,{scope:n,id:s,children:r.jsx(B.div,{role:"group","aria-labelledby":s,...o,ref:t})})});ts.displayName=zt;var Gt="SelectLabel",rs=l.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,s=es(Gt,n);return r.jsx(B.div,{id:s.id,...o,ref:t})});rs.displayName=Gt;var je="SelectItem",[ns,Ut]=de(je),Kt=l.forwardRef((e,t)=>{const{__scopeSelect:n,value:o,disabled:s=!1,textValue:c,...a}=e,i=ee(je,n),d=te(je,n),f=i.value===o,[p,m]=l.useState(c??""),[u,b]=l.useState(!1),C=X(t,x=>{var v;return(v=d.itemRefCallback)==null?void 0:v.call(d,x,o,s)}),h=Ee(),g=l.useRef("touch"),S=()=>{s||(i.onValueChange(o),i.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(ns,{scope:n,value:o,disabled:s,textId:h,isSelected:f,onItemTextChange:l.useCallback(x=>{m(v=>v||((x==null?void 0:x.textContent)??"").trim())},[]),children:r.jsx(Re.ItemSlot,{scope:n,value:o,disabled:s,textValue:p,children:r.jsx(B.div,{role:"option","aria-labelledby":h,"data-highlighted":u?"":void 0,"aria-selected":f&&u,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:C,onFocus:F(a.onFocus,()=>b(!0)),onBlur:F(a.onBlur,()=>b(!1)),onClick:F(a.onClick,()=>{g.current!=="mouse"&&S()}),onPointerUp:F(a.onPointerUp,()=>{g.current==="mouse"&&S()}),onPointerDown:F(a.onPointerDown,x=>{g.current=x.pointerType}),onPointerMove:F(a.onPointerMove,x=>{var v;g.current=x.pointerType,s?(v=d.onItemLeave)==null||v.call(d):g.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:F(a.onPointerLeave,x=>{var v;x.currentTarget===document.activeElement&&((v=d.onItemLeave)==null||v.call(d))}),onKeyDown:F(a.onKeyDown,x=>{var N;((N=d.searchRef)==null?void 0:N.current)!==""&&x.key===" "||(Hn.includes(x.key)&&S(),x.key===" "&&x.preventDefault())})})})})});Kt.displayName=je;var pe="SelectItemText",Wt=l.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:s,...c}=e,a=ee(pe,n),i=te(pe,n),d=Ut(pe,n),f=Kn(pe,n),[p,m]=l.useState(null),u=X(t,S=>m(S),d.onItemTextChange,S=>{var x;return(x=i.itemTextRefCallback)==null?void 0:x.call(i,S,d.value,d.disabled)}),b=p==null?void 0:p.textContent,C=l.useMemo(()=>r.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:h,onNativeOptionRemove:g}=f;return Q(()=>(h(C),()=>g(C)),[h,g,C]),r.jsxs(r.Fragment,{children:[r.jsx(B.span,{id:d.textId,...c,ref:u}),d.isSelected&&a.valueNode&&!a.valueNodeHasChildren?ft.createPortal(c.children,a.valueNode):null]})});Wt.displayName=pe;var Yt="SelectItemIndicator",qt=l.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return Ut(Yt,n).isSelected?r.jsx(B.span,{"aria-hidden":!0,...o,ref:t}):null});qt.displayName=Yt;var He="SelectScrollUpButton",Xt=l.forwardRef((e,t)=>{const n=te(He,e.__scopeSelect),o=Qe(He,e.__scopeSelect),[s,c]=l.useState(!1),a=X(t,o.onScrollButtonChange);return Q(()=>{if(n.viewport&&n.isPositioned){let i=function(){const f=d.scrollTop>0;c(f)};const d=n.viewport;return i(),d.addEventListener("scroll",i),()=>d.removeEventListener("scroll",i)}},[n.viewport,n.isPositioned]),s?r.jsx(Zt,{...e,ref:a,onAutoScroll:()=>{const{viewport:i,selectedItem:d}=n;i&&d&&(i.scrollTop=i.scrollTop-d.offsetHeight)}}):null});Xt.displayName=He;var ze="SelectScrollDownButton",Jt=l.forwardRef((e,t)=>{const n=te(ze,e.__scopeSelect),o=Qe(ze,e.__scopeSelect),[s,c]=l.useState(!1),a=X(t,o.onScrollButtonChange);return Q(()=>{if(n.viewport&&n.isPositioned){let i=function(){const f=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<f;c(p)};const d=n.viewport;return i(),d.addEventListener("scroll",i),()=>d.removeEventListener("scroll",i)}},[n.viewport,n.isPositioned]),s?r.jsx(Zt,{...e,ref:a,onAutoScroll:()=>{const{viewport:i,selectedItem:d}=n;i&&d&&(i.scrollTop=i.scrollTop+d.offsetHeight)}}):null});Jt.displayName=ze;var Zt=l.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:o,...s}=e,c=te("SelectScrollButton",n),a=l.useRef(null),i=Ae(n),d=l.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return l.useEffect(()=>()=>d(),[d]),Q(()=>{var p;const f=i().find(m=>m.ref.current===document.activeElement);(p=f==null?void 0:f.ref.current)==null||p.scrollIntoView({block:"nearest"})},[i]),r.jsx(B.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:F(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(o,50))}),onPointerMove:F(s.onPointerMove,()=>{var f;(f=c.onItemLeave)==null||f.call(c),a.current===null&&(a.current=window.setInterval(o,50))}),onPointerLeave:F(s.onPointerLeave,()=>{d()})})}),ss="SelectSeparator",os=l.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return r.jsx(B.div,{"aria-hidden":!0,...o,ref:t})});os.displayName=ss;var Ge="SelectArrow",as=l.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,s=Pe(n),c=ee(Ge,n),a=te(Ge,n);return c.open&&a.position==="popper"?r.jsx(Wr,{...s,...o,ref:t}):null});as.displayName=Ge;function Qt(e){return e===""||e===void 0}var er=l.forwardRef((e,t)=>{const{value:n,...o}=e,s=l.useRef(null),c=X(t,s),a=At(n);return l.useEffect(()=>{const i=s.current,d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==n&&p){const m=new Event("change",{bubbles:!0});p.call(i,n),i.dispatchEvent(m)}},[a,n]),r.jsx(Vr,{asChild:!0,children:r.jsx("select",{...o,ref:c,defaultValue:n})})});er.displayName="BubbleSelect";function tr(e){const t=Fr(e),n=l.useRef(""),o=l.useRef(0),s=l.useCallback(a=>{const i=n.current+a;t(i),function d(f){n.current=f,window.clearTimeout(o.current),f!==""&&(o.current=window.setTimeout(()=>d(""),1e3))}(i)},[t]),c=l.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return l.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,s,c]}function rr(e,t,n){const s=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,c=n?e.indexOf(n):-1;let a=ls(e,Math.max(c,0));s.length===1&&(a=a.filter(f=>f!==n));const d=a.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==n?d:void 0}function ls(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var is=Pt,cs=Mt,ds=Dt,us=Lt,fs=Ot,ms=Vt,ps=Ht,hs=Kt,xs=Wt,gs=qt,vs=Xt,bs=Jt;function nr({...e}){return r.jsx(is,{"data-slot":"select",...e})}function sr({...e}){return r.jsx(ds,{"data-slot":"select-value",...e})}function or({className:e,children:t,...n}){return r.jsxs(cs,{"data-slot":"select-trigger",className:A("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-full items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 cursor-pointer",e),...n,children:[t,r.jsx(us,{asChild:!0,children:r.jsx(pt,{className:"size-4 opacity-50"})})]})}function ar({className:e,children:t,position:n="popper",...o}){return r.jsx(fs,{children:r.jsxs(ms,{"data-slot":"select-content",className:A("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...o,children:[r.jsx(Ss,{}),r.jsx(ps,{className:A("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),r.jsx(ws,{})]})})}function Ne({className:e,children:t,...n}){return r.jsxs(hs,{"data-slot":"select-item",className:A("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2 cursor-pointer",e),...n,children:[r.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:r.jsx(gs,{children:r.jsx(ht,{className:"size-4"})})}),r.jsx(xs,{children:t})]})}function Ss({className:e,...t}){return r.jsx(vs,{"data-slot":"select-scroll-up-button",className:A("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(yn,{className:"size-4"})})}function ws({className:e,...t}){return r.jsx(bs,{"data-slot":"select-scroll-down-button",className:A("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(pt,{className:"size-4"})})}function Ue(e,t){const n=l.useRef(void 0);return l.useCallback((...o)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{e(...o)},t)},[e,t])}const Cs=e=>{const{activeAxis:t,axisOptions:n,selectedTraceIndex:o,onTraceEdit:s,onAxisOptionClick:c,traces:a,uploadedFiles:i,onTraceDelete:d,onTraceSettingsItemEdit:f}=e,p=Ue(f,1e3),m=l.useMemo(()=>a.length?a.map((u,b)=>{var C,h,g,S,x,v,N,R;return r.jsxs("div",{className:A("flex flex-col bg-background-light p-3 rounded-lg border",b===o?"border-primary":""),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"color",className:"w-4 h-4 aspect-square flex-shrink-0 rounded-full cursor-pointer",defaultValue:u.settings.color,onChange:M=>p("color",M.target.value,b)}),r.jsx(oe,{defaultValue:u.settings.name,onChange:M=>p("name",M.target.value,b),className:"font-medium bg-transparent border-none p-0 focus:ring-0"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{if(b===o)return s(null);s(b)},children:b===o?r.jsx(ht,{className:"h-4 w-4"}):r.jsx(Yr,{className:"h-4 w-4"})}),r.jsx(Z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{console.log("traceIndex",b),d(b)},children:r.jsx(qr,{className:"h-4 w-4"})})]})]}),(u==null?void 0:u.x)&&r.jsxs("div",{className:"text-sm text-accent-foreground",children:[r.jsx("span",{className:"font-semibold",children:"X: "}),r.jsxs("span",{className:"text-primary",children:[((g=(h=i[((C=u==null?void 0:u.x)==null?void 0:C.fileId)??""])==null?void 0:h.name)==null?void 0:g.slice(0,20))+"..."," :"," "]}),r.jsx("span",{style:{color:u.settings.color},children:(S=u==null?void 0:u.x)==null?void 0:S.column})]}),(u==null?void 0:u.y)&&r.jsxs("div",{className:"text-sm text-accent-foreground",children:[r.jsx("span",{className:"font-semibold",children:"Y: "}),r.jsxs("span",{className:"text-primary",children:[((N=(v=i[((x=u==null?void 0:u.y)==null?void 0:x.fileId)??""])==null?void 0:v.name)==null?void 0:N.slice(0,20))+"..."," :"," "]}),r.jsx("span",{style:{color:u.settings.color},children:(R=u==null?void 0:u.y)==null?void 0:R.column})]})]},b)}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold mb-0",children:"Traces"}),r.jsx("p",{className:"text-sm text-accent-foreground",children:"Your selections will appear here"})]}),[d,s,p,o,a,i]);return r.jsxs("div",{className:"h-[135px] flex bg-background-light border-b-2 rounded-lg rounded-b-none",children:[r.jsx("div",{className:A("w-3/4 p-2 h-auto overflow-y-auto",a.length&&"grid grid-cols-1 gap-2 md:grid-cols-2"),children:m}),r.jsxs("div",{className:"w-1/4 border-l flex flex-col justify-between gap-5 p-2",children:[r.jsx(It,{value:t,onValueChange:u=>c(u),className:"w-full",children:r.jsx(jt,{className:"w-full flex",children:n.map(u=>r.jsxs(Et,{value:u,className:"capitalize w-full",children:[u,"-axis"]},u))})}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"algorithm-select",className:"block text-sm font-medium text-foreground mb-1",children:"Auto Selection Algorithm"}),r.jsxs(nr,{value:"",children:[r.jsx(or,{id:"algorithm-select",className:"w-full",children:r.jsx(sr,{placeholder:"Select algorithm"})}),r.jsxs(ar,{children:[r.jsx(Ne,{value:"linear",children:"Linear"}),r.jsx(Ne,{value:"logarithmic",children:"Logarithmic"}),r.jsx(Ne,{value:"exponential",children:"Exponential"})]})]})]})]})]})},ys=l.memo(Cs),Ts=e=>{const{isFileColumnCollapsed:t,selectedFileId:n,setSelectedFileId:o,setIsFileColumnCollapsed:s,uploadedFiles:c,dataGridProps:a}=e,{theme:i}=Xr(),d=l.useMemo(()=>Object.entries(c).map(([f,p])=>r.jsx("li",{children:r.jsx(Z,{variant:n===f?"default":"outline",className:A("h-auto w-full overflow-hidden transition-all duration-300 shadow-sm hover:shadow-sm"),onClick:()=>o(f),children:r.jsx("span",{className:"w-full text-ellipsis overflow-hidden font-medium ",children:p==null?void 0:p.name})})},f)),[n,o,c]);return r.jsxs("div",{className:"flex-grow flex",children:[r.jsxs("div",{className:`relative py-3 px-2 flex flex-col gap-4 bg-background-light transition-all duration-300 border-r rounded-bl-lg ${t?"w-12":"w-48"}`,children:[r.jsx(Z,{variant:"ghost",className:"p-2 absolute right-1 top-1",onClick:()=>s(!t),children:t?r.jsx(dt,{className:"h-6 w-6"}):r.jsx(ct,{className:"h-6 w-6"})}),!t&&r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"font-semibold mb-0 text-sm",children:"Uploaded files"}),r.jsx("ul",{className:"space-y-2 text-sm text-accent-foreground w-full",children:d})]})]}),r.jsx("div",{className:A("flex-grow bg-background-light overflow-y-auto ag-theme-quartz [&_.ag-root-wrapper]:rounded-none [&_.ag-root-wrapper]:border-none",i==="dark"?"ag-theme-quartz-dark":"ag-theme-quartz"),children:n?r.jsx(fn,{...a}):r.jsx("div",{className:"flex justify-center items-center h-full w-full",children:r.jsx("h3",{className:"text-lg font-semibold mb-1 text-foreground",children:"Select a file to view its data."})})})]})},Ns=l.memo(Ts),Is=["#ff0000","#0000ff","#ff00ff","#800000","#808000","#008000","#008080","#800080","#808080"],js=[["bg-[#ff0000]","bg-[#ff0000]/5","bg-[#ff0000]/10","bg-[#ff0000]/20","bg-[#ff0000]/30","bg-[#ff0000]/40","bg-[#ff0000]/50","bg-[#ff0000]/60","bg-[#ff0000]/70","bg-[#ff0000]/80","bg-[#ff0000]/90"],["bg-[#0000ff]","bg-[#0000ff]/5","bg-[#0000ff]/10","bg-[#0000ff]/20","bg-[#0000ff]/30","bg-[#0000ff]/40","bg-[#0000ff]/50","bg-[#0000ff]/60","bg-[#0000ff]/70","bg-[#0000ff]/80","bg-[#0000ff]/90"],["bg-[#ff00ff]","bg-[#ff00ff]/5","bg-[#ff00ff]/10","bg-[#ff00ff]/20","bg-[#ff00ff]/30","bg-[#ff00ff]/40","bg-[#ff00ff]/50","bg-[#ff00ff]/60","bg-[#ff00ff]/70","bg-[#ff00ff]/80","bg-[#ff00ff]/90"],["bg-[#800000]","bg-[#800000]/5","bg-[#800000]/10","bg-[#800000]/20","bg-[#800000]/30","bg-[#800000]/40","bg-[#800000]/50","bg-[#800000]/60","bg-[#800000]/70","bg-[#800000]/80","bg-[#800000]/90"],["bg-[#808000]","bg-[#808000]/5","bg-[#808000]/10","bg-[#808000]/20","bg-[#808000]/30","bg-[#808000]/40","bg-[#808000]/50","bg-[#808000]/60","bg-[#808000]/70","bg-[#808000]/80","bg-[#808000]/90"],["bg-[#008000]","bg-[#008000]/5","bg-[#008000]/10","bg-[#008000]/20","bg-[#008000]/30","bg-[#008000]/40","bg-[#008000]/50","bg-[#008000]/60","bg-[#008000]/70","bg-[#008000]/80","bg-[#008000]/90"],["bg-[#008080]","bg-[#008080]/5","bg-[#008080]/10","bg-[#008080]/20","bg-[#008080]/30","bg-[#008080]/40","bg-[#008080]/50","bg-[#008080]/60","bg-[#008080]/70","bg-[#008080]/80","bg-[#008080]/90"],["bg-[#800080]","bg-[#800080]/5","bg-[#800080]/10","bg-[#800080]/20","bg-[#800080]/30","bg-[#800080]/40","bg-[#800080]/50","bg-[#800080]/60","bg-[#800080]/70","bg-[#800080]/80","bg-[#800080]/90"],["bg-[#808080]","bg-[#808080]/5","bg-[#808080]/10","bg-[#808080]/20","bg-[#808080]/30","bg-[#808080]/40","bg-[#808080]/50","bg-[#808080]/60","bg-[#808080]/70","bg-[#808080]/80","bg-[#808080]/90"]];function st(e,t){const n=js.find(s=>s[0].includes(e));if(!n)return null;const o=Math.min(Math.floor(t/10),10);return n[o]}function Es(e){const{chartType:t,allTraces:n,completeTraces:o,addOrUpdateTrace:s}=e,c=Te(_=>_.files),a=l.useMemo(()=>{const{xRequired:_,yRequired:w}=mt[t],y=[];return _&&y.push("x"),w&&y.push("y"),y},[t]),[i,d]=l.useState(""),[f,p]=l.useState(a[0]),[m,u]=l.useState(null),[b,C]=l.useState(null),h=o.length,g=m===null?h:m,S=l.useMemo(()=>{var _;return((_=c[i])==null?void 0:_.data)??[]},[i,c]),x=l.useMemo(()=>S.reduce((w,y)=>(Object.keys(y).forEach(T=>{w.includes(T)||w.push(T)}),w),[]).map(w=>({field:w,cellClass:()=>{if(w===b)return"cursor-pointer bg-primary/10";const y=n.find(T=>{var E,L;return((E=T.x)==null?void 0:E.fileId)===i&&T.x.column===w||((L=T.y)==null?void 0:L.fileId)===i&&T.y.column===w});return y?`cursor-pointer ${st(y.settings.color,20)}`:"cursor-pointer"},headerClass:()=>{if(w===b)return"bg-primary/10 hover:!bg-primary/10 cursor-pointer";const y=n.find(T=>{var E,L;return((E=T.x)==null?void 0:E.fileId)===i&&T.x.column===w||((L=T.y)==null?void 0:L.fileId)===i&&T.y.column===w});return y?`cursor-pointer hover:!bg-primary ${st(y.settings.color,20)}`:"cursor-pointer"}})),[n,S,b,i]),v=l.useMemo(()=>({editable:!1,filter:!1,resizable:!0}),[]),N=l.useCallback(_=>{s({[f]:{fileId:i,column:_.colDef.field}},g)},[s,f,i,g]),R=l.useCallback(_=>{C(_.colDef.field||null)},[]),M=l.useCallback(()=>{C(null)},[]),P=l.useCallback(_=>{C(_.column.getId()||null)},[]),G=l.useCallback(()=>{C(null)},[]);return{dataGridProps:{rowData:S,columnDefs:x,defaultColDef:v,suppressRowClickSelection:!0,suppressCellFocus:!0,suppressRowHoverHighlight:!0,suppressHeaderFocus:!0,onCellClicked:N,onCellMouseOver:R,onCellMouseOut:M,onColumnHeaderMouseOver:P,onColumnHeaderMouseLeave:G},defaultTraceIndex:h,selectedTraceIndex:m,setSelectedTraceIndex:u,uploadedFiles:c,selectedFileId:i,axisOptions:a,activeAxis:f,setActiveAxis:p,setSelectedFileId:d}}function Rs(){const[e,t]=l.useState(!1),[n,o]=l.useState(!1);return{isFileColumnCollapsed:e,setIsFileColumnCollapsed:t,isChartColumnCollapsed:n,setIsChartColumnCollapsed:o}}const As=e=>{const{addOrUpdateTrace:t,chartType:n,allTraces:o,completeTraces:s,deleteTrace:c,editTraceSettingsItem:a}=e,{uploadedFiles:i,selectedFileId:d,activeAxis:f,axisOptions:p,selectedTraceIndex:m,setSelectedTraceIndex:u,setActiveAxis:b,setSelectedFileId:C,dataGridProps:h}=Es({chartType:n,allTraces:o,completeTraces:s,addOrUpdateTrace:t}),{isFileColumnCollapsed:g,setIsFileColumnCollapsed:S}=Rs();return r.jsxs(r.Fragment,{children:[r.jsx(ys,{activeAxis:f,axisOptions:p,onAxisOptionClick:b,traces:s,uploadedFiles:i,selectedTraceIndex:m,onTraceEdit:u,onTraceDelete:c,onTraceSettingsItemEdit:a}),r.jsx(Ns,{dataGridProps:h,isFileColumnCollapsed:g,setIsFileColumnCollapsed:S,uploadedFiles:i,selectedFileId:d,setSelectedFileId:C})]})},Ps=l.memo(As);var _s="Label",lr=l.forwardRef((e,t)=>r.jsx(B.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));lr.displayName=_s;var Ms=lr;function J({className:e,...t}){return r.jsx(Ms,{"data-slot":"label",className:A("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function ir(e,[t,n]){return Math.min(n,Math.max(t,e))}function ce(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function ot(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function cr(...e){return t=>{let n=!1;const o=e.map(s=>{const c=ot(s,t);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let s=0;s<o.length;s++){const c=o[s];typeof c=="function"?c():ot(e[s],null)}}}}function le(...e){return l.useCallback(cr(...e),e)}function dr(e,t=[]){let n=[];function o(c,a){const i=l.createContext(a),d=n.length;n=[...n,a];const f=m=>{var S;const{scope:u,children:b,...C}=m,h=((S=u==null?void 0:u[e])==null?void 0:S[d])||i,g=l.useMemo(()=>C,Object.values(C));return r.jsx(h.Provider,{value:g,children:b})};f.displayName=c+"Provider";function p(m,u){var h;const b=((h=u==null?void 0:u[e])==null?void 0:h[d])||i,C=l.useContext(b);if(C)return C;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${c}\``)}return[f,p]}const s=()=>{const c=n.map(a=>l.createContext(a));return function(i){const d=(i==null?void 0:i[e])||c;return l.useMemo(()=>({[`__scope${e}`]:{...i,[e]:d}}),[i,d])}};return s.scopeName=e,[o,ks(s,...t)]}function ks(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(c){const a=o.reduce((i,{useScope:d,scopeName:f})=>{const m=d(c)[`__scope${f}`];return{...i,...m}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function ur(e){const t=l.useRef(e);return l.useEffect(()=>{t.current=e}),l.useMemo(()=>(...n)=>{var o;return(o=t.current)==null?void 0:o.call(t,...n)},[])}function Ds({prop:e,defaultProp:t,onChange:n=()=>{}}){const[o,s]=Ls({defaultProp:t,onChange:n}),c=e!==void 0,a=c?e:o,i=ur(n),d=l.useCallback(f=>{if(c){const m=typeof f=="function"?f(e):f;m!==e&&i(m)}else s(f)},[c,e,s,i]);return[a,d]}function Ls({defaultProp:e,onChange:t}){const n=l.useState(e),[o]=n,s=l.useRef(o),c=ur(t);return l.useEffect(()=>{s.current!==o&&(c(o),s.current=o)},[o,s,c]),n}var Os=l.createContext(void 0);function Vs(e){const t=l.useContext(Os);return e||t||"ltr"}function Fs(e){const t=l.useRef({value:e,previous:e});return l.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var $s=globalThis!=null&&globalThis.document?l.useLayoutEffect:()=>{};function Bs(e){const[t,n]=l.useState(void 0);return $s(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const c=s[0];let a,i;if("borderBoxSize"in c){const d=c.borderBoxSize,f=Array.isArray(d)?d[0]:d;a=f.inlineSize,i=f.blockSize}else a=e.offsetWidth,i=e.offsetHeight;n({width:a,height:i})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else n(void 0)},[e]),t}function Ke(e){const t=Hs(e),n=l.forwardRef((o,s)=>{const{children:c,...a}=o,i=l.Children.toArray(c),d=i.find(Gs);if(d){const f=d.props.children,p=i.map(m=>m===d?l.Children.count(f)>1?l.Children.only(null):l.isValidElement(f)?f.props.children:null:m);return r.jsx(t,{...a,ref:s,children:l.isValidElement(f)?l.cloneElement(f,void 0,p):null})}return r.jsx(t,{...a,ref:s,children:c})});return n.displayName=`${e}.Slot`,n}function Hs(e){const t=l.forwardRef((n,o)=>{const{children:s,...c}=n;if(l.isValidElement(s)){const a=Ks(s),i=Us(c,s.props);return s.type!==l.Fragment&&(i.ref=o?cr(o,a):a),l.cloneElement(s,i)}return l.Children.count(s)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var zs=Symbol("radix.slottable");function Gs(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===zs}function Us(e,t){const n={...t};for(const o in t){const s=e[o],c=t[o];/^on[A-Z]/.test(o)?s&&c?n[o]=(...i)=>{c(...i),s(...i)}:s&&(n[o]=s):o==="style"?n[o]={...s,...c}:o==="className"&&(n[o]=[s,c].filter(Boolean).join(" "))}return{...e,...n}}function Ks(e){var o,s;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Ws=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_e=Ws.reduce((e,t)=>{const n=Ke(`Primitive.${t}`),o=l.forwardRef((s,c)=>{const{asChild:a,...i}=s,d=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(d,{...i,ref:c})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function Ys(e){const t=e+"CollectionProvider",[n,o]=dr(t),[s,c]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=h=>{const{scope:g,children:S}=h,x=se.useRef(null),v=se.useRef(new Map).current;return r.jsx(s,{scope:g,itemMap:v,collectionRef:x,children:S})};a.displayName=t;const i=e+"CollectionSlot",d=Ke(i),f=se.forwardRef((h,g)=>{const{scope:S,children:x}=h,v=c(i,S),N=le(g,v.collectionRef);return r.jsx(d,{ref:N,children:x})});f.displayName=i;const p=e+"CollectionItemSlot",m="data-radix-collection-item",u=Ke(p),b=se.forwardRef((h,g)=>{const{scope:S,children:x,...v}=h,N=se.useRef(null),R=le(g,N),M=c(p,S);return se.useEffect(()=>(M.itemMap.set(N,{ref:N,...v}),()=>void M.itemMap.delete(N))),r.jsx(u,{[m]:"",ref:R,children:x})});b.displayName=p;function C(h){const g=c(e+"CollectionConsumer",h);return se.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const v=Array.from(x.querySelectorAll(`[${m}]`));return Array.from(g.itemMap.values()).sort((M,P)=>v.indexOf(M.ref.current)-v.indexOf(P.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:a,Slot:f,ItemSlot:b},C,o]}var fr=["PageUp","PageDown"],mr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pr={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ue="Slider",[We,qs,Xs]=Ys(ue),[hr,$o]=dr(ue,[Xs]),[Js,Me]=hr(ue),xr=l.forwardRef((e,t)=>{const{name:n,min:o=0,max:s=100,step:c=1,orientation:a="horizontal",disabled:i=!1,minStepsBetweenThumbs:d=0,defaultValue:f=[o],value:p,onValueChange:m=()=>{},onValueCommit:u=()=>{},inverted:b=!1,form:C,...h}=e,g=l.useRef(new Set),S=l.useRef(0),v=a==="horizontal"?Zs:Qs,[N=[],R]=Ds({prop:p,defaultProp:f,onChange:y=>{var E;(E=[...g.current][S.current])==null||E.focus(),m(y)}}),M=l.useRef(N);function P(y){const T=so(N,y);w(y,T)}function G(y){w(y,S.current)}function _(){const y=M.current[S.current];N[S.current]!==y&&u(N)}function w(y,T,{commit:E}={commit:!1}){const L=io(c),U=co(Math.round((y-o)/c)*c+o,L),$=ir(U,[o,s]);R((H=[])=>{const z=ro(H,$,T);if(lo(z,d*c)){S.current=z.indexOf($);const W=String(z)!==String(H);return W&&E&&u(z),W?z:H}else return H})}return r.jsx(Js,{scope:e.__scopeSlider,name:n,disabled:i,min:o,max:s,valueIndexToChangeRef:S,thumbs:g.current,values:N,orientation:a,form:C,children:r.jsx(We.Provider,{scope:e.__scopeSlider,children:r.jsx(We.Slot,{scope:e.__scopeSlider,children:r.jsx(v,{"aria-disabled":i,"data-disabled":i?"":void 0,...h,ref:t,onPointerDown:ce(h.onPointerDown,()=>{i||(M.current=N)}),min:o,max:s,inverted:b,onSlideStart:i?void 0:P,onSlideMove:i?void 0:G,onSlideEnd:i?void 0:_,onHomeKeyDown:()=>!i&&w(o,0,{commit:!0}),onEndKeyDown:()=>!i&&w(s,N.length-1,{commit:!0}),onStepKeyDown:({event:y,direction:T})=>{if(!i){const U=fr.includes(y.key)||y.shiftKey&&mr.includes(y.key)?10:1,$=S.current,H=N[$],z=c*U*T;w(H+z,$,{commit:!0})}}})})})})});xr.displayName=ue;var[gr,vr]=hr(ue,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Zs=l.forwardRef((e,t)=>{const{min:n,max:o,dir:s,inverted:c,onSlideStart:a,onSlideMove:i,onSlideEnd:d,onStepKeyDown:f,...p}=e,[m,u]=l.useState(null),b=le(t,v=>u(v)),C=l.useRef(void 0),h=Vs(s),g=h==="ltr",S=g&&!c||!g&&c;function x(v){const N=C.current||m.getBoundingClientRect(),R=[0,N.width],P=et(R,S?[n,o]:[o,n]);return C.current=N,P(v-N.left)}return r.jsx(gr,{scope:e.__scopeSlider,startEdge:S?"left":"right",endEdge:S?"right":"left",direction:S?1:-1,size:"width",children:r.jsx(br,{dir:h,"data-orientation":"horizontal",...p,ref:b,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const N=x(v.clientX);a==null||a(N)},onSlideMove:v=>{const N=x(v.clientX);i==null||i(N)},onSlideEnd:()=>{C.current=void 0,d==null||d()},onStepKeyDown:v=>{const R=pr[S?"from-left":"from-right"].includes(v.key);f==null||f({event:v,direction:R?-1:1})}})})}),Qs=l.forwardRef((e,t)=>{const{min:n,max:o,inverted:s,onSlideStart:c,onSlideMove:a,onSlideEnd:i,onStepKeyDown:d,...f}=e,p=l.useRef(null),m=le(t,p),u=l.useRef(void 0),b=!s;function C(h){const g=u.current||p.current.getBoundingClientRect(),S=[0,g.height],v=et(S,b?[o,n]:[n,o]);return u.current=g,v(h-g.top)}return r.jsx(gr,{scope:e.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:r.jsx(br,{"data-orientation":"vertical",...f,ref:m,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:h=>{const g=C(h.clientY);c==null||c(g)},onSlideMove:h=>{const g=C(h.clientY);a==null||a(g)},onSlideEnd:()=>{u.current=void 0,i==null||i()},onStepKeyDown:h=>{const S=pr[b?"from-bottom":"from-top"].includes(h.key);d==null||d({event:h,direction:S?-1:1})}})})}),br=l.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:o,onSlideMove:s,onSlideEnd:c,onHomeKeyDown:a,onEndKeyDown:i,onStepKeyDown:d,...f}=e,p=Me(ue,n);return r.jsx(_e.span,{...f,ref:t,onKeyDown:ce(e.onKeyDown,m=>{m.key==="Home"?(a(m),m.preventDefault()):m.key==="End"?(i(m),m.preventDefault()):fr.concat(mr).includes(m.key)&&(d(m),m.preventDefault())}),onPointerDown:ce(e.onPointerDown,m=>{const u=m.target;u.setPointerCapture(m.pointerId),m.preventDefault(),p.thumbs.has(u)?u.focus():o(m)}),onPointerMove:ce(e.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&s(m)}),onPointerUp:ce(e.onPointerUp,m=>{const u=m.target;u.hasPointerCapture(m.pointerId)&&(u.releasePointerCapture(m.pointerId),c(m))})})}),Sr="SliderTrack",wr=l.forwardRef((e,t)=>{const{__scopeSlider:n,...o}=e,s=Me(Sr,n);return r.jsx(_e.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...o,ref:t})});wr.displayName=Sr;var Ye="SliderRange",Cr=l.forwardRef((e,t)=>{const{__scopeSlider:n,...o}=e,s=Me(Ye,n),c=vr(Ye,n),a=l.useRef(null),i=le(t,a),d=s.values.length,f=s.values.map(u=>Tr(u,s.min,s.max)),p=d>1?Math.min(...f):0,m=100-Math.max(...f);return r.jsx(_e.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...o,ref:i,style:{...e.style,[c.startEdge]:p+"%",[c.endEdge]:m+"%"}})});Cr.displayName=Ye;var qe="SliderThumb",yr=l.forwardRef((e,t)=>{const n=qs(e.__scopeSlider),[o,s]=l.useState(null),c=le(t,i=>s(i)),a=l.useMemo(()=>o?n().findIndex(i=>i.ref.current===o):-1,[n,o]);return r.jsx(eo,{...e,ref:c,index:a})}),eo=l.forwardRef((e,t)=>{const{__scopeSlider:n,index:o,name:s,...c}=e,a=Me(qe,n),i=vr(qe,n),[d,f]=l.useState(null),p=le(t,x=>f(x)),m=d?a.form||!!d.closest("form"):!0,u=Bs(d),b=a.values[o],C=b===void 0?0:Tr(b,a.min,a.max),h=no(o,a.values.length),g=u==null?void 0:u[i.size],S=g?oo(g,C,i.direction):0;return l.useEffect(()=>{if(d)return a.thumbs.add(d),()=>{a.thumbs.delete(d)}},[d,a.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[i.startEdge]:`calc(${C}% + ${S}px)`},children:[r.jsx(We.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(_e.span,{role:"slider","aria-label":e["aria-label"]||h,"aria-valuemin":a.min,"aria-valuenow":b,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...c,ref:p,style:b===void 0?{display:"none"}:e.style,onFocus:ce(e.onFocus,()=>{a.valueIndexToChangeRef.current=o})})}),m&&r.jsx(to,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:b},o)]})});yr.displayName=qe;var to=e=>{const{value:t,...n}=e,o=l.useRef(null),s=Fs(t);return l.useEffect(()=>{const c=o.current,a=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(a,"value").set;if(s!==t&&d){const f=new Event("input",{bubbles:!0});d.call(c,t),c.dispatchEvent(f)}},[s,t]),r.jsx("input",{style:{display:"none"},...n,ref:o,defaultValue:t})};function ro(e=[],t,n){const o=[...e];return o[n]=t,o.sort((s,c)=>s-c)}function Tr(e,t,n){const c=100/(n-t)*(e-t);return ir(c,[0,100])}function no(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function so(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),o=Math.min(...n);return n.indexOf(o)}function oo(e,t,n){const o=e/2,c=et([0,50],[0,o]);return(o-c(t)*n)*n}function ao(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function lo(e,t){if(t>0){const n=ao(e);return Math.min(...n)>=t}return!0}function et(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(n-e[0])}}function io(e){return(String(e).split(".")[1]||"").length}function co(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var uo=xr,fo=wr,mo=Cr,po=yr;function ho({className:e,defaultValue:t,value:n,min:o=0,max:s=100,...c}){const a=l.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[o,s],[n,t,o,s]);return r.jsxs(uo,{"data-slot":"slider",defaultValue:t,value:n,min:o,max:s,className:A("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...c,children:[r.jsx(fo,{"data-slot":"slider-track",className:A("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:r.jsx(mo,{"data-slot":"slider-range",className:A("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(i,d)=>r.jsx(po,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},d))]})}var tt="Switch",[xo,Bo]=Xe(tt),[go,vo]=xo(tt),Nr=l.forwardRef((e,t)=>{const{__scopeSwitch:n,name:o,checked:s,defaultChecked:c,required:a,disabled:i,value:d="on",onCheckedChange:f,form:p,...m}=e,[u,b]=l.useState(null),C=X(t,v=>b(v)),h=l.useRef(!1),g=u?p||!!u.closest("form"):!0,[S=!1,x]=Ie({prop:s,defaultProp:c,onChange:f});return r.jsxs(go,{scope:n,checked:S,disabled:i,children:[r.jsx(B.button,{type:"button",role:"switch","aria-checked":S,"aria-required":a,"data-state":Er(S),"data-disabled":i?"":void 0,disabled:i,value:d,...m,ref:C,onClick:F(e.onClick,v=>{x(N=>!N),g&&(h.current=v.isPropagationStopped(),h.current||v.stopPropagation())})}),g&&r.jsx(bo,{control:u,bubbles:!h.current,name:o,value:d,checked:S,required:a,disabled:i,form:p,style:{transform:"translateX(-100%)"}})]})});Nr.displayName=tt;var Ir="SwitchThumb",jr=l.forwardRef((e,t)=>{const{__scopeSwitch:n,...o}=e,s=vo(Ir,n);return r.jsx(B.span,{"data-state":Er(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:t})});jr.displayName=Ir;var bo=e=>{const{control:t,checked:n,bubbles:o=!0,...s}=e,c=l.useRef(null),a=At(n),i=Jr(t);return l.useEffect(()=>{const d=c.current,f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(a!==n&&m){const u=new Event("click",{bubbles:o});m.call(d,n),d.dispatchEvent(u)}},[a,n,o]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:c,style:{...e.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Er(e){return e?"checked":"unchecked"}var So=Nr,wo=jr;function Co({className:e,...t}){return r.jsx(So,{"data-slot":"switch",className:A("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",e),...t,children:r.jsx(wo,{"data-slot":"switch-thumb",className:A("bg-white pointer-events-none block size-4 rounded-full ring-0 shadow-lg transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}function rt(e){var t,n,o;switch(e.inputType){case"text":return r.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[r.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),r.jsx(oe,{type:"text",id:e.id,placeholder:e.placeholder,className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:e.defaultValue,onChange:s=>{e.onChangeValue(s.target.value)},...e.inputProps})]},e.id);case"number":return r.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[r.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),r.jsx(oe,{type:"number",id:e.id,placeholder:e.placeholder,className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:e.defaultValue,onChange:s=>{var a;const c=(a=e.inputProps)==null?void 0:a.max;if(c!==void 0){const i=Math.min(Number(s.target.value),Number(c));e.onChangeValue(i.toString()),s.target.value=i.toString();return}e.onChangeValue(s.target.value)},...e.inputProps})]},e.id);case"switch":return r.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[r.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),r.jsx(Co,{id:e.id,defaultChecked:e.defaultValue,onCheckedChange:s=>{e.onChangeValue(s)}})]},e.id);case"select":return r.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[r.jsx(J,{htmlFor:"legend-position-select",className:"text-sm font-medium ",children:e.label}),r.jsxs(nr,{defaultValue:e.defaultValue,onValueChange:s=>{e.onChangeValue(s)},children:[r.jsx(or,{id:e.id,className:"w-[100px]",children:r.jsx(sr,{placeholder:"Select position"})}),r.jsx(ar,{children:(t=e.options)==null?void 0:t.map(s=>r.jsx(Ne,{value:s.value,children:s.label},s.value))})]})]},e.id);case"color":return r.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[r.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),r.jsx(oe,{type:"color",id:e.id,placeholder:e.placeholder,className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:e.defaultValue,onChange:s=>{e.onChangeValue(s.target.value)},...e.inputProps})]},e.id);case"slider":return r.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[r.jsx(J,{htmlFor:e.id,className:"text-sm font-medium",children:e.label}),r.jsx(ho,{id:e.id,defaultValue:[e.defaultValue],onValueCommit:s=>{e.onChangeValue(s==null?void 0:s[0])},min:Number(((n=e.inputProps)==null?void 0:n.min)??0),max:Number(((o=e.inputProps)==null?void 0:o.max)??100)})]},e.id);default:return null}}function yo(e){return r.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[r.jsx(J,{htmlFor:"x-axis-limits",className:"text-sm font-medium",children:e.label}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(J,{htmlFor:`${e.id}-min`,className:"text-sm font-medium",children:"Min"}),r.jsx(oe,{type:"text",placeholder:"Min",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:e.defaultValueMin,onChange:t=>{e.onChangeMin(t.target.value)}})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(J,{htmlFor:`${e.id}-max`,className:"text-sm font-medium",children:"Max"}),r.jsx(oe,{type:"text",placeholder:"Max",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:e.defaultValueMax,onChange:t=>{e.onChangeMax(t.target.value)}})]})]})]})}const To=e=>{const{chartSettings:t,onSettingChange:n,settingInputsConfig:o}=e,s=l.useMemo(()=>o.map(a=>({...a,defaultValue:t[a.id],onChangeValue:i=>{n(a.id,i)}})).map(a=>rt(a)),[t,n,o]);return r.jsxs("div",{className:"flex-grow flex overflow-y-auto",children:[r.jsx("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6 border-r-2 border-secondary",children:s}),r.jsx("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6"})]})},No=l.memo(To),Io=e=>{const{chartSettings:t,onSettingChange:n,settingInputsConfig:o}=e,s=l.useCallback((a,i,d)=>{if(a==="x"){n("xAxisLimits",{...t.xAxisLimits,[i]:d});return}n("yAxisLimits",{...t.yAxisLimits,[i]:d})},[t.xAxisLimits,t.yAxisLimits,n]),c=l.useMemo(()=>Object.entries(o).map(([a,i],d)=>{const f=i.map(p=>{var m,u;if(p.inputType==="min/max"){const b={...p,defaultValueMin:((m=t[p.id])==null?void 0:m.min)||void 0,defaultValueMax:((u=t[p.id])==null?void 0:u.max)||void 0,onChangeMin:C=>{s(a,"min",C)},onChangeMax:C=>{s(a,"max",C)}};return yo(b)}return rt({...p,defaultValue:t[p.id],onChangeValue:b=>{n(p.id,b)}})});return r.jsx("div",{className:A("flex-1 flex flex-col space-y-4 pl-3 pr-6 border-secondary",d<Object.keys(o).length-1?"border-r-2":""),children:f},a)}),[t,n,s,o]);return r.jsx("div",{className:"flex-grow flex overflow-y-auto",children:c})},jo=l.memo(Io),Eo=e=>{var m;const{traces:t,onTraceSettingChange:n,settingInputsConfig:o}=e,[s,c]=l.useState((m=t[0])==null?void 0:m.id),[a,i]=l.useState(""),d=l.useMemo(()=>t.filter(u=>u.settings.name.toLowerCase().includes(a.toLowerCase())),[t,a]),[f,p]=l.useMemo(()=>{const u=t.findIndex(C=>C.id===s);return[t[u],u]},[t,s]);return r.jsxs("div",{className:"flex-grow flex overflow-y-auto",children:[r.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6 border-r-2 border-secondary",children:[r.jsx(oe,{type:"text",placeholder:"Search traces...",value:a,onChange:u=>i(u.target.value),className:"sticky top-0 bg-background shadow-sm"}),r.jsx("div",{className:"flex flex-col space-y-2 overflow-y-auto",children:d.map(u=>r.jsxs("div",{className:`
                flex items-center space-x-3 p-2 rounded-lg
                transition-colors duration-200 ease-in-out
                cursor-pointer hover:bg-primary/20
                bg-secondary/40
                ${s===u.id?"!bg-primary/80 !text-background !font-medium shadow-sm":""}
              `,onClick:()=>c(u.id),children:[r.jsx("div",{className:"w-4 h-4 rounded-sm shadow-sm border border-white",style:{backgroundColor:u.settings.color}}),r.jsx("span",{className:"text-sm",children:u.settings.name})]},u.id))})]}),r.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-6 pr-6 overflow-y-auto",children:[!s&&r.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:r.jsx("span",{className:"text-sm",children:"Select a trace on the left to edit its settings"})}),f&&o.map(u=>{const b={...u,defaultValue:f.settings[u.id],onChangeValue:C=>n(u.id,C,p)};return rt(b)})]})]})},Ro=l.memo(Eo),me={GENERAL:{title:"General settings",value:"general-settings"},AXIS:{title:"Axis settings",value:"axis-settings"},SERIES:{title:"Series settings",value:"series-settings"},TOOLTIP:{title:"Tooltip settings",value:"tooltip-settings"}};function at(e){switch(e){case j.LINE:return be[j.LINE];case j.SCATTER:return be[j.SCATTER];case j.BAR:return be[j.BAR];case j.AREA:return be[j.AREA];default:return Zr}}function Ao(e){switch(e){case j.LINE:return Se[j.LINE];case j.SCATTER:return Se[j.SCATTER];case j.BAR:return Se[j.BAR];case j.AREA:return Se[j.AREA];default:return Qr}}function Po(e){switch(e){case j.LINE:return{GENERAL:ye[j.LINE],AXIS:Ce[j.LINE],TRACE:we[j.LINE]};case j.SCATTER:return{GENERAL:ye[j.SCATTER],AXIS:Ce[j.SCATTER],TRACE:we[j.SCATTER]};case j.BAR:return{GENERAL:ye[j.BAR],AXIS:Ce[j.BAR],TRACE:we[j.BAR]};case j.AREA:return{GENERAL:ye[j.AREA],AXIS:Ce[j.AREA],TRACE:we[j.AREA]};default:return{GENERAL:rn,AXIS:tn,TRACE:en}}}const _o=e=>{const{chartSettings:t,setChartSettings:n,traces:o,onTraceSettingChange:s,chartType:c}=e,[a,i]=l.useState(me.GENERAL),d=l.useCallback((u,b)=>{n({...t,[u]:b})},[t,n]),f=Ue(d,1e3),p=Ue(s,1e3),m=l.useMemo(()=>Po(c),[c]);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col space-y-1 border-b-2 rounded-lg rounded-b-none p-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-0",children:"Customize Your Chart"}),r.jsx("p",{className:"text-sm text-accent-foreground",children:"Customize your chart with the options below."})]}),r.jsxs("div",{className:"flex-grow flex items-stretch overflow-hidden",children:[r.jsx("ul",{className:"flex flex-col w-[200px] border-r-2",children:Object.values(me).map(u=>r.jsx("li",{onClick:()=>i(u),className:A("px-4 py-3 border-b-2 cursor-pointer hover:bg-primary/20",u.value===a.value?"bg-primary/50 hover:bg-primary/50":""),children:u.title},u.value))}),r.jsxs("div",{className:"flex-grow flex flex-col gap-5 p-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:a.title}),a.value===me.GENERAL.value&&r.jsx(No,{chartSettings:t,onSettingChange:f,settingInputsConfig:m.GENERAL}),a.value===me.AXIS.value&&r.jsx(jo,{chartSettings:t,onSettingChange:f,settingInputsConfig:m.AXIS}),a.value===me.SERIES.value&&r.jsx(Ro,{onTraceSettingChange:p,traces:o,settingInputsConfig:m.TRACE})]})]})]})},Mo=l.memo(_o);function ko(e){const{onClose:t}=e,{dataManager:n}=nn(),o=Te(w=>w.chartToBeEditedId),s=Te(w=>w.setChartToBeEditedId),c=Te(w=>{var y;return(y=w.charts)==null?void 0:y.find(T=>T.i===o)}),[a,i]=l.useState({type:(c==null?void 0:c.type)??void 0,tracesConfig:(c==null?void 0:c.tracesConfig)??[],chartSettings:(c==null?void 0:c.chartSettings)??at((c==null?void 0:c.type)??"")}),[d,f]=l.useState(c?Y.DATA_SELECT.value:Y.CHART_TYPE_SELECT.value),p=a.type,m=a.chartSettings,u=a.tracesConfig.filter(w=>{if(!p)return!1;const{xRequired:y,yRequired:T}=mt[p];switch(!0){case(y&&T):return!!(w!=null&&w.x&&(w!=null&&w.y));case(y&&!T):return!!(w!=null&&w.x);case(!y&&T):return!!(w!=null&&w.y);default:return!1}}),b=d<=Y.CHART_TYPE_SELECT.value,C=l.useMemo(()=>{switch(d){case Y.CHART_TYPE_SELECT.value:return!a.type;case Y.DATA_SELECT.value:return!u.length;case Y.CUSTOMIZATION.value:return!1;default:return!1}},[a.type,u.length,d]),h=d>=Y.CUSTOMIZATION.value,g=l.useCallback(w=>{switch(!0){case w===Y.CHART_TYPE_SELECT.value:return!1;case w===Y.DATA_SELECT.value:return!a.type;case w===Y.CUSTOMIZATION.value:return!u.length;default:return!1}},[a.type,u.length]),S=l.useCallback(w=>{i(y=>({...y,type:w,chartSettings:at(w)})),f(y=>y+1)},[]),x=l.useCallback(w=>{i(y=>({...y,chartSettings:{...y.chartSettings,...w}}))},[]),v=l.useCallback((w,y)=>{p&&i(T=>{switch(!0){case y===T.tracesConfig.length:return{...T,tracesConfig:[...T.tracesConfig,{...w,settings:{...Ao(p),name:"Trace "+T.tracesConfig.length,color:Is[y]},id:sn()}]};case(y>-1&&y<T.tracesConfig.length):return{...T,tracesConfig:T.tracesConfig.map((E,L)=>y!==L?E:{...E,...w})};default:return T}})},[p]),N=l.useCallback(w=>{i(y=>w<0||w>=y.tracesConfig.length?y:{...y,tracesConfig:y.tracesConfig.filter((T,E)=>w!==E)})},[]),R=l.useCallback((w,y,T)=>{i(E=>T<0||T>=E.tracesConfig.length?E:{...E,tracesConfig:E.tracesConfig.map((L,U)=>T!==U?L:{...L,settings:{...L.settings,[w]:y}})})},[]),M=l.useCallback(w=>{f(w)},[]),P=l.useCallback(()=>{b||f(w=>w-1)},[b]),G=l.useCallback(()=>{C||f(w=>w+1)},[C]),_=l.useCallback(async()=>{if(c){n.updateChart(o,{...c,...a}),t();return}n.addChart(a),t()},[a,c,o,n,t]);return{currentStep:d,chartType:p,completeTraces:u,allTraces:a.tracesConfig,traces:u,isLastStep:h,disablePreviousStep:b,disableNextStep:C,chartSettings:m,handleStepChange:M,handleChartTypeSelect:S,handleChartSettingsChange:x,addOrUpdateTrace:v,deleteTrace:N,editTraceSettingsItem:R,finalizeChartSelection:_,handleLoadPreviousStep:P,handleLoadNextStep:G,checkIfStepIsDisabled:g,setEditChartId:s}}function Do(){const[e,t]=l.useState(null),n=l.useCallback(o=>{t(o)},[]);return{chartAPI:e,setChartPreviewRef:n}}function Ho(e){const{onClose:t}=e,{chartType:n,currentStep:o,allTraces:s,completeTraces:c,addOrUpdateTrace:a,deleteTrace:i,editTraceSettingsItem:d,handleChartTypeSelect:f,handleStepChange:p,finalizeChartSelection:m,handleLoadNextStep:u,handleLoadPreviousStep:b,checkIfStepIsDisabled:C,isLastStep:h,disablePreviousStep:g,disableNextStep:S,chartSettings:x,handleChartSettingsChange:v,setEditChartId:N}=ko({onClose:t}),{chartAPI:R,setChartPreviewRef:M}=Do(),P=l.useMemo(()=>o!==2&&o!==3||!c.length?null:r.jsxs("div",{className:"flex-grow flex flex-col w-full h-full",children:[r.jsx("h2",{className:"text-lg font-semibold text-foreground px-4",children:x!=null&&x.titleVisibility?x==null?void 0:x.title:""}),r.jsx(on,{chart:{i:"preview",...an,tracesConfig:c,type:n,chartSettings:x},chartAPI:R,setRef:M})]}),[R,x,n,c,o,M]);return r.jsx(mn,{open:!0,onOpenChange:()=>{N(""),t()},children:r.jsx(pn,{className:"!w-[90vw] !max-w-[1800px] h-[90vh] flex flex-col p-0 overflow-hidden gap-0",children:r.jsxs(ln,{children:[r.jsx(Nn,{}),r.jsxs(It,{value:o.toString(),className:"flex-grow flex flex-col",children:[r.jsx(kn,{currentStep:o,onStepChange:p,checkIfStepIsDisabled:C}),o===1&&r.jsx($n,{onChartSelect:f,tabValue:o.toString(),selectedChartType:n}),(o===2||o===3)&&n&&r.jsx(Vn,{tabValue:o.toString(),chartPreviewJsx:P,sectionJsx:o===2?r.jsx(Ps,{chartType:n,completeTraces:c,allTraces:s,addOrUpdateTrace:a,deleteTrace:i,editTraceSettingsItem:d}):r.jsx(Mo,{chartSettings:x,setChartSettings:v,traces:c,onTraceSettingChange:d,chartType:n})})]}),r.jsx(Ln,{isLastStep:h,disablePreviousStep:g,onNext:h?m:u,onPrevious:b,disableNextStep:S})]})})})}export{Ho as default};
