import{c as de,r as a,j as e,u as $e,a as xe,b as Me,d as ve,P as O,e as ze,R as qt,I as Yt,f as L,g as Xt,h as E,C as me,i as Zt,B as J,k as Ge,l as Ue,m as Jt,n as We,o as Qt,p as es,q as K,A as ts,s as Q,t as ss,v as Ke,V as os,w as ns,x as rs,y as as,z as ls,S as is,F as cs,D as ds,E as us,G as Ve,H as fs,J as Z,K as ps,T as ms,L as hs,M as Pe,N as qe,O as xs,Q as gs,U as vs,W as bs,X as Ss,Y as Cs}from"./index-B1xU4vcU.js";import{D as ys,a as ws,b as Ns,C as Ye,c as Ts,d as js,e as Is}from"./index-DP8TI0W7.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]],Es=de("ChartArea",Ps);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],As=de("ChartLine",_s);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["circle",{cx:"18.5",cy:"5.5",r:".5",fill:"currentColor",key:"lysivs"}],["circle",{cx:"11.5",cy:"11.5",r:".5",fill:"currentColor",key:"byv1b8"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["circle",{cx:"17.5",cy:"14.5",r:".5",fill:"currentColor",key:"1gjh6j"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]],Rs=de("ChartScatter",ks);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Xe=de("Check",Ms);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ls=de("ChevronUp",Ds),Os=()=>e.jsxs(ys,{className:"px-6 py-4",children:[e.jsx(ws,{children:"Create a New Chart"}),e.jsx(Ns,{children:"Follow the steps to create your custom chart."})]}),Fs=a.memo(Os);var De="Tabs",[Vs,un]=Me(De,[ze]),Ze=ze(),[Hs,Le]=Vs(De),Je=a.forwardRef((s,o)=>{const{__scopeTabs:t,value:n,onValueChange:r,defaultValue:d,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=s,h=$e(l),[g,f]=xe({prop:n,onChange:r,defaultProp:d});return e.jsx(Hs,{scope:t,baseId:ve(),value:g,onValueChange:f,orientation:i,dir:h,activationMode:c,children:e.jsx(O.div,{dir:h,"data-orientation":i,...u,ref:o})})});Je.displayName=De;var Qe="TabsList",et=a.forwardRef((s,o)=>{const{__scopeTabs:t,loop:n=!0,...r}=s,d=Le(Qe,t),i=Ze(t);return e.jsx(qt,{asChild:!0,...i,orientation:d.orientation,dir:d.dir,loop:n,children:e.jsx(O.div,{role:"tablist","aria-orientation":d.orientation,...r,ref:o})})});et.displayName=Qe;var tt="TabsTrigger",st=a.forwardRef((s,o)=>{const{__scopeTabs:t,value:n,disabled:r=!1,...d}=s,i=Le(tt,t),l=Ze(t),c=rt(i.baseId,n),u=at(i.baseId,n),h=n===i.value;return e.jsx(Yt,{asChild:!0,...l,focusable:!r,active:h,children:e.jsx(O.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...d,ref:o,onMouseDown:L(s.onMouseDown,g=>{!r&&g.button===0&&g.ctrlKey===!1?i.onValueChange(n):g.preventDefault()}),onKeyDown:L(s.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&i.onValueChange(n)}),onFocus:L(s.onFocus,()=>{const g=i.activationMode!=="manual";!h&&!r&&g&&i.onValueChange(n)})})})});st.displayName=tt;var ot="TabsContent",nt=a.forwardRef((s,o)=>{const{__scopeTabs:t,value:n,forceMount:r,children:d,...i}=s,l=Le(ot,t),c=rt(l.baseId,n),u=at(l.baseId,n),h=n===l.value,g=a.useRef(h);return a.useEffect(()=>{const f=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx(Xt,{present:r||h,children:({present:f})=>e.jsx(O.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...i,ref:o,style:{...s.style,animationDuration:g.current?"0s":void 0},children:f&&d})})});nt.displayName=ot;function rt(s,o){return`${s}-trigger-${o}`}function at(s,o){return`${s}-content-${o}`}var Bs=Je,$s=et,zs=st,Gs=nt;function lt({className:s,...o}){return e.jsx(Bs,{"data-slot":"tabs",className:E("flex flex-col gap-2",s),...o})}function it({className:s,...o}){return e.jsx($s,{"data-slot":"tabs-list",className:E("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",s),...o})}function ct({className:s,...o}){return e.jsx(zs,{"data-slot":"tabs-trigger",className:E("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...o})}function dt({className:s,...o}){return e.jsx(Gs,{"data-slot":"tabs-content",className:E("flex-1 outline-none",s),...o})}const Us=[{icon:Zt,label:"Bar",key:me.BAR},{icon:As,label:"Line",key:me.LINE},{icon:Rs,label:"Scatter",key:me.SCATTER},{icon:Es,label:"Area",key:me.AREA}],U={CHART_TYPE_SELECT:{label:"Choose Chart Type",value:1},DATA_SELECT:{label:"Select Data Source",value:2},CUSTOMIZATION:{label:"Customize",value:3}},Ws=s=>{const{currentStep:o,onStepChange:t,checkIfStepIsDisabled:n}=s;return e.jsx(it,{className:"w-full justify-start h-12 px-6 border-b border-b-secondary bg-primary-foreground",children:Object.values(U).map(r=>{const d=n(r.value),i=r.value===o;return e.jsxs(ct,{value:r.value.toString(),disabled:d,onClick:()=>t(r.value),className:E("flex-1 h-full data-[state=active]:font-semibold data-[state=active]:shadow-none !bg-primary-foreground transition-all cursor-pointer",d&&"!cursor-not-allowed"),children:[e.jsx("span",{className:E(`mr-2 w-6 h-6 rounded-full ${r.value<=o?"bg-transparent text-primary border border-primary":"bg-foreground/10 text-accent-foreground"} flex items-center justify-center text-sm`,i&&"!bg-primary !text-background !border-primary rounded-full"),children:r.value}),e.jsx("span",{className:r.value<=o?"text-primary":"text-muted-foreground",children:r.label})]},r.value)})})},Ks=a.memo(Ws),qs=s=>{const{disableNextStep:o,onNext:t,onPrevious:n,isLastStep:r,disablePreviousStep:d}=s;return e.jsxs("div",{className:"flex-shrink-0 px-6 py-4 flex justify-between items-center border-t border-t-secondary bg-primary-foreground",children:[e.jsx(J,{onClick:n,variant:"outline",disabled:d,children:"Previous"}),e.jsx(J,{variant:"default",disabled:o,onClick:t,children:r?"Finish":"Next"})]})},Ys=a.memo(qs),Xs=s=>{const{tabValue:o,sectionJsx:t,chartPreviewJsx:n}=s,[r,d]=a.useState(!0),[i,l]=a.useState(!0),c=()=>{const u=!r;d(u),setTimeout(()=>{l(u)},300)};return e.jsx(dt,{value:o,className:"flex-grow flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex flex-grow p-6 space-x-6",children:[e.jsx("div",{className:E("flex-grow flex flex-col bg-background-light rounded-lg shadow-sm border border- transition-all duration-300",r?"w-2/3":"flex-grow"),children:t}),e.jsxs("div",{className:E("bg-background-light py-2 px-1 space-y-6 rounded-lg shadow-sm border border- transition-all duration-300 flex flex-col",r?"w-1/3":"w-16"),children:[e.jsxs("div",{className:"flex items-center p-1",children:[e.jsx(J,{variant:"ghost",className:"p-2",onClick:c,children:r?e.jsx(Ue,{className:"h-6 w-6"}):e.jsx(Ge,{className:"h-6 w-6"})}),r&&e.jsx("h4",{className:"font-semibold mb-0 text-xl flex-grow",children:"Chart Preview"})]}),i&&r&&e.jsx("div",{className:E("flex-grow flex w-full items-center relative"),children:n||e.jsxs("div",{className:" absolute w-full top-1/2 -translate-y-1/2 flex flex-col items-center justify-center gap-5",children:[e.jsx(Jt,{className:"text-primary/50 h-20 w-20"}),e.jsx("p",{className:"text-accent-foreground text-center",children:"Select traces on the left to preview chart"})]})})]})]})})},Zs=a.memo(Xs),Js=s=>{const{tabValue:o,onChartSelect:t,selectedChartType:n}=s;return e.jsxs(dt,{value:o,className:"flex-grow flex flex-col p-6 overflow-y-auto",children:[e.jsx("h2",{className:"text-3xl font-medium text-foreground my-8 text-center tracking-normal",children:"Select Chart Type"}),e.jsx("div",{className:"flex-grow w-full grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 pt-20",children:Us.map(r=>e.jsxs(J,{variant:"outline",className:E("h-52 flex flex-col items-center justify-center gap-4 bg-gradient-to-br transition-all duration-300 shadow-sm hover:shadow-md","from-white to-primary/10 hover:from-white hover:to-primary/30","dark:from-secondary dark:to-primary/30 dark:hover:to-primary/80",n===r.key&&"from-primary-light to-primary/50 dark:from-primary/40 dark:to-primary/80 shadow-md"),onClick:()=>t(r.key),children:[e.jsx(r.icon,{className:"!h-16 !w-16 mb-2 text-primary"}),e.jsx("span",{className:"font-medium text-2xl text-foreground",children:r.label})]},r.label))})]})},Qs=a.memo(Js);function ut(s){const o=a.useRef({value:s,previous:s});return a.useMemo(()=>(o.current.value!==s&&(o.current.previous=o.current.value,o.current.value=s),o.current.previous),[s])}var eo=[" ","Enter","ArrowUp","ArrowDown"],to=[" ","Enter"],ue="Select",[be,Se,so]=es(ue),[ae,fn]=Me(ue,[so,We]),Ce=We(),[oo,ee]=ae(ue),[no,ro]=ae(ue),ft=s=>{const{__scopeSelect:o,children:t,open:n,defaultOpen:r,onOpenChange:d,value:i,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:g,disabled:f,required:C,form:T}=s,p=Ce(o),[S,y]=a.useState(null),[m,v]=a.useState(null),[_,M]=a.useState(!1),V=$e(u),[F=!1,H]=xe({prop:n,defaultProp:r,onChange:d}),[x,b]=xe({prop:i,defaultProp:l,onChange:c}),N=a.useRef(null),j=S?T||!!S.closest("form"):!0,[k,D]=a.useState(new Set),G=Array.from(k).map(B=>B.props.value).join(";");return e.jsx(Qt,{...p,children:e.jsxs(oo,{required:C,scope:o,trigger:S,onTriggerChange:y,valueNode:m,onValueNodeChange:v,valueNodeHasChildren:_,onValueNodeHasChildrenChange:M,contentId:ve(),value:x,onValueChange:b,open:F,onOpenChange:H,dir:V,triggerPointerDownPosRef:N,disabled:f,children:[e.jsx(be.Provider,{scope:o,children:e.jsx(no,{scope:s.__scopeSelect,onNativeOptionAdd:a.useCallback(B=>{D(q=>new Set(q).add(B))},[]),onNativeOptionRemove:a.useCallback(B=>{D(q=>{const Y=new Set(q);return Y.delete(B),Y})},[]),children:t})}),j?e.jsxs(Dt,{"aria-hidden":!0,required:C,tabIndex:-1,name:h,autoComplete:g,value:x,onChange:B=>b(B.target.value),disabled:f,form:T,children:[x===void 0?e.jsx("option",{value:""}):null,Array.from(k)]},G):null]})})};ft.displayName=ue;var pt="SelectTrigger",mt=a.forwardRef((s,o)=>{const{__scopeSelect:t,disabled:n=!1,...r}=s,d=Ce(t),i=ee(pt,t),l=i.disabled||n,c=K(o,i.onTriggerChange),u=Se(t),h=a.useRef("touch"),[g,f,C]=Lt(p=>{const S=u().filter(v=>!v.disabled),y=S.find(v=>v.value===i.value),m=Ot(S,p,y);m!==void 0&&i.onValueChange(m.value)}),T=p=>{l||(i.onOpenChange(!0),C()),p&&(i.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(ts,{asChild:!0,...d,children:e.jsx(O.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Mt(i.value)?"":void 0,...r,ref:c,onClick:L(r.onClick,p=>{p.currentTarget.focus(),h.current!=="mouse"&&T(p)}),onPointerDown:L(r.onPointerDown,p=>{h.current=p.pointerType;const S=p.target;S.hasPointerCapture(p.pointerId)&&S.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(T(p),p.preventDefault())}),onKeyDown:L(r.onKeyDown,p=>{const S=g.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&f(p.key),!(S&&p.key===" ")&&eo.includes(p.key)&&(T(),p.preventDefault())})})})});mt.displayName=pt;var ht="SelectValue",xt=a.forwardRef((s,o)=>{const{__scopeSelect:t,className:n,style:r,children:d,placeholder:i="",...l}=s,c=ee(ht,t),{onValueNodeHasChildrenChange:u}=c,h=d!==void 0,g=K(o,c.onValueNodeChange);return Q(()=>{u(h)},[u,h]),e.jsx(O.span,{...l,ref:g,style:{pointerEvents:"none"},children:Mt(c.value)?e.jsx(e.Fragment,{children:i}):d})});xt.displayName=ht;var ao="SelectIcon",gt=a.forwardRef((s,o)=>{const{__scopeSelect:t,children:n,...r}=s;return e.jsx(O.span,{"aria-hidden":!0,...r,ref:o,children:n||"▼"})});gt.displayName=ao;var lo="SelectPortal",vt=s=>e.jsx(ss,{asChild:!0,...s});vt.displayName=lo;var ne="SelectContent",bt=a.forwardRef((s,o)=>{const t=ee(ne,s.__scopeSelect),[n,r]=a.useState();if(Q(()=>{r(new DocumentFragment)},[]),!t.open){const d=n;return d?Ke.createPortal(e.jsx(St,{scope:s.__scopeSelect,children:e.jsx(be.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),d):null}return e.jsx(Ct,{...s,ref:o})});bt.displayName=ne;var W=10,[St,te]=ae(ne),io="SelectContentImpl",Ct=a.forwardRef((s,o)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:d,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:g,collisionBoundary:f,collisionPadding:C,sticky:T,hideWhenDetached:p,avoidCollisions:S,...y}=s,m=ee(ne,t),[v,_]=a.useState(null),[M,V]=a.useState(null),F=K(o,w=>_(w)),[H,x]=a.useState(null),[b,N]=a.useState(null),j=Se(t),[k,D]=a.useState(!1),G=a.useRef(!1);a.useEffect(()=>{if(v)return rs(v)},[v]),as();const B=a.useCallback(w=>{const[R,...$]=j().map(P=>P.ref.current),[A]=$.slice(-1),I=document.activeElement;for(const P of w)if(P===I||(P==null||P.scrollIntoView({block:"nearest"}),P===R&&M&&(M.scrollTop=0),P===A&&M&&(M.scrollTop=M.scrollHeight),P==null||P.focus(),document.activeElement!==I))return},[j,M]),q=a.useCallback(()=>B([H,v]),[B,H,v]);a.useEffect(()=>{k&&q()},[k,q]);const{onOpenChange:Y,triggerPointerDownPosRef:X}=m;a.useEffect(()=>{if(v){let w={x:0,y:0};const R=A=>{var I,P;w={x:Math.abs(Math.round(A.pageX)-(((I=X.current)==null?void 0:I.x)??0)),y:Math.abs(Math.round(A.pageY)-(((P=X.current)==null?void 0:P.y)??0))}},$=A=>{w.x<=10&&w.y<=10?A.preventDefault():v.contains(A.target)||Y(!1),document.removeEventListener("pointermove",R),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",R),document.addEventListener("pointerup",$,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",$,{capture:!0})}}},[v,Y,X]),a.useEffect(()=>{const w=()=>Y(!1);return window.addEventListener("blur",w),window.addEventListener("resize",w),()=>{window.removeEventListener("blur",w),window.removeEventListener("resize",w)}},[Y]);const[ye,fe]=Lt(w=>{const R=j().filter(I=>!I.disabled),$=R.find(I=>I.ref.current===document.activeElement),A=Ot(R,w,$);A&&setTimeout(()=>A.ref.current.focus())}),we=a.useCallback((w,R,$)=>{const A=!G.current&&!$;(m.value!==void 0&&m.value===R||A)&&(x(w),A&&(G.current=!0))},[m.value]),Ne=a.useCallback(()=>v==null?void 0:v.focus(),[v]),re=a.useCallback((w,R,$)=>{const A=!G.current&&!$;(m.value!==void 0&&m.value===R||A)&&N(w)},[m.value]),pe=n==="popper"?Ee:yt,le=pe===Ee?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:g,collisionBoundary:f,collisionPadding:C,sticky:T,hideWhenDetached:p,avoidCollisions:S}:{};return e.jsx(St,{scope:t,content:v,viewport:M,onViewportChange:V,itemRefCallback:we,selectedItem:H,onItemLeave:Ne,itemTextRefCallback:re,focusSelectedItem:q,selectedItemText:b,position:n,isPositioned:k,searchRef:ye,children:e.jsx(ls,{as:is,allowPinchZoom:!0,children:e.jsx(cs,{asChild:!0,trapped:m.open,onMountAutoFocus:w=>{w.preventDefault()},onUnmountAutoFocus:L(r,w=>{var R;(R=m.trigger)==null||R.focus({preventScroll:!0}),w.preventDefault()}),children:e.jsx(ds,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:i,onFocusOutside:w=>w.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:e.jsx(pe,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:w=>w.preventDefault(),...y,...le,onPlaced:()=>D(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:L(y.onKeyDown,w=>{const R=w.ctrlKey||w.altKey||w.metaKey;if(w.key==="Tab"&&w.preventDefault(),!R&&w.key.length===1&&fe(w.key),["ArrowUp","ArrowDown","Home","End"].includes(w.key)){let A=j().filter(I=>!I.disabled).map(I=>I.ref.current);if(["ArrowUp","End"].includes(w.key)&&(A=A.slice().reverse()),["ArrowUp","ArrowDown"].includes(w.key)){const I=w.target,P=A.indexOf(I);A=A.slice(P+1)}setTimeout(()=>B(A)),w.preventDefault()}})})})})})})});Ct.displayName=io;var co="SelectItemAlignedPosition",yt=a.forwardRef((s,o)=>{const{__scopeSelect:t,onPlaced:n,...r}=s,d=ee(ne,t),i=te(ne,t),[l,c]=a.useState(null),[u,h]=a.useState(null),g=K(o,F=>h(F)),f=Se(t),C=a.useRef(!1),T=a.useRef(!0),{viewport:p,selectedItem:S,selectedItemText:y,focusSelectedItem:m}=i,v=a.useCallback(()=>{if(d.trigger&&d.valueNode&&l&&u&&p&&S&&y){const F=d.trigger.getBoundingClientRect(),H=u.getBoundingClientRect(),x=d.valueNode.getBoundingClientRect(),b=y.getBoundingClientRect();if(d.dir!=="rtl"){const I=b.left-H.left,P=x.left-I,se=F.left-P,oe=F.width+se,Te=Math.max(oe,H.width),je=window.innerWidth-W,Ie=Ve(P,[W,Math.max(W,je-Te)]);l.style.minWidth=oe+"px",l.style.left=Ie+"px"}else{const I=H.right-b.right,P=window.innerWidth-x.right-I,se=window.innerWidth-F.right-P,oe=F.width+se,Te=Math.max(oe,H.width),je=window.innerWidth-W,Ie=Ve(P,[W,Math.max(W,je-Te)]);l.style.minWidth=oe+"px",l.style.right=Ie+"px"}const N=f(),j=window.innerHeight-W*2,k=p.scrollHeight,D=window.getComputedStyle(u),G=parseInt(D.borderTopWidth,10),B=parseInt(D.paddingTop,10),q=parseInt(D.borderBottomWidth,10),Y=parseInt(D.paddingBottom,10),X=G+B+k+Y+q,ye=Math.min(S.offsetHeight*5,X),fe=window.getComputedStyle(p),we=parseInt(fe.paddingTop,10),Ne=parseInt(fe.paddingBottom,10),re=F.top+F.height/2-W,pe=j-re,le=S.offsetHeight/2,w=S.offsetTop+le,R=G+B+w,$=X-R;if(R<=re){const I=N.length>0&&S===N[N.length-1].ref.current;l.style.bottom="0px";const P=u.clientHeight-p.offsetTop-p.offsetHeight,se=Math.max(pe,le+(I?Ne:0)+P+q),oe=R+se;l.style.height=oe+"px"}else{const I=N.length>0&&S===N[0].ref.current;l.style.top="0px";const se=Math.max(re,G+p.offsetTop+(I?we:0)+le)+$;l.style.height=se+"px",p.scrollTop=R-re+p.offsetTop}l.style.margin=`${W}px 0`,l.style.minHeight=ye+"px",l.style.maxHeight=j+"px",n==null||n(),requestAnimationFrame(()=>C.current=!0)}},[f,d.trigger,d.valueNode,l,u,p,S,y,d.dir,n]);Q(()=>v(),[v]);const[_,M]=a.useState();Q(()=>{u&&M(window.getComputedStyle(u).zIndex)},[u]);const V=a.useCallback(F=>{F&&T.current===!0&&(v(),m==null||m(),T.current=!1)},[v,m]);return e.jsx(fo,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:C,onScrollButtonChange:V,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:e.jsx(O.div,{...r,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});yt.displayName=co;var uo="SelectPopperPosition",Ee=a.forwardRef((s,o)=>{const{__scopeSelect:t,align:n="start",collisionPadding:r=W,...d}=s,i=Ce(t);return e.jsx(us,{...i,...d,ref:o,align:n,collisionPadding:r,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ee.displayName=uo;var[fo,Oe]=ae(ne,{}),_e="SelectViewport",wt=a.forwardRef((s,o)=>{const{__scopeSelect:t,nonce:n,...r}=s,d=te(_e,t),i=Oe(_e,t),l=K(o,d.onViewportChange),c=a.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(be.Slot,{scope:t,children:e.jsx(O.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:L(r.onScroll,u=>{const h=u.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&g){const C=Math.abs(c.current-h.scrollTop);if(C>0){const T=window.innerHeight-W*2,p=parseFloat(g.style.minHeight),S=parseFloat(g.style.height),y=Math.max(p,S);if(y<T){const m=y+C,v=Math.min(T,m),_=m-v;g.style.height=v+"px",g.style.bottom==="0px"&&(h.scrollTop=_>0?_:0,g.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});wt.displayName=_e;var Nt="SelectGroup",[po,mo]=ae(Nt),ho=a.forwardRef((s,o)=>{const{__scopeSelect:t,...n}=s,r=ve();return e.jsx(po,{scope:t,id:r,children:e.jsx(O.div,{role:"group","aria-labelledby":r,...n,ref:o})})});ho.displayName=Nt;var Tt="SelectLabel",xo=a.forwardRef((s,o)=>{const{__scopeSelect:t,...n}=s,r=mo(Tt,t);return e.jsx(O.div,{id:r.id,...n,ref:o})});xo.displayName=Tt;var ge="SelectItem",[go,jt]=ae(ge),It=a.forwardRef((s,o)=>{const{__scopeSelect:t,value:n,disabled:r=!1,textValue:d,...i}=s,l=ee(ge,t),c=te(ge,t),u=l.value===n,[h,g]=a.useState(d??""),[f,C]=a.useState(!1),T=K(o,m=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,m,n,r)}),p=ve(),S=a.useRef("touch"),y=()=>{r||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(go,{scope:t,value:n,disabled:r,textId:p,isSelected:u,onItemTextChange:a.useCallback(m=>{g(v=>v||((m==null?void 0:m.textContent)??"").trim())},[]),children:e.jsx(be.ItemSlot,{scope:t,value:n,disabled:r,textValue:h,children:e.jsx(O.div,{role:"option","aria-labelledby":p,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...i,ref:T,onFocus:L(i.onFocus,()=>C(!0)),onBlur:L(i.onBlur,()=>C(!1)),onClick:L(i.onClick,()=>{S.current!=="mouse"&&y()}),onPointerUp:L(i.onPointerUp,()=>{S.current==="mouse"&&y()}),onPointerDown:L(i.onPointerDown,m=>{S.current=m.pointerType}),onPointerMove:L(i.onPointerMove,m=>{var v;S.current=m.pointerType,r?(v=c.onItemLeave)==null||v.call(c):S.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:L(i.onPointerLeave,m=>{var v;m.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:L(i.onKeyDown,m=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&m.key===" "||(to.includes(m.key)&&y(),m.key===" "&&m.preventDefault())})})})})});It.displayName=ge;var ie="SelectItemText",Pt=a.forwardRef((s,o)=>{const{__scopeSelect:t,className:n,style:r,...d}=s,i=ee(ie,t),l=te(ie,t),c=jt(ie,t),u=ro(ie,t),[h,g]=a.useState(null),f=K(o,y=>g(y),c.onItemTextChange,y=>{var m;return(m=l.itemTextRefCallback)==null?void 0:m.call(l,y,c.value,c.disabled)}),C=h==null?void 0:h.textContent,T=a.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:C},c.value),[c.disabled,c.value,C]),{onNativeOptionAdd:p,onNativeOptionRemove:S}=u;return Q(()=>(p(T),()=>S(T)),[p,S,T]),e.jsxs(e.Fragment,{children:[e.jsx(O.span,{id:c.textId,...d,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Ke.createPortal(d.children,i.valueNode):null]})});Pt.displayName=ie;var Et="SelectItemIndicator",_t=a.forwardRef((s,o)=>{const{__scopeSelect:t,...n}=s;return jt(Et,t).isSelected?e.jsx(O.span,{"aria-hidden":!0,...n,ref:o}):null});_t.displayName=Et;var Ae="SelectScrollUpButton",At=a.forwardRef((s,o)=>{const t=te(Ae,s.__scopeSelect),n=Oe(Ae,s.__scopeSelect),[r,d]=a.useState(!1),i=K(o,n.onScrollButtonChange);return Q(()=>{if(t.viewport&&t.isPositioned){let l=function(){const u=c.scrollTop>0;d(u)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?e.jsx(Rt,{...s,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});At.displayName=Ae;var ke="SelectScrollDownButton",kt=a.forwardRef((s,o)=>{const t=te(ke,s.__scopeSelect),n=Oe(ke,s.__scopeSelect),[r,d]=a.useState(!1),i=K(o,n.onScrollButtonChange);return Q(()=>{if(t.viewport&&t.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;d(h)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?e.jsx(Rt,{...s,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});kt.displayName=ke;var Rt=a.forwardRef((s,o)=>{const{__scopeSelect:t,onAutoScroll:n,...r}=s,d=te("SelectScrollButton",t),i=a.useRef(null),l=Se(t),c=a.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return a.useEffect(()=>()=>c(),[c]),Q(()=>{var h;const u=l().find(g=>g.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),e.jsx(O.div,{"aria-hidden":!0,...r,ref:o,style:{flexShrink:0,...r.style},onPointerDown:L(r.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:L(r.onPointerMove,()=>{var u;(u=d.onItemLeave)==null||u.call(d),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:L(r.onPointerLeave,()=>{c()})})}),vo="SelectSeparator",bo=a.forwardRef((s,o)=>{const{__scopeSelect:t,...n}=s;return e.jsx(O.div,{"aria-hidden":!0,...n,ref:o})});bo.displayName=vo;var Re="SelectArrow",So=a.forwardRef((s,o)=>{const{__scopeSelect:t,...n}=s,r=Ce(t),d=ee(Re,t),i=te(Re,t);return d.open&&i.position==="popper"?e.jsx(fs,{...r,...n,ref:o}):null});So.displayName=Re;function Mt(s){return s===""||s===void 0}var Dt=a.forwardRef((s,o)=>{const{value:t,...n}=s,r=a.useRef(null),d=K(o,r),i=ut(t);return a.useEffect(()=>{const l=r.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&h){const g=new Event("change",{bubbles:!0});h.call(l,t),l.dispatchEvent(g)}},[i,t]),e.jsx(os,{asChild:!0,children:e.jsx("select",{...n,ref:d,defaultValue:t})})});Dt.displayName="BubbleSelect";function Lt(s){const o=ns(s),t=a.useRef(""),n=a.useRef(0),r=a.useCallback(i=>{const l=t.current+i;o(l),function c(u){t.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[o]),d=a.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,r,d]}function Ot(s,o,t){const r=o.length>1&&Array.from(o).every(u=>u===o[0])?o[0]:o,d=t?s.indexOf(t):-1;let i=Co(s,Math.max(d,0));r.length===1&&(i=i.filter(u=>u!==t));const c=i.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==t?c:void 0}function Co(s,o){return s.map((t,n)=>s[(o+n)%s.length])}var yo=ft,wo=mt,No=xt,To=gt,jo=vt,Io=bt,Po=wt,Eo=It,_o=Pt,Ao=_t,ko=At,Ro=kt;function Ft({...s}){return e.jsx(yo,{"data-slot":"select",...s})}function Vt({...s}){return e.jsx(No,{"data-slot":"select-value",...s})}function Ht({className:s,children:o,...t}){return e.jsxs(wo,{"data-slot":"select-trigger",className:E("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-full items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t,children:[o,e.jsx(To,{asChild:!0,children:e.jsx(Ye,{className:"size-4 opacity-50"})})]})}function Bt({className:s,children:o,position:t="popper",...n}){return e.jsx(jo,{children:e.jsxs(Io,{"data-slot":"select-content",className:E("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...n,children:[e.jsx(Mo,{}),e.jsx(Po,{className:E("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:o}),e.jsx(Do,{})]})})}function ce({className:s,children:o,...t}){return e.jsxs(Eo,{"data-slot":"select-item",className:E("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...t,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Ao,{children:e.jsx(Xe,{className:"size-4"})})}),e.jsx(_o,{children:o})]})}function Mo({className:s,...o}){return e.jsx(ko,{"data-slot":"select-scroll-up-button",className:E("flex cursor-default items-center justify-center py-1",s),...o,children:e.jsx(Ls,{className:"size-4"})})}function Do({className:s,...o}){return e.jsx(Ro,{"data-slot":"select-scroll-down-button",className:E("flex cursor-default items-center justify-center py-1",s),...o,children:e.jsx(Ye,{className:"size-4"})})}function $t(s,o){const t=a.useRef(void 0);return a.useCallback((...n)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{s(...n)},o)},[s,o])}const Lo=s=>{const{activeAxis:o,axisOptions:t,selectedTraceIndex:n,onTraceEdit:r,onAxisOptionClick:d,traces:i,uploadedFiles:l,onTraceDelete:c,onTraceSettingsItemEdit:u}=s,h=$t(u,1e3),g=a.useMemo(()=>i.length?i.map((f,C)=>{var T,p,S,y,m,v,_,M;return e.jsxs("div",{className:E("flex flex-col bg-background-light p-3 rounded-lg border",C===n?"border-primary":""),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",className:"w-4 h-4 aspect-square flex-shrink-0 rounded-full cursor-pointer",defaultValue:f.settings.color,onChange:V=>h(V.target.value,C,"color")}),e.jsx(Z,{defaultValue:f.settings.name,onChange:V=>h(V.target.value,C,"name"),className:"font-medium bg-transparent border-none p-0 focus:ring-0"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{if(C===n)return r(null);r(C)},children:C===n?e.jsx(Xe,{className:"h-4 w-4"}):e.jsx(ps,{className:"h-4 w-4"})}),e.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{console.log("traceIndex",C),c(C)},children:e.jsx(ms,{className:"h-4 w-4"})})]})]}),(f==null?void 0:f.x)&&e.jsxs("div",{className:"text-sm text-accent-foreground",children:[e.jsx("span",{className:"font-semibold",children:"X: "}),e.jsxs("span",{className:"text-primary",children:[((S=(p=l[((T=f==null?void 0:f.x)==null?void 0:T.fileId)??""])==null?void 0:p.name)==null?void 0:S.slice(0,20))+"..."," :"," "]}),e.jsx("span",{style:{color:f.settings.color},children:(y=f==null?void 0:f.x)==null?void 0:y.column})]}),(f==null?void 0:f.y)&&e.jsxs("div",{className:"text-sm text-accent-foreground",children:[e.jsx("span",{className:"font-semibold",children:"Y: "}),e.jsxs("span",{className:"text-primary",children:[((_=(v=l[((m=f==null?void 0:f.y)==null?void 0:m.fileId)??""])==null?void 0:v.name)==null?void 0:_.slice(0,20))+"..."," :"," "]}),e.jsx("span",{style:{color:f.settings.color},children:(M=f==null?void 0:f.y)==null?void 0:M.column})]})]},C)}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-0",children:"Traces"}),e.jsx("p",{className:"text-sm text-accent-foreground",children:"Your selections will appear here"})]}),[c,r,h,n,i,l]);return e.jsxs("div",{className:"h-[135px] flex bg-background-light border-b-2 rounded-lg rounded-b-none",children:[e.jsx("div",{className:E("w-3/4 p-2 h-auto overflow-y-auto",i.length&&"grid grid-cols-1 gap-2 md:grid-cols-2"),children:g}),e.jsxs("div",{className:"w-1/4 border-l flex flex-col justify-between gap-5 p-2",children:[e.jsx(lt,{value:o,onValueChange:f=>d(f),className:"w-full",children:e.jsx(it,{className:"w-full flex",children:t.map(f=>e.jsxs(ct,{value:f,className:"capitalize w-full",children:[f,"-axis"]},f))})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"algorithm-select",className:"block text-sm font-medium text-foreground mb-1",children:"Auto Selection Algorithm"}),e.jsxs(Ft,{value:"",children:[e.jsx(Ht,{id:"algorithm-select",className:"w-full",children:e.jsx(Vt,{placeholder:"Select algorithm"})}),e.jsxs(Bt,{children:[e.jsx(ce,{value:"linear",children:"Linear"}),e.jsx(ce,{value:"logarithmic",children:"Logarithmic"}),e.jsx(ce,{value:"exponential",children:"Exponential"})]})]})]})]})]})},Oo=a.memo(Lo),Fo=s=>{const{isFileColumnCollapsed:o,selectedFileId:t,setSelectedFileId:n,setIsFileColumnCollapsed:r,uploadedFiles:d,dataGridProps:i}=s,{theme:l}=hs(),c=a.useMemo(()=>Object.entries(d).map(([u,h])=>e.jsx("li",{children:e.jsx(J,{variant:t===u?"default":"outline",className:E("h-auto w-full overflow-hidden transition-all duration-300 shadow-sm hover:shadow-sm"),onClick:()=>n(u),children:e.jsx("span",{className:"w-full text-ellipsis overflow-hidden font-medium ",children:h==null?void 0:h.name})})},u)),[t,n,d]);return e.jsxs("div",{className:"flex-grow flex",children:[e.jsxs("div",{className:`relative py-3 px-2 flex flex-col gap-4 bg-background-light transition-all duration-300 border-r rounded-bl-lg ${o?"w-12":"w-48"}`,children:[e.jsx(J,{variant:"ghost",className:"p-2 absolute right-1 top-1",onClick:()=>r(!o),children:o?e.jsx(Ue,{className:"h-6 w-6"}):e.jsx(Ge,{className:"h-6 w-6"})}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold mb-0 text-sm",children:"Uploaded files"}),e.jsx("ul",{className:"space-y-2 text-sm text-accent-foreground w-full",children:c})]})]}),e.jsx("div",{className:E("flex-grow bg-background-light overflow-y-auto ag-theme-quartz [&_.ag-root-wrapper]:rounded-none [&_.ag-root-wrapper]:border-none",l==="dark"?"ag-theme-quartz-dark":"ag-theme-quartz"),children:t?e.jsx(Ts,{...i}):e.jsx("div",{className:"flex justify-center items-center h-full w-full",children:e.jsx("h3",{className:"text-lg font-semibold mb-1 text-foreground",children:"Select a file to view its data."})})})]})},Vo=a.memo(Fo),Ho=["#ff0000","#0000ff","#ff00ff","#800000","#808000","#008000","#008080","#800080","#808080"],Bo=[["bg-[#ff0000]","bg-[#ff0000]/5","bg-[#ff0000]/10","bg-[#ff0000]/20","bg-[#ff0000]/30","bg-[#ff0000]/40","bg-[#ff0000]/50","bg-[#ff0000]/60","bg-[#ff0000]/70","bg-[#ff0000]/80","bg-[#ff0000]/90"],["bg-[#0000ff]","bg-[#0000ff]/5","bg-[#0000ff]/10","bg-[#0000ff]/20","bg-[#0000ff]/30","bg-[#0000ff]/40","bg-[#0000ff]/50","bg-[#0000ff]/60","bg-[#0000ff]/70","bg-[#0000ff]/80","bg-[#0000ff]/90"],["bg-[#ff00ff]","bg-[#ff00ff]/5","bg-[#ff00ff]/10","bg-[#ff00ff]/20","bg-[#ff00ff]/30","bg-[#ff00ff]/40","bg-[#ff00ff]/50","bg-[#ff00ff]/60","bg-[#ff00ff]/70","bg-[#ff00ff]/80","bg-[#ff00ff]/90"],["bg-[#800000]","bg-[#800000]/5","bg-[#800000]/10","bg-[#800000]/20","bg-[#800000]/30","bg-[#800000]/40","bg-[#800000]/50","bg-[#800000]/60","bg-[#800000]/70","bg-[#800000]/80","bg-[#800000]/90"],["bg-[#808000]","bg-[#808000]/5","bg-[#808000]/10","bg-[#808000]/20","bg-[#808000]/30","bg-[#808000]/40","bg-[#808000]/50","bg-[#808000]/60","bg-[#808000]/70","bg-[#808000]/80","bg-[#808000]/90"],["bg-[#008000]","bg-[#008000]/5","bg-[#008000]/10","bg-[#008000]/20","bg-[#008000]/30","bg-[#008000]/40","bg-[#008000]/50","bg-[#008000]/60","bg-[#008000]/70","bg-[#008000]/80","bg-[#008000]/90"],["bg-[#008080]","bg-[#008080]/5","bg-[#008080]/10","bg-[#008080]/20","bg-[#008080]/30","bg-[#008080]/40","bg-[#008080]/50","bg-[#008080]/60","bg-[#008080]/70","bg-[#008080]/80","bg-[#008080]/90"],["bg-[#800080]","bg-[#800080]/5","bg-[#800080]/10","bg-[#800080]/20","bg-[#800080]/30","bg-[#800080]/40","bg-[#800080]/50","bg-[#800080]/60","bg-[#800080]/70","bg-[#800080]/80","bg-[#800080]/90"],["bg-[#808080]","bg-[#808080]/5","bg-[#808080]/10","bg-[#808080]/20","bg-[#808080]/30","bg-[#808080]/40","bg-[#808080]/50","bg-[#808080]/60","bg-[#808080]/70","bg-[#808080]/80","bg-[#808080]/90"]];function He(s,o){const t=Bo.find(r=>r[0].includes(s));if(!t)return null;const n=Math.min(Math.floor(o/10),10);return t[n]}function $o(s){const{chartType:o,allTraces:t,completeTraces:n,addOrUpdateTrace:r}=s,d=Pe(x=>x.files),i=a.useMemo(()=>{const{xRequired:x,yRequired:b}=qe[o],N=[];return x&&N.push("x"),b&&N.push("y"),N},[o]),[l,c]=a.useState(""),[u,h]=a.useState(i[0]),[g,f]=a.useState(null),[C,T]=a.useState(null),p=n.length,S=g===null?p:g,y=a.useMemo(()=>{var x;return((x=d[l])==null?void 0:x.data)??[]},[l,d]),m=a.useMemo(()=>y.reduce((b,N)=>(Object.keys(N).forEach(j=>{b.includes(j)||b.push(j)}),b),[]).map(b=>({field:b,cellClass:()=>{if(b===C)return"cursor-pointer bg-primary/10";const N=t.find(j=>{var k,D;return((k=j.x)==null?void 0:k.fileId)===l&&j.x.column===b||((D=j.y)==null?void 0:D.fileId)===l&&j.y.column===b});return N?`cursor-pointer ${He(N.settings.color,20)}`:"cursor-pointer"},headerClass:()=>{if(b===C)return"bg-primary/10 hover:!bg-primary/10 cursor-pointer";const N=t.find(j=>{var k,D;return((k=j.x)==null?void 0:k.fileId)===l&&j.x.column===b||((D=j.y)==null?void 0:D.fileId)===l&&j.y.column===b});return N?`cursor-pointer hover:!bg-primary ${He(N.settings.color,20)}`:"cursor-pointer"}})),[t,y,C,l]),v=a.useMemo(()=>({editable:!1,filter:!1,resizable:!0}),[]),_=a.useCallback(x=>{r({[u]:{fileId:l,column:x.colDef.field}},S)},[r,u,l,S]),M=a.useCallback(x=>{T(x.colDef.field||null)},[]),V=a.useCallback(()=>{T(null)},[]),F=a.useCallback(x=>{T(x.column.getId()||null)},[]),H=a.useCallback(()=>{T(null)},[]);return{dataGridProps:{rowData:y,columnDefs:m,defaultColDef:v,suppressRowClickSelection:!0,suppressCellFocus:!0,suppressRowHoverHighlight:!0,suppressHeaderFocus:!0,onCellClicked:_,onCellMouseOver:M,onCellMouseOut:V,onColumnHeaderMouseOver:F,onColumnHeaderMouseLeave:H},defaultTraceIndex:p,selectedTraceIndex:g,setSelectedTraceIndex:f,uploadedFiles:d,selectedFileId:l,axisOptions:i,activeAxis:u,setActiveAxis:h,setSelectedFileId:c}}function zo(){const[s,o]=a.useState(!1),[t,n]=a.useState(!1);return{isFileColumnCollapsed:s,setIsFileColumnCollapsed:o,isChartColumnCollapsed:t,setIsChartColumnCollapsed:n}}const Go=s=>{const{addOrUpdateTrace:o,chartType:t,allTraces:n,completeTraces:r,deleteTrace:d,editTraceSettingsItem:i}=s,{uploadedFiles:l,selectedFileId:c,activeAxis:u,axisOptions:h,selectedTraceIndex:g,setSelectedTraceIndex:f,setActiveAxis:C,setSelectedFileId:T,dataGridProps:p}=$o({chartType:t,allTraces:n,completeTraces:r,addOrUpdateTrace:o}),{isFileColumnCollapsed:S,setIsFileColumnCollapsed:y}=zo();return e.jsxs(e.Fragment,{children:[e.jsx(Oo,{activeAxis:u,axisOptions:h,onAxisOptionClick:C,traces:r,uploadedFiles:l,selectedTraceIndex:g,onTraceEdit:f,onTraceDelete:d,onTraceSettingsItemEdit:i}),e.jsx(Vo,{dataGridProps:p,isFileColumnCollapsed:S,setIsFileColumnCollapsed:y,uploadedFiles:l,selectedFileId:c,setSelectedFileId:T})]})},Uo=a.memo(Go);var Wo="Label",zt=a.forwardRef((s,o)=>e.jsx(O.label,{...s,ref:o,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=s.onMouseDown)==null||r.call(s,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));zt.displayName=Wo;var Ko=zt;function z({className:s,...o}){return e.jsx(Ko,{"data-slot":"label",className:E("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...o})}var Fe="Switch",[qo,pn]=Me(Fe),[Yo,Xo]=qo(Fe),Gt=a.forwardRef((s,o)=>{const{__scopeSwitch:t,name:n,checked:r,defaultChecked:d,required:i,disabled:l,value:c="on",onCheckedChange:u,form:h,...g}=s,[f,C]=a.useState(null),T=K(o,v=>C(v)),p=a.useRef(!1),S=f?h||!!f.closest("form"):!0,[y=!1,m]=xe({prop:r,defaultProp:d,onChange:u});return e.jsxs(Yo,{scope:t,checked:y,disabled:l,children:[e.jsx(O.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":Kt(y),"data-disabled":l?"":void 0,disabled:l,value:c,...g,ref:T,onClick:L(s.onClick,v=>{m(_=>!_),S&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})}),S&&e.jsx(Zo,{control:f,bubbles:!p.current,name:n,value:c,checked:y,required:i,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});Gt.displayName=Fe;var Ut="SwitchThumb",Wt=a.forwardRef((s,o)=>{const{__scopeSwitch:t,...n}=s,r=Xo(Ut,t);return e.jsx(O.span,{"data-state":Kt(r.checked),"data-disabled":r.disabled?"":void 0,...n,ref:o})});Wt.displayName=Ut;var Zo=s=>{const{control:o,checked:t,bubbles:n=!0,...r}=s,d=a.useRef(null),i=ut(t),l=xs(o);return a.useEffect(()=>{const c=d.current,u=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==t&&g){const f=new Event("click",{bubbles:n});g.call(c,t),c.dispatchEvent(f)}},[i,t,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:d,style:{...s.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Kt(s){return s?"checked":"unchecked"}var Jo=Gt,Qo=Wt;function Be({className:s,...o}){return e.jsx(Jo,{"data-slot":"switch",className:E("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...o,children:e.jsx(Qo,{"data-slot":"switch-thumb",className:E("bg-white pointer-events-none block size-4 rounded-full ring-0 shadow-lg transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}const en=s=>{const{chartSettings:o,onSettingChange:t}=s;return e.jsxs("div",{className:"flex-grow flex overflow-y-auto",children:[e.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6 border-r-2 border-secondary",children:[e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(z,{htmlFor:"chart-title",className:"text-sm font-medium",children:"Chart title"}),e.jsx(Z,{type:"text",id:"chart-title",placeholder:"Chart title",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:o.title,onChange:n=>{t("title",n.target.value)}})]}),e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(z,{htmlFor:"chart-caption",className:"text-sm font-medium",children:"Chart title visibility"}),e.jsx(Be,{id:"chart-caption",defaultChecked:o.titleVisibility,onCheckedChange:n=>{t("titleVisibility",n)}})]}),e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(z,{htmlFor:"chart-legend-visibility",className:"text-sm font-medium",children:"Legend visibility"}),e.jsx(Be,{id:"chart-legend-visibility",defaultChecked:o.legendVisibility,onCheckedChange:n=>{t("legendVisibility",n)}})]}),e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(z,{htmlFor:"legend-position-select",className:"text-sm font-medium ",children:"Legend position"}),e.jsxs(Ft,{defaultValue:o.legendPosition,onValueChange:n=>{t("legendPosition",n)},children:[e.jsx(Ht,{id:"legend-position-select",className:"w-[100px]",children:e.jsx(Vt,{placeholder:"Select position"})}),e.jsxs(Bt,{children:[e.jsx(ce,{value:"top",children:"Top"}),e.jsx(ce,{value:"bottom",children:"Bottom"})]})]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6"})]})},tn=a.memo(en),sn=s=>{var r,d,i,l;const{chartSettings:o,onSettingChange:t}=s,n=(c,u,h)=>{if(c==="x"){t("xAxisLimits",{...o.xAxisLimits,[u]:h});return}t("yAxisLimits",{...o.yAxisLimits,[u]:h})};return e.jsxs("div",{className:"flex-grow flex overflow-y-auto",children:[e.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6 border-r-2 border-secondary",children:[e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(z,{htmlFor:"x-axis-label",className:"text-sm font-medium",children:"X axis label"}),e.jsx(Z,{type:"text",id:"x-axis-label",placeholder:"X axis label",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:o.xAxisLabel,onChange:c=>{t("xAxisLabel",c.target.value)}})]}),e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(z,{htmlFor:"x-axis-limits",className:"text-sm font-medium",children:"X axis limits"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{htmlFor:"y-axis-limits-min",className:"text-sm font-medium",children:"Min"}),e.jsx(Z,{type:"text",placeholder:"Min",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:(r=o.xAxisLimits)==null?void 0:r.min,onChange:c=>{n("x","min",c.target.value)}})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{htmlFor:"y-axis-limits-min",className:"text-sm font-medium",children:"Max"}),e.jsx(Z,{type:"text",placeholder:"Max",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:(d=o.xAxisLimits)==null?void 0:d.max,onChange:c=>{n("x","max",c.target.value)}})]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col space-y-4 pl-3 pr-6",children:[e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(z,{htmlFor:"y-axis-label",className:"text-sm font-medium",children:"Y axis label"}),e.jsx(Z,{type:"text",id:"y-axis-label",placeholder:"Y axis label",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:o.yAxisLabel,onChange:c=>{t("yAxisLabel",c.target.value)}})]}),e.jsxs("div",{className:"flex items-center gap-5 justify-between",children:[e.jsx(z,{htmlFor:"y-axis-limits",className:"text-sm font-medium",children:"Y axis limits"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{htmlFor:"y-axis-limits-min",className:"text-sm font-medium",children:"Min"}),e.jsx(Z,{type:"number",placeholder:"Min",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:(i=o.yAxisLimits)==null?void 0:i.min,onChange:c=>{n("y","min",c.target.value)}})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{htmlFor:"y-axis-limits-min",className:"text-sm font-medium",children:"Max"}),e.jsx(Z,{type:"number",placeholder:"Max",className:"flex-1 border-b-2 border-secondary rounded-md p-2",defaultValue:(l=o.yAxisLimits)==null?void 0:l.max,onChange:c=>{n("y","max",c.target.value)}})]})]})]})]})]})},on=a.memo(sn),he={GENERAL:{title:"General settings",value:"general-settings"},AXIS:{title:"Axis settings",value:"axis-settings"},SERIES:{title:"Series settings",value:"series-settings"},TOOLTIP:{title:"Tooltip settings",value:"tooltip-settings"}},nn=s=>{const{chartSettings:o,setChartSettings:t}=s,[n,r]=a.useState(he.GENERAL),d=a.useCallback((l,c)=>{t({...o,[l]:c})},[o,t]),i=$t(d,1e3);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col space-y-1 border-b-2 rounded-lg rounded-b-none p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-0",children:"Customize Your Chart"}),e.jsx("p",{className:"text-sm text-accent-foreground",children:"Customize your chart with the options below."})]}),e.jsxs("div",{className:"flex-grow flex items-stretch overflow-hidden",children:[e.jsx("ul",{className:"flex flex-col w-[200px] border-r-2",children:Object.values(he).map(l=>e.jsx("li",{onClick:()=>r(l),className:E("px-4 py-3 border-b-2 cursor-pointer hover:bg-primary/20",l.value===n.value?"bg-primary/50 hover:bg-primary/50":""),children:l.title},l.value))}),e.jsxs("div",{className:"flex-grow flex flex-col gap-5 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:n.title}),n.value===he.GENERAL.value&&e.jsx(tn,{chartSettings:o,onSettingChange:i}),n.value===he.AXIS.value&&e.jsx(on,{chartSettings:o,onSettingChange:i})]})]})]})},rn=a.memo(nn);function an(s){const{onClose:o}=s,{dataManager:t}=gs(),n=Pe(x=>x.chartToBeEditedId),r=Pe(x=>{var b;return(b=x.charts)==null?void 0:b.find(N=>N.i===n)}),[d,i]=a.useState({type:(r==null?void 0:r.type)??void 0,tracesConfig:(r==null?void 0:r.tracesConfig)??[],chartSettings:(r==null?void 0:r.chartSettings)??{title:"",titleVisibility:!0,legendVisibility:!0,legendPosition:"top",xAxisLabel:"",xAxisLimits:{min:"",max:""},yAxisLabel:"",yAxisLimits:{min:"",max:""}}}),[l,c]=a.useState(r?U.DATA_SELECT.value:U.CHART_TYPE_SELECT.value),u=d.type,h=d.chartSettings,g=d.tracesConfig.filter(x=>{if(!u)return!1;const{xRequired:b,yRequired:N}=qe[u];switch(!0){case(b&&N):return!!(x!=null&&x.x&&(x!=null&&x.y));case(b&&!N):return!!(x!=null&&x.x);case(!b&&N):return!!(x!=null&&x.y);default:return!1}}),f=a.useCallback(x=>{switch(!0){case x===U.CHART_TYPE_SELECT.value:return!1;case x===U.DATA_SELECT.value:return!d.type;case x===U.CUSTOMIZATION.value:return!g.length;default:return!1}},[d.type,g.length]),C=l<=U.CHART_TYPE_SELECT.value,T=a.useMemo(()=>{switch(l){case U.CHART_TYPE_SELECT.value:return!d.type;case U.DATA_SELECT.value:return!g.length;case U.CUSTOMIZATION.value:return!1;default:return!1}},[d.type,g.length,l]),p=l>=U.CUSTOMIZATION.value,S=a.useCallback(x=>{i(b=>({...b,type:x})),c(b=>b+1)},[]),y=a.useCallback(x=>{i(b=>({...b,chartSettings:{...b.chartSettings,...x}}))},[]),m=a.useCallback((x,b)=>{u&&i(N=>{switch(!0){case b===N.tracesConfig.length:return{...N,tracesConfig:[...N.tracesConfig,{...x,settings:{color:Ho[b],name:"Trace "+N.tracesConfig.length},id:vs()}]};case(b>-1&&b<N.tracesConfig.length):return{...N,tracesConfig:N.tracesConfig.reduce((j,k,D)=>b!==D?(j.push(k),j):(j.push({...k,...x}),j),[])};default:return N}})},[u]),v=a.useCallback(x=>{console.log("traceIndex",x),i(b=>x<0||x>=b.tracesConfig.length?b:{...b,tracesConfig:b.tracesConfig.filter((N,j)=>x!==j)})},[]),_=a.useCallback((x,b,N)=>{i(j=>b<0||b>=j.tracesConfig.length?j:{...j,tracesConfig:j.tracesConfig.reduce((k,D,G)=>b!==G?(k.push(D),k):(k.push({...D,settings:{...D.settings,[N]:x}}),k),[])})},[]),M=a.useCallback(x=>{c(x)},[]),V=a.useCallback(()=>{C||c(x=>x-1)},[C]),F=a.useCallback(()=>{T||c(x=>x+1)},[T]),H=a.useCallback(async()=>{if(r){t.updateChart(n,{...r,...d}),o();return}t.addChart(d),o()},[d,r,n,t,o]);return{currentStep:l,chartType:u,completeTraces:g,allTraces:d.tracesConfig,traces:g,isLastStep:p,disablePreviousStep:C,disableNextStep:T,chartSettings:h,handleStepChange:M,handleChartTypeSelect:S,handleChartSettingsChange:y,addOrUpdateTrace:m,deleteTrace:v,editTraceSettingsItem:_,finalizeChartSelection:H,handleLoadPreviousStep:V,handleLoadNextStep:F,checkIfStepIsDisabled:f}}function ln(){const[s,o]=a.useState(null),t=a.useCallback(n=>{o(n)},[]);return{chartAPI:s,setChartPreviewRef:t}}function mn(s){const{onClose:o}=s,{chartType:t,currentStep:n,allTraces:r,completeTraces:d,addOrUpdateTrace:i,deleteTrace:l,editTraceSettingsItem:c,handleChartTypeSelect:u,handleStepChange:h,finalizeChartSelection:g,handleLoadNextStep:f,handleLoadPreviousStep:C,checkIfStepIsDisabled:T,isLastStep:p,disablePreviousStep:S,disableNextStep:y,chartSettings:m,handleChartSettingsChange:v}=an({onClose:o}),{chartAPI:_,setChartPreviewRef:M}=ln(),V=a.useMemo(()=>n!==2&&n!==3||!d.length?null:e.jsxs("div",{className:"flex-grow flex flex-col w-full h-full",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground px-4",children:m!=null&&m.titleVisibility?m==null?void 0:m.title:""}),e.jsx(bs,{chart:{i:"preview",...Ss,tracesConfig:d,type:t,chartSettings:m},chartAPI:_,setRef:M})]}),[_,m,t,d,n,M]);return e.jsx(js,{open:!0,onOpenChange:()=>o(),children:e.jsx(Is,{className:"!w-[90vw] !max-w-[1800px] h-[90vh] flex flex-col p-0 overflow-hidden gap-0",children:e.jsxs(Cs,{children:[e.jsx(Fs,{}),e.jsxs(lt,{value:n.toString(),className:"flex-grow flex flex-col",children:[e.jsx(Ks,{currentStep:n,onStepChange:h,checkIfStepIsDisabled:T}),n===1&&e.jsx(Qs,{onChartSelect:u,tabValue:n.toString(),selectedChartType:t}),(n===2||n===3)&&t&&e.jsx(Zs,{tabValue:n.toString(),chartPreviewJsx:V,sectionJsx:n===2?e.jsx(Uo,{chartType:t,completeTraces:d,allTraces:r,addOrUpdateTrace:i,deleteTrace:l,editTraceSettingsItem:c}):e.jsx(rn,{chartSettings:m,setChartSettings:v})})]}),e.jsx(Ys,{isLastStep:p,disablePreviousStep:S,onNext:p?g:f,onPrevious:C,disableNextStep:y})]})})})}export{mn as default};
